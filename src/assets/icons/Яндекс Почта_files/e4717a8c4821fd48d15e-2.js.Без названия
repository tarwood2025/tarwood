/*! For license information please see e4717a8c4821fd48d15e-2.js.LICENSE */
webpackJsonp([2],{1013:function(e,t,n){var r=n(1014),o=n(1021),i=n(665);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},1014:function(e,t,n){var r=n(445),o=n(547),i=1,s=2;e.exports=function(e,t,n,a){var u=n.length,c=u,l=!a;if(null==e)return!c;for(e=Object(e);u--;){var f=n[u];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++u<c;){var p=(f=n[u])[0],d=e[p],h=f[1];if(l&&f[2]){if(void 0===d&&!(p in e))return!1}else{var v=new r;if(a)var y=a(d,h,p,e,t,v);if(!(void 0===y?o(h,d,i|s,a,v):y))return!1}}return!0}},1015:function(e,t,n){var r=n(445),o=n(663),i=n(1019),s=n(1020),a=n(390),u=n(344),c=n(408),l=n(425),f=1,p="[object Arguments]",d="[object Array]",h="[object Object]",v=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,y,m,g){var _=u(e),w=u(t),b=_?d:a(e),x=w?d:a(t),E=(b=b==p?h:b)==h,S=(x=x==p?h:x)==h,M=b==x;if(M&&c(e)){if(!c(t))return!1;_=!0,E=!1}if(M&&!E)return g||(g=new r),_||l(e)?o(e,t,n,y,m,g):i(e,t,b,n,y,m,g);if(!(n&f)){var T=E&&v.call(e,"__wrapped__"),j=S&&v.call(t,"__wrapped__");if(T||j){var V=T?e.value():e,A=j?t.value():t;return g||(g=new r),m(V,A,n,y,g)}}return!!M&&(g||(g=new r),s(e,t,n,y,m,g))}},1016:function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},1017:function(e,t){e.exports=function(e){return this.__data__.has(e)}},1018:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},1019:function(e,t,n){var r=n(365),o=n(533),i=n(387),s=n(663),a=n(660),u=n(548),c=1,l=2,f="[object Boolean]",p="[object Date]",d="[object Error]",h="[object Map]",v="[object Number]",y="[object RegExp]",m="[object Set]",g="[object String]",_="[object Symbol]",w="[object ArrayBuffer]",b="[object DataView]",x=r?r.prototype:void 0,E=x?x.valueOf:void 0;e.exports=function(e,t,n,r,x,S,M){switch(n){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!S(new o(e),new o(t)));case f:case p:case v:return i(+e,+t);case d:return e.name==t.name&&e.message==t.message;case y:case g:return e==t+"";case h:var T=a;case m:var j=r&c;if(T||(T=u),e.size!=t.size&&!j)return!1;var V=M.get(e);if(V)return V==t;r|=l,M.set(e,t);var A=s(T(e),T(t),r,x,S,M);return M.delete(e),A;case _:if(E)return E.call(e)==E.call(t)}return!1}},1020:function(e,t,n){var r=n(529),o=1,i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,s,a,u){var c=n&o,l=r(e),f=l.length;if(f!=r(t).length&&!c)return!1;for(var p=f;p--;){var d=l[p];if(!(c?d in t:i.call(t,d)))return!1}var h=u.get(e);if(h&&u.get(t))return h==t;var v=!0;u.set(e,t),u.set(t,e);for(var y=c;++p<f;){var m=e[d=l[p]],g=t[d];if(s)var _=c?s(g,m,d,t,e,u):s(m,g,d,e,t,u);if(!(void 0===_?m===g||a(m,g,n,s,u):_)){v=!1;break}y||(y="constructor"==d)}if(v&&!y){var w=e.constructor,b=t.constructor;w!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b)&&(v=!1)}return u.delete(e),u.delete(t),v}},1021:function(e,t,n){var r=n(664),o=n(371);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,r(s)]}return t}},1022:function(e,t,n){var r=n(547),o=n(666),i=n(735),s=n(448),a=n(664),u=n(665),c=n(381),l=1,f=2;e.exports=function(e,t){return s(e)&&a(t)?u(c(e),t):function(n){var s=o(n,e);return void 0===s&&s===t?i(n,e):r(t,s,l|f)}}},1023:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},1024:function(e,t,n){var r=n(391),o=n(400),i=n(344),s=n(409),a=n(426),u=n(381);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var p=u(t[c]);if(!(f=null!=e&&n(e,p)))break;e=e[p]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&a(l)&&s(p,l)&&(i(e)||o(e))}},1025:function(e,t,n){var r=n(1026),o=n(1027),i=n(448),s=n(381);e.exports=function(e){return i(e)?r(s(e)):o(e)}},1026:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},1027:function(e,t,n){var r=n(429);e.exports=function(e){return function(t){return r(t,e)}}},1028:function(e,t,n){var r=n(701),o=1/0,i=1.7976931348623157e308;e.exports=function(e){return e?(e=r(e))===o||e===-o?(e<0?-1:1)*i:e==e?e:0:0===e?e:0}},1042:function(e,t,n){var r=n(671);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},1043:function(e,t){e.exports=function(e){return e!=e}},1044:function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},1048:function(e,t,n){var r=n(429),o=n(1049),i=n(391);e.exports=function(e,t,n){for(var s=-1,a=t.length,u={};++s<a;){var c=t[s],l=r(e,c);n(l,c)&&o(u,i(c,e),l)}return u}},1049:function(e,t,n){var r=n(467),o=n(391),i=n(409),s=n(353),a=n(381);e.exports=function(e,t,n,u){if(!s(e))return e;for(var c=-1,l=(t=o(t,e)).length,f=l-1,p=e;null!=p&&++c<l;){var d=a(t[c]),h=n;if(c!=f){var v=p[d];void 0===(h=u?u(v,d,p):void 0)&&(h=s(v)?v:i(t[c+1])?[]:{})}r(p,d,h),p=p[d]}return e}},1052:function(e,t,n){var r=n(508);e.exports=function(e,t){var n=[];return r(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n}},1053:function(e,t,n){var r=n(745),o=n(371);e.exports=function(e,t){return e&&r(e,t,o)}},1054:function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===n(i[u],u,i))break}return t}}},1055:function(e,t,n){var r=n(364);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var i=n.length,s=t?i:-1,a=Object(n);(t?s--:++s<i)&&!1!==o(a[s],s,a););return n}}},1056:function(e,t,n){var r=n(508),o=n(364);e.exports=function(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,function(e,r,o){i[++n]=t(e,r,o)}),i}},1068:function(e,t,n){var r=n(671),o=n(364),i=n(1069),s=n(549),a=n(630),u=Math.max;e.exports=function(e,t,n,c){e=o(e)?e:a(e),n=n&&!c?s(n):0;var l=e.length;return n<0&&(n=u(l+n,0)),i(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&r(e,t,n)>-1}},1069:function(e,t,n){var r=n(363),o=n(344),i=n(356),s="[object String]";e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&r(e)==s}},1070:function(e,t,n){var r=n(534),o=n(1071),i=4294967295;function s(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=i,this.__views__=[]}s.prototype=r(o.prototype),s.prototype.constructor=s,e.exports=s},1071:function(e,t){e.exports=function(){}},1072:function(e,t){e.exports=function(e){return e.placeholder}},1472:function(e,t,n){var r=n(972),o=4;e.exports=function(e){return r(e,o)}},1473:function(e,t,n){var r=n(403);e.exports=function(e){return"function"==typeof e?e:r}},1474:function(e,t){e.exports=function(e){return void 0===e}},1475:function(e,t,n){var r=n(449),o=n(391),i=n(711),s=n(986),a=n(381);e.exports=function(e,t,n){t=o(t,e);var u=null==(e=s(e,t))?e:e[a(i(t))];return null==u?void 0:r(u,e,n)}},1476:function(e,t,n){var r=n(475),o=n(746);e.exports=function(e){return r(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,a&&o(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var u=n[r];u&&e(t,u,r,s)}return t})}},1477:function(e,t,n){var r=n(446),o=n(387);e.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},1478:function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},1479:function(e,t,n){var r=n(403),o=n(1480),i=o?function(e,t){return o.set(e,t),e}:r;e.exports=i},1480:function(e,t,n){var r=n(532),o=r&&new r;e.exports=o},1481:function(e,t,n){var r=n(1482),o=n(1483),i=n(4538),s=n(750),a=n(1484),u=n(1072),c=n(4547),l=n(751),f=n(346),p=1,d=2,h=8,v=16,y=128,m=512;e.exports=function e(t,n,g,_,w,b,x,E,S,M){var T=n&y,j=n&p,V=n&d,A=n&(h|v),C=n&m,k=V?void 0:s(t);return function p(){for(var d=arguments.length,h=Array(d),v=d;v--;)h[v]=arguments[v];if(A)var y=u(p),m=i(h,y);if(_&&(h=r(h,_,w,A)),b&&(h=o(h,b,x,A)),d-=m,A&&d<M){var O=l(h,y);return a(t,n,e,p.placeholder,g,h,O,E,S,M-d)}var U=j?g:this,R=V?U[t]:t;return d=h.length,E?h=c(h,E):C&&d>1&&h.reverse(),T&&S<d&&(h.length=S),this&&this!==f&&this instanceof p&&(R=k||s(R)),R.apply(U,h)}}},1482:function(e,t){var n=Math.max;e.exports=function(e,t,r,o){for(var i=-1,s=e.length,a=r.length,u=-1,c=t.length,l=n(s-a,0),f=Array(c+l),p=!o;++u<c;)f[u]=t[u];for(;++i<a;)(p||i<s)&&(f[r[i]]=e[i]);for(;l--;)f[u++]=e[i++];return f}},1483:function(e,t){var n=Math.max;e.exports=function(e,t,r,o){for(var i=-1,s=e.length,a=-1,u=r.length,c=-1,l=t.length,f=n(s-u,0),p=Array(f+l),d=!o;++i<f;)p[i]=e[i];for(var h=i;++c<l;)p[h+c]=t[c];for(;++a<u;)(d||i<s)&&(p[h+r[a]]=e[i++]);return p}},1484:function(e,t,n){var r=n(4539),o=n(1487),i=n(1488),s=1,a=2,u=4,c=8,l=32,f=64;e.exports=function(e,t,n,p,d,h,v,y,m,g){var _=t&c;t|=_?l:f,(t&=~(_?f:l))&u||(t&=~(s|a));var w=[e,t,d,_?h:void 0,_?v:void 0,_?void 0:h,_?void 0:v,y,m,g],b=n.apply(void 0,w);return r(e)&&o(b,w),b.placeholder=p,i(b,e,t)}},1485:function(e,t,n){var r=n(1480),o=n(579),i=r?function(e){return r.get(e)}:o;e.exports=i},1486:function(e,t,n){var r=n(534),o=n(1071);function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}i.prototype=r(o.prototype),i.prototype.constructor=i,e.exports=i},1487:function(e,t,n){var r=n(1479),o=n(538)(r);e.exports=o},1488:function(e,t,n){var r=n(4544),o=n(4545),i=n(501),s=n(4546);e.exports=function(e,t,n){var a=t+"";return i(e,o(a,s(r(a),n)))}},205:function(e,t,n){"use strict";Jane.module("noscript.js",function(){n(4464)})},332:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Features=t.getFeatureParams=t.hasFeature=void 0;var r=n(87);Object.defineProperty(t,"Features",{enumerable:!0,get:function(){return r.Features}});var o=n(14);Object.defineProperty(t,"hasFeature",{enumerable:!0,get:function(){return o.hasFeature}}),t.getFeatureParams=function(e){return window.Daria.getFeatureParams(e)||null}},340:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hideStatusline=t.showStatuslineComponent=t.showSuccessMessage=t.showErrorMessage=void 0;var i=o(n(134)),s=n(343),a=n(86);t.showErrorMessage=function(e,t){var n=a.getStatuslineBridge(),o=a.getStatuslineComponents().BasicErrorMessage;n&&n.show({name:e,renderContent:function(e){return i.default.createElement(o,r({},e,{text:t}))}})};t.showSuccessMessage=function(e,t){var n=a.getStatuslineBridge(),o=a.getStatuslineComponents().BasicTextMessage;n&&n.show({name:e,renderContent:function(e){return i.default.createElement(o,r({},e,{text:t}))}})};t.showStatuslineComponent=function(e){var t=a.getStatuslineBridge(),n=a.getStatuslineComponents(),o=n.BasicTextMessage,u=n.CannotLoadData,c=n.ConfirmMops,l=n.ConfirmNotSpam,f=n.DeleteOrUnsubscribe,p=n.DeleteOrUnsubscribeOld,d=n.EmailAddedToBlacklist,h=n.FilterApply,v=n.FilterCreate,y=n.FilterWasCreated,m=n.MarkReadOrUnsubscribe,g=n.MessagesNotSpam,_=n.MessageSent,w=n.MessageSentDelayed,b=n.SettingsSaved,x=n.SignatureAdded,E=n.SignatureDeleted,S=n.SignatureUpdated,M=n.SpamOrDelete,T=n.SpamOrUnsubscribe,j=n.TemplateUpdated,V=n.TimelineLoadingError,A=n.UndoNotSpam,C=n.UnsubscribeSuccess;if(t)switch(e.name){case s.StatuslineName.CannotLoadData:t.show({name:e.name,renderContent:function(e){return i.default.createElement(u,r({},e))}});break;case s.StatuslineName.ConfirmMops:t.show({name:e.name,renderContent:function(t){return i.default.createElement(c,r({},t,e))}});break;case s.StatuslineName.ConfirmNotSpam:t.show({name:e.name,renderContent:function(t){return i.default.createElement(l,r({},t,e))}});break;case s.StatuslineName.DeleteOrUnsubscribe:t.show({name:e.name,renderContent:function(t){return i.default.createElement(f,r({},t,e))}});break;case s.StatuslineName.DeleteOrUnsubscribeOld:t.show({name:e.name,renderContent:function(t){return i.default.createElement(p,r({},t,e))}});break;case s.StatuslineName.EmailAddedToBlacklist:t.show({name:e.name,renderContent:function(t){return i.default.createElement(d,r({},t,{email:e.email}))}});break;case s.StatuslineName.FilterApply:t.show({name:e.name,renderContent:function(t){return i.default.createElement(h,r({},t,e))}});break;case s.StatuslineName.FilterCreate:t.show({name:e.name,renderContent:function(t){return i.default.createElement(v,r({},t,e))}});break;case s.StatuslineName.FilterWasCreated:t.show({name:e.name,renderContent:function(t){return i.default.createElement(y,r({},t,{filterId:e.filterId}))}});break;case s.StatuslineName.MarkReadOrUnsubscribe:t.show({name:e.name,renderContent:function(t){return i.default.createElement(m,r({},t,e))}});break;case s.StatuslineName.MessagesNotSpam:t.show({name:e.name,renderContent:function(t){return i.default.createElement(g,r({},t,{count:e.count}))}});break;case s.StatuslineName.MessageSent:t.show({name:e.name,renderContent:function(t){return i.default.createElement(_,r({},t,e))}});break;case s.StatuslineName.MessageSentDelayed:t.show({name:e.name,renderContent:function(t){return i.default.createElement(w,r({},t,e))}});break;case s.StatuslineName.MultipleEmailsSelected:break;case s.StatuslineName.SettingsSaved:t.show({name:e.name,renderContent:function(t){return i.default.createElement(b,r({},t,e))}});break;case s.StatuslineName.SignatureAdded:t.show({name:e.name,renderContent:function(t){return i.default.createElement(x,r({},t,e))}});break;case s.StatuslineName.SignatureDeleted:t.show({name:e.name,renderContent:function(t){return i.default.createElement(E,r({},t,e))}});break;case s.StatuslineName.SignatureUpdated:t.show({name:e.name,renderContent:function(t){return i.default.createElement(S,r({},t,e))}});break;case s.StatuslineName.SpamOrDelete:t.show({name:e.name,renderContent:function(t){return i.default.createElement(M,r({},t,e))}});break;case s.StatuslineName.SpamOrUnsubscribe:t.show({name:e.name,renderContent:function(t){return i.default.createElement(T,r({},t,e))}});break;case s.StatuslineName.TemplateUpdated:t.show({name:e.name,renderContent:function(t){return i.default.createElement(j,r({},t,{text:e.text}))}});break;case s.StatuslineName.TimelineLoadingError:t.show({name:e.name,renderContent:function(e){return i.default.createElement(V,r({},e))}});break;case s.StatuslineName.UndoNotSpam:t.show({name:e.name,renderContent:function(t){return i.default.createElement(A,r({},t,e))}});break;case s.StatuslineName.UnsubscribeSuccess:t.show({name:e.name,renderContent:function(t){return i.default.createElement(C,r({},t,{count:e.count}))}});break;default:t.show({name:e.name,renderContent:function(t){return i.default.createElement(o,r({},t,{text:e.text}))}})}};t.hideStatusline=function(e){var t=a.getStatuslineBridge();t&&t.hide(e)}},343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatuslineName=void 0,function(e){e.AbookContactAdded="AbookContactAdded",e.AbookContactsAddedToGroup="AbookContactsAddedToGroup",e.AbookContactRemoved="AbookContactRemoved",e.AbookChangesSaved="AbookChangesSaved",e.AbookAddPersonFailed="AbookAddPersonFailed",e.AbookFailed="AbookFailed",e.AbookGroupCreationFailed="AbookGroupCreationFailed",e.AutoreplySaveFailed="AutoreplySaveFailed",e.AutoreplySaveSuccess="AutoreplySaveSuccess",e.BeautifulEmailAuthFailed="BeautifulEmailAuthFailed",e.BeautifulEmailChangeLoginOk="BeautifulEmailChangeLoginOk",e.BeautifulEmailChangeLoginError="BeautifulEmailChangeLoginError",e.BeautifulEmailCancelSubscriptionOk="BeautifulEmailCancelSubscriptionOk",e.BeautifulEmailCancelSubscriptionError="BeautifulEmailCancelSubscriptionError",e.BugReportSentSuccess="BugReportSentSuccess",e.BugReportSentFailure="BugReportSentFailure",e.CancelSendFailed="CancelSendFailed",e.CannotClearFolder="CannotClearFolder",e.CannotCreateFilter="CannotCreateFilter",e.CannotForwardSpam="CannotForwardSpam",e.CannotLoadData="CannotLoadData",e.ConfirmMops="ConfirmMops",e.ConfirmNotSpam="ConfirmNotSpam",e.DeleteOrUnsubscribe="DeleteOrUnsubscribe",e.DeleteOrUnsubscribeOld="DeleteOrUnsubscribeOld",e.DraftRemoved="DraftRemoved",e.DraftSaveError="DraftSaveError",e.EmailAddedToBlacklist="EmailAddedToBlacklist",e.EmptyFolderError="EmptyFolderError",e.MailEventCreateError="MailEventCreateError",e.FilterApplied="FilterApplied",e.FilterApply="FilterApply",e.FiltersBlacklistAddSelfForbidden="FiltersBlacklistAddSelfForbidden",e.FiltersWhitelistAddSelfForbidden="FiltersWhitelistAddSelfForbidden",e.FiltersBlackWhiteListAlreadyExist="FiltersBlackWhiteListAlreadyExist",e.FiltersBlackWhiteListAddError="FiltersBlackWhiteListAddError",e.FilterCreate="FilterCreate",e.FilterWasCreated="FilterWasCreated",e.FiltersListsAddError="FiltersListsAddError",e.FolderDelete="FolderDelete",e.FoldersMoveError="FoldersMoveError",e.HiddenTrashToggleFailed="HiddenTrashToggleFailed",e.LabelDelete="LabelDelete",e.MarkReadOrUnsubscribe="MarkReadOrUnsubscribe",e.MultipleEmailsSelected="MultipleEmailsSelected",e.MessagesDeleteFromTrash="MessagesDeleteFromTrash",e.MessagesLabel="MessagesLabel",e.MessagesMoved="MessagesMoved",e.MessagesMovedArchive="MessagesMovedArchive",e.MessagesNotSpam="MessagesNotSpam",e.MessagesNotSpamAsync="MessagesNotSpamAsync",e.MessagesPinned="MessagesPinned",e.MessagesRemoved="MessagesRemoved",e.MessageSendingFailed="MessageSendingFailed",e.MessageSent="MessageSent",e.MessageSentDelayed="MessageSentDelayed",e.MessagesUnlabel="MessagesUnlabel",e.MessagesUnpinned="MessagesUnpinned",e.ModificationOperationsError="ModificationOperationsError",e.NoActionError="NoActionError",e.ReplyLaterCreateError="ReplyLaterCreateError",e.ReplyLaterCreateSuccess="ReplyLaterCreateSuccess",e.ReplyLaterRemoveError="ReplyLaterRemoveError",e.ReplyLaterRemoveSuccess="ReplyLaterRemoveSuccess",e.ReplyToOnlyOneEmailError="ReplyToOnlyOneEmailError",e.SendOnNoAddressError="SendOnNoAddressError",e.SetupError="SetupError",e.SettingsSaved="SettingsSaved",e.SpamOrDelete="SpamOrDelete",e.SpamOrUnsubscribe="SpamOrUnsubscribe",e.SignatureMaxCountLimitExceeded="SignatureMaxCountExceeded",e.SignatureMaxLengthLimitExceeded="SignatureMaxLengthLimitExceeded",e.SignatureAdded="SignatureAdded",e.SignatureAppended="SignatureAppended",e.SignatureAppendError="SignatureAppendError",e.SignatureDeleted="SignatureDeleted",e.SignatureUpdated="SignatureUpdated",e.TemplateCreated="TemplateCreated",e.TemplateMissingError="TemplateMissingError",e.TemplateNotFound="TemplateNotFound",e.TemplateUpdated="TemplateUpdated",e.TimelineLoadingError="TimelineLoadingError",e.TooBigAttachment="TooBigAttachment",e.TranslationError="TranslationError",e.UndoNotSpam="UndoNotSpam",e.UnsubscribeModalError="UnsubscribeModalError",e.UnsubscribeSuccess="UnsubscribeSuccess",e.CollectorCreated="CollectorCreated",e.InboxGPTEnabled="InboxGPTEnabled",e.InboxGPTDeletedSuccess="InboxGPTDeletedSuccess",e.InboxGPTDeletedBad="InboxGPTDeletedBad",e.InboxGPTDeletedGarbage="InboxGPTDeletedGarbage",e.InboxGPTCodeCopyToClipboard="InboxGPTCodeCopyToClipboard",e.ContactSummaryAddressCopied="ContactSummaryAddressCopied",e.MailToEventCreateEvent="MailToEventCreateEvent"}(t.StatuslineName||(t.StatuslineName={}))},344:function(e,t){var n=Array.isArray;e.exports=n},346:function(e,t,n){var r=n(454),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},353:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},356:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},358:function(e,t,n){var r=n(559),o=n(564);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},363:function(e,t,n){var r=n(365),o=n(560),i=n(561),s="[object Null]",a="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?a:s:u&&u in Object(e)?o(e):i(e)}},364:function(e,t,n){var r=n(414),o=n(426);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},365:function(e,t,n){var r=n(346).Symbol;e.exports=r},371:function(e,t,n){var r=n(463),o=n(491),i=n(364);e.exports=function(e){return i(e)?r(e):o(e)}},381:function(e,t,n){var r=n(389),o=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},384:function(e,t,n){var r=n(358)(Object,"create");e.exports=r},385:function(e,t,n){var r=n(569),o=n(570),i=n(571),s=n(572),a=n(573);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,e.exports=u},386:function(e,t,n){var r=n(387);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},387:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},388:function(e,t,n){var r=n(575);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},389:function(e,t,n){var r=n(363),o=n(356),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&r(e)==i}},390:function(e,t,n){var r=n(649),o=n(415),i=n(650),s=n(531),a=n(532),u=n(363),c=n(455),l=c(r),f=c(o),p=c(i),d=c(s),h=c(a),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||s&&"[object Set]"!=v(new s)||a&&"[object WeakMap]"!=v(new a))&&(v=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case p:return"[object Promise]";case d:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},391:function(e,t,n){var r=n(344),o=n(448),i=n(651),s=n(535);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(s(e))}},400:function(e,t,n){var r=n(632),o=n(356),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},402:function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},403:function(e,t){e.exports=function(e){return e}},407:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},408:function(e,t,n){(function(e){var r=n(346),o=n(633),i="object"==typeof t&&t&&!t.nodeType&&t,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||o;e.exports=u}).call(t,n(332)(e))},409:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var o=typeof e;return!!(t=null==t?n:t)&&("number"==o||"symbol"!=o&&r.test(e))&&e>-1&&e%1==0&&e<t}},410:function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},411:function(e,t,n){var r=n(467),o=n(446);e.exports=function(e,t,n,i){var s=!n;n||(n={});for(var a=-1,u=t.length;++a<u;){var c=t[a],l=i?i(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),s?o(n,c,l):r(n,c,l)}return n}},413:function(e,t,n){var r=n(422),o="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},414:function(e,t,n){var r=n(363),o=n(353),i="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==s||t==a||t==i||t==u}},415:function(e,t,n){var r=n(358)(n(346),"Map");e.exports=r},419:function(e,t,n){var r=n(463),o=n(647),i=n(364);e.exports=function(e){return i(e)?r(e,!0):o(e)}},422:function(e,t,n){var r=n(556),o=n(574),i=n(576),s=n(577),a=n(578);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,e.exports=u},425:function(e,t,n){var r=n(634),o=n(427),i=n(443),s=i&&i.isTypedArray,a=s?o(s):r;e.exports=a},426:function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},427:function(e,t){e.exports=function(e){return function(t){return e(t)}}},428:function(e,t,n){var r=n(498),o=n(470),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return i.call(e,t)}))}:o;e.exports=a},429:function(e,t,n){var r=n(391),o=n(381);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},443:function(e,t,n){(function(e){var r=n(454),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o&&r.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a}).call(t,n(332)(e))},445:function(e,t,n){var r=n(385),o=n(641),i=n(642),s=n(643),a=n(644),u=n(645);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,e.exports=c},446:function(e,t,n){var r=n(468);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},4464:function(e,t,n){"use strict";window.NS_IS_TOUCH=!1,window.yr=n(4465),window.vow=n(4466),window.Vow=n(4467),n(4468),window.no=n(4469),n(4470),n(4471),no.True=no.true,no.False=no.false,window.jpath=function(e,t){return no.jpath.raw(t,e).toArray()},window.ns=n(4472),n(4473),n(4474),n(4475),n(4476),n(4477),n(4478),n(4479),n(4480),n(4481),n(4482),n(4483),n(4484),n(4485),n(4487),n(4488),n(4489),n(4500),n(4501),n(4502),n(4503),n(4504),n(4505),n(4506),n(4507),n(4508),n(4509),n(4510),n(4511),n(4513),n(4517),n(4518),n(4519),n(4552),n(4553),ns.events.on("ns-page-before-load",function(e,t,n){var r=ns.page.currentUrl;r&&n!==r&&ns.events.trigger("ns-page-before-changed",r,n),Daria.Page.loadingHash=n,Daria.Page.referrer=ns.page.current.page,Daria.Page.referrerUrl=r}),ns.DEBUG=Daria.DEBUG},4465:function(e,t,n){var r={};!function(){r.log=function(){};var e={},t=/&/g,n=/</g,o=/>/g,i=/"/g,s=/&amp;/g,a=/&lt;/g,u=/&gt;/g;function c(e){return e.replace(/&/g,"&amp;")}r.text2xml=function(e){return null==e?"":(""+e).replace(t,"&amp;").replace(n,"&lt;").replace(o,"&gt;")},r.xml2text=function(e){return null==e?"":(""+e).replace(a,"<").replace(u,">").replace(s,"&")},r.text2attr=function(e){return null==e?"":(""+e).replace(t,"&amp;").replace(i,"&quot;").replace(n,"&lt;").replace(o,"&gt;")},r.xml2attr=function(e){return null==e?"":(""+e).replace(i,"&quot;").replace(n,"&lt;").replace(o,"&gt;")},r.register=function(t,n){if(r.isRegistered(t))throw Error('Module "'+t+'" already exists');for(var o=n.imports||[],i=[n],s=0,a=o.length;s<a;s++){var u=e[o[s]];if(!u)throw Error('Module "'+o[s]+"\" doesn't exist");i=i.concat(u.imports)}n.imports=i,e[t]=n},r.isRegistered=function(t){return!!e[t]},r.run=function(t,n,r,o,i){r=r||"";var s=e[t];if(!s)throw'Module "'+t+'" is undefined';var a=new f(n,i);return o?s.a.apply(s,[s,0,[a.root],r,{a:{}}].concat(o)):s.a(s,0,[a.root],r,{a:{}})},r.join=function(e,t){return e.concat(t)},r.nodeValue=function(e){var t=e.data;return"object"==typeof t?"":t},r.nodeName=function(e){var t=e[0];return t?t.name:""},r.simpleScalar=function(e,t){var n=t.data;if(!n)return"";if("*"===e){for(var o in n)return r.simpleScalar(o,t);return""}var i=n[e];return"object"==typeof i?"":void 0===i?"":i},r.simpleBoolean=function(e,t){var n=t.data;if(!n)return!1;if("*"===e){for(var o in n){var i;if(i=r.simpleBoolean(o,t))return!0}return!1}return!!(i=n[e])&&(!Array.isArray(i)||i.length)},r.nodeset2scalar=function(e){if(!e.length)return"";var t=e[0].data;return"object"==typeof t?"":t},r.nodeset2boolean=function(e){return!!(e&&e.length>0)&&!!e[0].data},r.nodeset2xml=function(e){return r.scalar2xml(r.nodeset2scalar(e))},r.nodeset2attrvalue=function(e){return r.scalar2attrvalue(r.nodeset2scalar(e))},r.scalar2xml=r.text2xml,r.xml2scalar=r.xml2text,r.xml2attrvalue=r.xml2attr,r.scalar2attrvalue=r.text2attr,r.object2nodeset=function(e){return[new f(e).root]},r.array2nodeset=function(e){return[new f({item:e}).root]},r.cmpSN=function(e,t){for(var n=0,o=t.length;n<o;n++)if(e==r.nodeValue(t[n]))return!0;return!1},r.cmpNN=function(e,t){var n=t.length;if(0===n)return!1;if(1===n)return r.cmpSN(r.nodeValue(t[0]),e);for(var o=[],i=r.nodeValue(t[0]),s=0,a=e.length;s<a;s++){var u=r.nodeValue(e[s]);if(u==i)return!0;o[s]=u}for(var c=1;c<n;c++){i=r.nodeValue(t[c]);for(s=0,a=e.length;s<a;s++)if(o[s]==i)return!0}return!1},r.shortTags={br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,wbr:!0},r.closeAttrs=function(e){var t=e.s;if(t){var n="",o=e.a;for(var i in o)n+=" "+i+'="'+o[i].quote()+'"';return n+=r.shortTags[t]?"/>":">",e.s=null,n}return""},r.copyAttrs=function(e,t){for(var n in t)e[n]=t[n]},r.scalarAttr=function(e){this.s=null==e?"":""+e},r.scalarAttr.prototype.quote=function(){return r.text2attr(this.s)},r.scalarAttr.prototype.addxml=function(e){return new r.xmlAttr(c(this.s)+e)},r.scalarAttr.prototype.addscalar=function(e){return new r.scalarAttr(this.s+e)},r.xmlAttr=function(e){this.s=null==e?"":""+e},r.xmlAttr.prototype.quote=function(){return r.xml2attr(this.s)},r.xmlAttr.prototype.addscalar=function(e){return new r.xmlAttr(this.s+c(e))},r.slice=function(e,t,n){return e=""+e,n?e.slice(t,n):e.slice(t)},r.exists=function(e){return e.length>0},r.grep=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,o)&&n.push(i)}return n},r.byIndex=function(e,t){return e.slice(t,t+1)},r.sort=function(e,t,n){for(var r=[],o=0,i=e.length;o<i;o++){var s=e[o],a=t(s,o,i);r.push({node:s,value:a})}var u=n?-1:1,c=n?1:-1,l=r.sort(function(e,t){var n=e.value,r=t.value;return n<r?c:n>r?u:0}),f=[];for(o=0,i=l.length;o<i;o++)f.push(l[o].node);return f},r.nodeset2data=function(e){var t=e.length;if(0===t)return"";if(1===t)return e[0].data;for(var n=[],r=0;r<t;r++)n.push(e[r].data);return n},r.externals={};var l=function(){};function f(e,t){Array.isArray(e)&&(e={item:e}),this.root={data:e,parent:null,name:t||"",doc:this},this._vars={},this._keys={}}l.prototype.a=function(e,t,n,r,o){var i,s="";arguments.length>5&&(i=Array.prototype.slice.call(arguments,5));for(var a=e.imports,u=0,c=n.length;u<c;u++){for(var l,f,p=n[u],d=!1,h=t,v=a.length;!d&&h<v;){var y=(l=a[h++]).matcher[r];if(y){var m=y[p.name]||y["*"];if(m)for(var g=0,_=m.length;!d&&g<_;){var w=m[g++],b=(f=l[w]).j;if(b)l.matched(b,f.a,p,u,c)&&(d=w);else for(var x=f.s,E=f.a,S=0,M=x.length;S<M;S++)if(l.matched(x[S],E[S],p,u,c)){d=w;break}}}}d&&(s+=i?f.apply(e,[e,p,u,c,o].concat(i)):f(e,p,u,c,o))}return s},l.prototype.matched=function(e,t,n,r,o){if(1===e)return!n.parent;for(var i=e.length-2;i>=0;){if(!n)return!1;switch(e[i]){case 0:var s=e[i+1];if("*"!==s&&s!==n.name)return!1;n=n.parent;break;case 2:case 4:if(!(0,e[i+1])(this,n,r,o))return!1}i-=2}return!t||!n.parent},l.prototype.s=function(e,t){return this.n(e,[t])},l.prototype.n=function(e,t){for(var n,o=t,i=o.length,s=0,a=e.length;s<a;s+=2){n=[];var u=e[s],c=e[s+1];switch(u){case 0:for(var l=0;l<i;l++)r.selectNametest(c,o[l],n);break;case 1:for(l=0;l<i;l++){for(var f=0,p=o[l];f<c&&p;)p=p.parent,f++;p&&n.push(p)}break;case 2:for(l=0;l<i;l++){c(this,p=o[l],l,i)&&n.push(p)}break;case 3:n=(p=o[c])?[p]:[];break;case 4:if(i>0)c(this,(p=o[0]).doc.root,0,1)&&(n=n.concat(o))}if(!(i=(o=n).length))return[]}return n},r.selectNametest=function(e,t,n){var o=t.data;if(!o||"object"!=typeof o)return n;if("*"===e){if(Array.isArray(o))for(var i=0,s=o.length;i<s;i++)r.selectNametest(i,t,n);else for(e in o)r.selectNametest(e,t,n);return n}if(void 0===(o=o[e]))return n;var a=t.doc;if(Array.isArray(o))for(i=0,s=o.length;i<s;i++)n.push({data:o[i],parent:t,name:e,doc:a});else n.push({data:o,parent:t,name:e,doc:a});return n},r.document=function(e){return[(e.length?new f(e[0].data):new f({})).root]},r.subnode=function(e,t,n){var r=n.doc;if(Array.isArray(t)){for(var o=[],i=0,s=t.length;i<s;i++)o.push({data:t[i],name:e,parent:n,doc:r});return o}return[{data:t,name:e,parent:n,doc:r}]},l.prototype.v=function(e,t){var n=t.doc._vars,r=n[e];if(void 0===r){var o=this.findSymbol(e);r="function"==typeof o?o(this,t,0,1):o,n[e]=r}return r},l.prototype.f=function(e,t,n,r,o){var i=this.findSymbol(e);if(arguments.length>5){var s=Array.prototype.slice.call(arguments);return s[0]=this,i.apply(this,s)}return void 0!==o?i(this,t,n,r,o):i(this,t,n,r)},l.prototype.k=function(e,t,n,o){var i=n.doc._keys,s=this.findSymbol(e),a=i[e];a||(a=this._initKey(s,e,t,n));var u=a.values,c=a.nodes,l=this;if(o){var f;if(a.xml){f="";for(var p=0,d=t.length;p<d;p++){n=t[p];f+=v(r.nodeValue(n))}}else{f=[];for(p=0,d=t.length;p<d;p++){n=t[p];f=f.concat(v(r.nodeValue(n)))}}return f}var h=u[t];return void 0===h&&(h=v(t)),h;function v(e){var t,n=c[e];if(a.xml){if(t="",n)for(var r=0,o=n.length;r<o;r++){var i=n[r];t+=s.b(l,i.c,i.i,i.l,{})}}else if(t=[],n)for(r=0,o=n.length;r<o;r++){i=n[r];t=t.concat(s.b(l,i.c,i.i,i.l))}return u[e]=t,t}},l.prototype._initKey=function(e,t,n,o){var i=o.doc._keys[t]={};i.xml="xml"===e.bt;var s=e.n(this,o),a=i.nodes={};if("nodeset"===e.ut)for(var u=0,c=s.length;u<c;u++)for(var l=s[u],f=0,p=(d=e.u(this,l,u,c)).length;f<p;f++)h(r.nodeValue(d[f]),{c:l,i:u,l:c});else for(u=0,c=s.length;u<c;u++){var d;l=s[u];h(d=e.u(this,l,u,c),{c:l,i:u,l:c})}return i.values={},i;function h(e,t){var n=a[e];n||(n=a[e]=[]),n.push(t)}},l.prototype.findSymbol=function(e){for(var t=this.imports,n=0,r=t.length;n<r;n++){var o=t[n][e];if(void 0!==o)return o}},r.Module=l}(),e.exports=r},4466:function(e,t,n){var r;(function(){!function(o){var i=function(){var e=[],t=function(t){return e.push(t),1===e.length},n=function(){var t=e,n=0,r=e.length;for(e=[];n<r;)t[n++]()};if("function"==typeof setImmediate)return function(e){t(e)&&setImmediate(n)};if("object"==typeof process&&process.nextTick)return function(e){t(e)&&process.nextTick(n)};var r=o.MutationObserver||o.WebKitMutationObserver;if(r){var i=1,s=document.createTextNode("");return new r(n).observe(s,{characterData:!0}),function(e){t(e)&&(s.data=i*=-1)}}if(o.postMessage){var a=!0;if(o.attachEvent){var u=function(){a=!1};o.attachEvent("onmessage",u),o.postMessage("__checkAsync","*"),o.detachEvent("onmessage",u)}if(a){var c="__promise"+Math.random()+"_"+new Date,l=function(e){e.data===c&&(e.stopPropagation&&e.stopPropagation(),n())};return o.addEventListener?o.addEventListener("message",l,!0):o.attachEvent("onmessage",l),function(e){t(e)&&o.postMessage(c,"*")}}}var f=o.document;if("onreadystatechange"in f.createElement("script")){return function(e){t(e)&&function(){var e=f.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,n()},(f.documentElement||f.body).appendChild(e)}()}}return function(e){t(e)&&setTimeout(n,0)}}(),s=function(e){i(function(){throw e})},a=function(e){return"function"==typeof e},u=function(e){return null!==e&&"object"==typeof e},c=Object.prototype.toString,l=Array.isArray||function(e){return"[object Array]"===c.call(e)},f=function(e){for(var t=[],n=0,r=e.length;n<r;)t.push(n++);return t},p=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},d=function(e,t){return function(n){e.call(this,n,t)}},h=o.PromiseRejectionEvent?function(e,t){new o.PromiseRejectionEvent("unhandledrejection",{promise:t,reason:e})}:"object"==typeof process&&process.emit?function(e,t){process.emit("unhandledRejection",e,t)}:function(){},v=function(){this._promise=new w};v.prototype={promise:function(){return this._promise},resolve:function(e){this._promise.isResolved()||this._promise._resolve(e)},reject:function(e){this._promise.isResolved()||(E.isPromise(e)?(e=e.then(function(e){var t=E.defer();return t.reject(e),t.promise()}),this._promise._resolve(e)):this._promise._reject(e))},notify:function(e){this._promise.isResolved()||this._promise._notify(e)}};var y=0,m=1,g=2,_=3,w=function(e){if(this._value=void 0,this._status=y,this._shouldEmitUnhandledRejection=!0,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],e){var t=this,n=e.length;try{e(function(e){t.isResolved()||t._resolve(e)},n>1?function(e){t.isResolved()||t._reject(e)}:void 0,n>2?function(e){t.isResolved()||t._notify(e)}:void 0)}catch(e){this._reject(e)}}};w.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==y},isFulfilled:function(){return this._status===g},isRejected:function(){return this._status===_},then:function(e,t,n,r){this._shouldEmitUnhandledRejection=!1;var o=new v;return this._addCallbacks(o,e,t,n,r),o.promise()},catch:function(e,t){return this.then(void 0,e,t)},fail:function(e,t){return this.then(void 0,e,t)},always:function(e,t){var n=this,r=function(){return e.call(this,n)};return this.then(r,r,t)},progress:function(e,t){return this.then(void 0,void 0,e,t)},spread:function(e,t,n){return this.then(function(t){return e.apply(this,t)},t,n)},done:function(e,t,n,r){this.then(e,t,n,r).fail(s)},delay:function(e){var t,n=this.then(function(n){var r=new v;return t=setTimeout(function(){r.resolve(n)},e),r.promise()});return n.always(function(){clearTimeout(t)}),n},timeout:function(e){var t=new v,n=setTimeout(function(){t.reject(new E.TimedOutError("timed out"))},e);return this.then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise().always(function(){clearTimeout(n)}),t.promise()},_vow:!0,_resolve:function(e){if(!(this._status>m))if(e!==this)if(this._status=m,e&&e._vow)e.isFulfilled()?this._fulfill(e.valueOf()):e.isRejected()?(e._shouldEmitUnhandledRejection=!1,this._reject(e.valueOf())):e.then(this._fulfill,this._reject,this._notify,this);else{if(u(e)||a(e)){var t;try{t=e.then}catch(e){return void this._reject(e)}if(a(t)){var n=this,r=!1;try{t.call(e,function(e){r||(r=!0,n._resolve(e))},function(e){r||(r=!0,n._reject(e))},function(e){n._notify(e)})}catch(e){r||this._reject(e)}return}}this._fulfill(e)}else this._reject(TypeError("Can't resolve promise with itself"))},_fulfill:function(e){this._status>m||(this._status=g,this._value=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},_reject:function(e){if(!(this._status>m)){if(this._status=_,this._value=e,this._callCallbacks(this._rejectedCallbacks,e),!this._rejectedCallbacks.length){var t=this;i(function(){t._shouldEmitUnhandledRejection&&h(e,t)})}this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0}},_notify:function(e){this._callCallbacks(this._progressCallbacks,e)},_addCallbacks:function(e,t,n,r,o){var i;n&&!a(n)?(o=n,n=void 0):r&&!a(r)&&(o=r,r=void 0),n&&(this._shouldEmitUnhandledRejection=!1),this.isRejected()||(i={defer:e,fn:a(t)?t:void 0,ctx:o},this.isFulfilled()?this._callCallbacks([i],this._value):this._fulfilledCallbacks.push(i)),this.isFulfilled()||(i={defer:e,fn:n,ctx:o},this.isRejected()?this._callCallbacks([i],this._value):this._rejectedCallbacks.push(i)),this._status<=m&&this._progressCallbacks.push({defer:e,fn:r,ctx:o})},_callCallbacks:function(e,t){var n=e.length;if(n){this.isResolved();var r=this.isFulfilled(),o=this.isRejected();i(function(){for(var i,s,a,u=0;u<n;)if(s=(i=e[u++]).defer,a=i.fn){var c,l=i.ctx;try{c=l?a.call(l,t):a(t)}catch(e){s.reject(e);continue}r||o?s.resolve(c):s.notify(c)}else r?s.resolve(t):o?s.reject(t):s.notify(t)})}}};var b={cast:function(e){return E.cast(e)},all:function(e){return E.all(e)},race:function(e){return E.anyResolved(e)},resolve:function(e){return E.resolve(e)},reject:function(e){return E.reject(e)}};for(var x in b)b.hasOwnProperty(x)&&(w[x]=b[x]);var E={Deferred:v,Promise:w,defer:function(){return new v},when:function(e,t,n,r,o){return E.cast(e).then(t,n,r,o)},fail:function(e,t,n){return E.when(e,void 0,t,n)},always:function(e,t,n){return E.when(e).always(t,n)},progress:function(e,t,n){return E.when(e).progress(t,n)},spread:function(e,t,n,r){return E.when(e).spread(t,n,r)},done:function(e,t,n,r,o){E.when(e).done(t,n,r,o)},isPromise:function(e){return u(e)&&a(e.then)},cast:function(e){return e&&e._vow?e:E.resolve(e)},valueOf:function(e){return e&&a(e.valueOf)?e.valueOf():e},isFulfilled:function(e){return!e||!a(e.isFulfilled)||e.isFulfilled()},isRejected:function(e){return!(!e||!a(e.isRejected))&&e.isRejected()},isResolved:function(e){return!e||!a(e.isResolved)||e.isResolved()},resolve:function(e){var t=E.defer();return t.resolve(e),t.promise()},fulfill:function(e){var t=E.defer(),n=t.promise();return t.resolve(e),n.isFulfilled()?n:n.then(null,function(e){return e})},reject:function(e){var t=E.defer();return t.reject(e),t.promise()},invoke:function(e,t){var n,r=Math.max(arguments.length-1,0);if(r){n=Array(r);for(var i=0;i<r;)n[i++]=arguments[i]}try{return E.resolve(n?e.apply(o,n):e.call(o))}catch(e){return E.reject(e)}},all:function(e){var t=new v,n=l(e),r=n?f(e):p(e),o=r.length,i=n?[]:{};if(!o)return t.resolve(i),t.promise();var s=o;return E._forEach(e,function(e,n){i[r[n]]=e,--s||t.resolve(i)},t.reject,t.notify,t,r),t.promise()},allResolved:function(e){var t=new v,n=l(e),r=n?f(e):p(e),o=r.length,i=n?[]:{};if(!o)return t.resolve(i),t.promise();var s=function(){--o||t.resolve(e)};return E._forEach(e,s,s,t.notify,t,r),t.promise()},allPatiently:function(e){return E.allResolved(e).then(function(){var t,n,r,o,i=l(e),s=i?f(e):p(e),a=s.length,u=0;if(!a)return i?[]:{};for(;u<a;)r=s[u++],o=e[r],E.isRejected(o)?(t||(t=i?[]:{}),i?t.push(o.valueOf()):t[r]=o.valueOf()):t||((n||(n=i?[]:{}))[r]=E.valueOf(o));if(t)throw t;return n})},any:function(e){var t=new v,n=e.length;if(!n)return t.reject(Error()),t.promise();var r,o=0;return E._forEach(e,t.resolve,function(e){o||(r=e),++o===n&&t.reject(r)},t.notify,t),t.promise()},anyResolved:function(e){var t=new v;return e.length?(E._forEach(e,t.resolve,t.reject,t.notify,t),t.promise()):(t.reject(Error()),t.promise())},delay:function(e,t){return E.resolve(e).delay(t)},timeout:function(e,t){return E.resolve(e).timeout(t)},_forEach:function(e,t,n,r,o,i){for(var s=i?i.length:e.length,a=0;a<s;)E.when(e[i?i[a]:a],d(t,a),n,r,o),++a},TimedOutError:function(e){var t=function(t){this.name=e,this.message=t};return t.prototype=new Error,t}("TimedOut")};"object"==typeof e&&"object"==typeof e.exports&&(e.exports=E),"object"==typeof modules&&a(modules.define)&&modules.define("vow",function(e){e(E)}),void 0===(r=function(e,t,n){n.exports=E}.call(t,n,t,e))||(e.exports=r),!1&&(o.vow=E)}("undefined"!=typeof window?window:global)}).call(window)},4467:function(e,t,n){var r;(function(){!function(o){var i=function(e){this._res=e,this._isFulfilled=!!arguments.length,this._isRejected=!1,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[]};i.prototype={valueOf:function(){return this._res},isFulfilled:function(){return this._isFulfilled},isRejected:function(){return this._isRejected},isResolved:function(){return this._isFulfilled||this._isRejected},fulfill:function(e){this.isResolved()||(this._isFulfilled=!0,this._res=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},reject:function(e){this.isResolved()||(this._isRejected=!0,this._res=e,this._callCallbacks(this._rejectedCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=void 0)},notify:function(e){this.isResolved()||this._callCallbacks(this._progressCallbacks,e)},then:function(e,t,n,r){t&&!c(t)?(r=t,t=void 0):n&&!c(n)&&(r=n,n=void 0);var o,s=new i;return this._isRejected||(o={promise:s,fn:c(e)?e:void 0,ctx:r},this._isFulfilled?this._callCallbacks([o],this._res):this._fulfilledCallbacks.push(o)),this._isFulfilled||(o={promise:s,fn:t,ctx:r},this._isRejected?this._callCallbacks([o],this._res):this._rejectedCallbacks.push(o)),this.isResolved()||this._progressCallbacks.push({promise:s,fn:n,ctx:r}),s},fail:function(e,t){return this.then(void 0,e,t)},always:function(e,t){var n=this,r=function(){return e.call(this,n)};return this.then(r,r,t)},progress:function(e,t){return this.then(void 0,void 0,e,t)},spread:function(e,t,n){return this.then(function(t){return e.apply(this,t)},t,n)},done:function(e,t,n,r){this.then(e,t,n,r).fail(u)},delay:function(e){var t,n=this.then(function(n){var r=new i;return t=setTimeout(function(){r.fulfill(n)},e),r});return n.always(function(){clearTimeout(t)}),n},timeout:function(e){var t=new i,n=setTimeout(function(){t.reject(Error("timed out"))},e);return t.sync(this),t.always(function(){clearTimeout(n)}),t},sync:function(e){e.then(this.fulfill,this.reject,this.notify,this)},_callCallbacks:function(e,t){var n=e.length;if(n){var r=this.isResolved(),o=this.isFulfilled();a(function(){for(var i,a,u,c=0;c<n;)if(a=(i=e[c++]).promise,u=i.fn){var l,f=i.ctx;try{l=f?u.call(f,t):u(t)}catch(e){a.reject(e);continue}r?s.isPromise(l)?function(e){l.then(function(t){e.fulfill(t)},function(t){e.reject(t)},function(t){e.notify(t)})}(a):a.fulfill(l):a.notify(l)}else r?o?a.fulfill(t):a.reject(t):a.notify(t)})}}};var s={Promise:i,promise:function(e){return arguments.length?s.isPromise(e)?e:new i(e):new i},when:function(e,t,n,r,o){return s.promise(e).then(t,n,r,o)},fail:function(e,t,n){return s.when(e,void 0,t,n)},always:function(e,t,n){return s.promise(e).always(t,n)},progress:function(e,t,n){return s.promise(e).progress(t,n)},spread:function(e,t,n,r){return s.promise(e).spread(t,n,r)},done:function(e,t,n,r,o){s.promise(e).done(t,n,r,o)},isPromise:function(e){return e&&c(e.then)},valueOf:function(e){return s.isPromise(e)?e.valueOf():e},isFulfilled:function(e){return!s.isPromise(e)||e.isFulfilled()},isRejected:function(e){return!!s.isPromise(e)&&e.isRejected()},isResolved:function(e){return!s.isPromise(e)||e.isResolved()},fulfill:function(e){return s.when(e,void 0,function(e){return e})},reject:function(e){return s.when(e,function(e){var t=new i;return t.reject(e),t})},resolve:function(e){return s.isPromise(e)?e:s.when(e)},invoke:function(e){try{return s.promise(e.apply(o,l.call(arguments,1)))}catch(e){return s.reject(e)}},forEach:function(e,t,n,r){for(var o=r?r.length:e.length,i=0;i<o;)s.when(e[r?r[i]:i],t,n),++i},all:function(e){var t=new i,n=p(e),r=n?d(e):h(e),o=r.length,a=n?[]:{};if(!o)return t.fulfill(a),t;var u=o;return s.forEach(e,function(){if(!--u){for(var n=0;n<o;)a[r[n]]=s.valueOf(e[r[n++]]);t.fulfill(a)}},function(e){t.reject(e)},r),t},allResolved:function(e){var t=new i,n=p(e),r=n?d(e):h(e),o=r.length,a=n?[]:{};if(!o)return t.fulfill(a),t;var u=function(){--o||t.fulfill(e)};return s.forEach(e,u,u,r),t},allPatiently:function(e){return s.allResolved(e).then(function(){var t,n,r,o,i=p(e),a=i?d(e):h(e),u=a.length,c=0;if(!u)return i?[]:{};for(;c<u;)r=a[c++],o=e[r],s.isRejected(o)?(t||(t=i?[]:{}),i?t.push(o.valueOf()):t[r]=o.valueOf()):t||((n||(n=i?[]:{}))[r]=s.valueOf(o));if(t)throw t;return n})},any:function(e){var t=new i,n=e.length;if(!n)return t.reject(Error()),t;var r,o=0;return s.forEach(e,function(e){t.fulfill(e)},function(e){o||(r=e),++o===n&&t.reject(r)}),t},delay:function(e,t){return s.promise(e).delay(t)},timeout:function(e,t){return s.promise(e).timeout(t)}},a=function(){var e=[],t=function(t){return 1===e.push(t)},n=function(){var t=e,n=0,r=e.length;for(e=[];n<r;)t[n++]()};if("function"==typeof setImmediate)return function(e){t(e)&&setImmediate(n)};if("object"==typeof process&&process.nextTick)return function(e){t(e)&&process.nextTick(n)};if(o.postMessage){var r=!0;if(o.attachEvent){var i=function(){r=!1};o.attachEvent("onmessage",i),o.postMessage("__checkAsync","*"),o.detachEvent("onmessage",i)}if(r){var s="__promise"+ +new Date,a=function(e){e.data===s&&(e.stopPropagation&&e.stopPropagation(),n())};return o.addEventListener?o.addEventListener("message",a,!0):o.attachEvent("onmessage",a),function(e){t(e)&&o.postMessage(s,"*")}}}var u=o.document;if("onreadystatechange"in u.createElement("script")){return function(e){t(e)&&function(){var e=u.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,n()},(u.documentElement||u.body).appendChild(e)}()}}return function(e){t(e)&&setTimeout(n,0)}}(),u=function(e){a(function(){throw e})},c=function(e){return"function"==typeof e},l=Array.prototype.slice,f=Object.prototype.toString,p=Array.isArray||function(e){return"[object Array]"===f.call(e)},d=function(e){for(var t=[],n=0,r=e.length;n<r;)t.push(n++);return t},h=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};e.exports=s,"object"==typeof modules&&modules.define("vow",function(e){e(s)}),void 0===(r=function(e,t,n){n.exports=s}.call(t,n,t,e))||(e.exports=r),!1&&(o.Vow=s)}(this)}).call(window)},4468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n.n(r);Vow.Promise.prototype.__reject=Vow.Promise.prototype.reject,Vow.Promise.prototype.reject=function(e){e instanceof Error&&ns.log.error({source:r.ErrorSource.PromiseException,method:"Vow.Promise.prototype.reject"},e),this.__reject(e)}},4469:function(e,t){var n={inherit:function(e,t,r){var o=function(){};o.prototype=t.prototype;var i=e.prototype=new o;if(r)if(Array.isArray(r))for(var s=0,a=r.length;s<a;s++)n.extend(i,r[s]);else n.extend(i,r);return i.super_=t.prototype,i.constructor=e,e},extend:function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e},nop:function(){},true:function(){return!0},false:function(){return!1},value:function(e){return function(){return e}},logger:function(e){return e?function(){var t=[].slice.call(arguments);console.log.apply(null,[e].concat(t))}:console.log},next:function(e){setTimeout(e,0)}};e.exports=n},447:function(e,t,n){var r=n(464)(Object.getPrototypeOf,Object);e.exports=r},4470:function(e,t){no.Parser=function(e,t){this._rules=e,this._tokens=t||{}},no.Parser.prototype.start=function(e,t){this.input=e,this.p=0,this.s=e;var n=this.parse(t);return this.s&&this.error("End of string expected"),n},no.Parser.prototype.parse=function(e,t){var n=this._rules[e],r=this.p,o=n.call(this,t);return o._start=r,o._end=this.p,o._input=this.input,o},no.Parser.prototype.test=function(e){var t=this._tokens[e];if(t){var n=t.exec(this.s);return n&&n[0]}if(this.la(e.length)===e)return e},no.Parser.prototype.match=function(e){var t=this.test(e);return t||this.error("Token "+e+" expected"),this.move(t.length),t},no.Parser.prototype.la=function(e){return this.s.substr(0,e||1)},no.Parser.prototype.move=function(e){e||(e=1),this.s=this.s.substr(e),this.p+=e},no.Parser.prototype.skip=function(){var e=/^\s+/.exec(this.s);e&&this.move(e[0].length)},no.Parser.prototype.error=function(e){throw Error(e+" at "+this.p+": "+this.s)}},4471:function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){function e(e){this.data=e}function t(t,n){if(n instanceof e)return r(n,t.scalar());for(var o=n.nodes,i=t.scalar(),s=0;s<o.length;s++)if(i==o[s].scalar())return!0;return!1}function r(t,n){var r=t.data;if(Array.isArray(r)){for(var o=0;o<r.length;o++)if(new e(r[o]).scalar()==n)return!0;return!1}return t.scalar()==n}function o(){this.nodes=[]}e.prototype.empty=new o,e.prototype.isEmpty=function(){return!1},e.prototype.nametest=function(t,n){var r=this.data;if(!r)return this.empty;if(Array.isArray(r)){n||(n=new o);for(var i=0;i<r.length;i++)new e(r[i]).nametest(t,n);return n}var s=r[t];if(void 0===s)return this.empty;var a=new e(s);return n?n.push(a):a},e.prototype.startest=function(t){t||(t=new o);var n=this.data;if(Array.isArray(n))for(var r=0;r<n.length;r++)new e(n[r]).startest(t);else for(var i in n)this.nametest(i,t);return t},e.prototype.pred=function(t,n,r,i){var s=this.data;if(Array.isArray(s)){for(var a=new o,u=0;u<s.length;u++){var c=new e(s[u]);t(c,n,r,i)&&a.push(c)}return a}return t(this,n,r,i)?this:this.empty},e.prototype.index=function(t,n,r,o){var i=this.data;if(Array.isArray(i)){var s=i[t(this,n,r,o)];return void 0!==s?new e(s).toNodeset():this.empty}return 0===t?this:this.empty},e.prototype.toArray=function(){return[this.data]},e.prototype.toNodeset=function(){return(new o).push(this)},e.prototype.scalar=function(){var e=this.data;return"object"===n(e)?"":e},e.prototype.boolean=function(){var e=this.data;return Array.isArray(e)?e.length>0:Boolean(e)},e.prototype.cmpN=function(n){var r=this.data;if(Array.isArray(r)){for(var o=0;o<r.length;o++)if(t(new e(r[o]),n))return!0;return!1}return t(this,n)},e.prototype.cmpS=function(e){return r(this,e)},o.prototype.empty=e.prototype.empty,o.prototype.isEmpty=function(){return!this.nodes.length},o.prototype.push=function(e){return this.nodes.push(e),this},o.prototype.nametest=function(e,t){var n=this.nodes;t||(t=new o);for(var r=0;r<n.length;r++)n[r].nametest(e,t);return t},o.prototype.startest=function(e){var t=this.nodes;e||(e=new o);for(var n=0;n<t.length;n++)t[n].startest(e);return e},o.prototype.pred=function(e,t,n,r){for(var i=this.nodes,s=new o,a=0;a<i.length;a++){var u=i[a];e(u,t,n,r)&&s.push(u)}return s},o.prototype.index=function(e){var t=this.nodes[e];return void 0!==t?(new o).push(t):this.empty},o.prototype.toArray=function(){for(var e=[],t=this.nodes,n=0;n<t.length;n++)e.push(t[n].data);return e},o.prototype.scalar=function(){var e=this.nodes;return e.length?e[0].scalar():""},o.prototype.boolean=function(){var e=this.nodes;return!!e.length&&e[0].boolean()},o.prototype.cmpN=function(e){for(var t=this.nodes,n=0,r=t.length;n<r;n++)if(t[n].cmpN(e))return!0;return!1},o.prototype.cmpS=function(e){for(var t=this.nodes,n=0,r=t.length;n<r;n++)if(t[n].cmpS(e))return!0;return!1},no.JNode=e,no.JNodeset=o;var i="scalar",s="nodeset",a="boolean",u={"*":6,"/":6,"%":6,"+":5,"-":5,"<=":4,">=":4,"<":4,">":4,"==":3,"!=":3,"&&":2,"||":1},c={SELF:/^\.(?![a-zA-Z_*.[])/,ROOT:/^\/(?![.[])/,BINOP:/^(?:\+|-|\*|\/|%|==|!=|<=|>=|<|>|&&|\|\|)/,UNOP:/^(?:\+|-|!)/,DIGIT:/^[0-9]/,ID:/^[a-zA-Z_][a-zA-Z0-9-_]*/,NUMBER:/^[0-9]+(?:\.[0-9]+)?/,CHARS:/^[^"{}\\]+/},l={expr:function(){var e,t=[],n=[this.parse("unary")];this.skip();for(var r=0;e=this.test("BINOP");){this.move(e.length),this.skip();var o=u[e];o<=r&&s(o),t.unshift(e),n.unshift(this.parse("unary")),this.skip(),r=o}return s(0),n[0];function s(e){for(var r,o,s;(r=t[0])&&u[r]>=e;)s=n.shift(),o=n.shift(),n.unshift({_id:"binop",_type:"+-*/%".indexOf(r)>-1?i:a,_local:o._local||s._local,op:t.shift(),left:o,right:s})}},unary:function(){var e;if(e=this.test("UNOP")){this.move();var t=this.parse("unary");return{_id:"unop",_type:"!"===e?a:i,_local:t._local,op:e,expr:t}}return this.parse("primary")},primary:function(){switch(this.la()){case'"':return this.parse("string");case".":case"/":return this.parse("jpath");case"(":return this.parse("subexpr")}if(this.test("DIGIT"))return{_id:"number",_type:i,value:this.match("NUMBER")};var e=this.match("ID");if(this.test("."))return{_id:"filter",_type:s,name:e,jpath:this.parse("jpath")};if(this.test("(")){this.move(),this.skip();var t=[];if(!this.test(")"))for(t.push(this.parse("expr")),this.skip();this.test(",");)this.move(),this.skip(),t.push(this.parse("expr")),this.skip();return this.match(")"),{_id:"func",_type:i,name:e,args:t}}return{_id:"var",_type:s,name:e}},subexpr:function(){this.move(),this.skip();var e=this.parse("expr");return this.skip(),this.match(")"),{_id:"subexpr",_type:e._type,_local:e._local,expr:e}},jpath:function(){if(this.test("SELF"))return this.move(),{_id:"self",_type:s,_local:!0};if(this.test("ROOT"))return this.move(),{_id:"root",_type:s};var e;this.test("/")&&(this.move(),e=!0);for(var t=[];;){var n=this.la();if("."===n)t.push(this.parse("step"));else{if("["!==n)break;var r=this.parse("pred");"guard"===r._id?t.unshift(r):t.push(r)}}return{_id:"jpath",_type:s,_local:!e,abs:e,steps:t}},step:function(){this.move();var e=this.la();return"["===e?this.parse("pred"):"*"===e?(this.move(),{_id:"star"}):{_id:"nametest",nametest:this.match("ID")}},pred:function(){this.move(),this.skip();var e=this.parse("expr");this.skip(),this.match("]");var t="index";return e._local?t="pred":e._type===a&&(t="guard"),{_id:t,expr:e}},string:function(){this.match('"');var e=this.parse("string_content");return this.match('"'),e}},f={"{{":"{","}}":"}",'\\"':'"',"\\\\":"\\"};l.string_content=function(){for(var e,t=[],n="";this.s;)if(e=f[this.la(2)])n+=e,this.move(2);else{if('"'===(e=this.la()))break;"\\"===e?(n+=e,this.move()):"{"===e?(r(),this.move(),this.skip(),t.push(this.parse("expr")),this.skip(),this.match("}")):n+=this.match("CHARS")}return r(),t.length||t.push(o("")),{_id:"string",_type:i,value:t};function r(){n&&(t.push(o(n)),n="")}function o(e){return{_id:"string_literal",_type:i,value:e}}};var p=new no.Parser(l,c),d={};function h(e,t){var n=e+"::"+t,r=d[n];return r||(r=d[n]=function(e){for(var t=[],n="jpath"===e._id?y(e,t):v(e,t),r="",o=0;o<=n;o++)r+="function t"+o+"(node, root, vars, funcs) {\n"+t[o]+"\n}\n\n";return r+="return function(data, vars, funcs) {\nvar node = new no.JNode(data);\nreturn t"+n+"(node, node, vars, funcs);\n}\n",Function("no",r)(no)}(p.start(e,t))),r}function v(e,t){var n="return ("+m(e,t)+");";return t.push(n)-1}function y(e,t){var n="";e.abs&&(n+="node = root;\n");for(var r=e.steps,o=0,s=r.length;o<s;o++){var u=r[o],c=u._id;switch(c){case"nametest":n+='node = node.nametest("'+u.nametest+'");\n';break;case"star":n+="node = node.startest();\n";break;case"pred":case"index":u.expr._as="pred"===c?a:i,n+="node = node."+c+"(t"+v(u.expr,t)+", root, vars, funcs);\n";break;case"guard":n+="if (!("+m(u.expr,t)+")) { return node.empty; }\n"}"guard"!==c&&(n+="if (node.isEmpty()) { return node.empty; }\n")}return n+="return node;",t.push(n)-1}function m(e,t){var n;switch(e._id){case"root":n="root";break;case"self":n="node";break;case"number":n=e.value;break;case"string_literal":n=JSON.stringify(e.value);break;case"string":n="("+e.value.map(function(e){return e._as=i,m(e,t)}).join(" + ")+")";break;case"var":n='(new no.JNode(vars["'+e.name+'"]))';break;case"func":n='funcs["'+e.name+'"](';for(var r=0,o=e.args.length;r<o;r++){var u=e.args[r];u._as=i,n+=r?",":"",n+=m(u,t)}n+=")";break;case"unop":e.expr._as="!"===e.op?a:i,n=e.op+"("+m(e.expr,t)+")";break;case"binop":o=e.left;var c,l=e.right,f=o._type,p=l._type,d=e.op;switch(d){case"&&":case"||":c=f===a&&p===a?a:i;break;case"==":case"!=":f===p||f!==a&&p!==a||(c=a);break;default:c=i}c&&(o._as=l._as=c);var h=m(o,t),v=m(l,t);if("=="===d||"!="===d){if(f===s||p===s){if(f===i){var g=v;v=h,h=g}n="("+h+").cmp"+(f===p?"N":"S")+"("+v+")"}n&&"!="===d&&(n="!("+n+")")}void 0===n&&(n="("+h+" "+e.op+" "+v+")");break;case"subexpr":n="("+m(e.expr,t)+")";break;case"jpath":n="t"+y(e,t)+"(node, root, vars, funcs)";break;case"filter":n="t"+y(e.jpath,t)+'(new no.JNode(vars["'+e.name+'"]), root, vars, funcs)'}return e._as&&e._as!==e._type&&(e._type===s?n="("+n+")."+e._as+"()":e._type===i&&(n="!!("+n+")")),n}no.jpath=function(e,t,n,r){return no.jpath.toScalar(no.jpath.expr(e)(t,n,r))},no.jpath.raw=function(e,t,n,r){return no.jpath.expr(e)(t,n,r)},no.jpath.scalar=function(e){var t=no.jpath.expr(e);return function(e,n,r){return no.jpath.toScalar(t(e,n,r))}},no.jpath.boolean=function(e){var t=no.jpath.expr(e);return function(e,n,r){return no.jpath.toBoolean(t(e,n,r))}},no.jpath.string=function(e){return h(e,"string_content")},no.jpath.expr=function(e){var t=n(e);return"string"===t?h(e,"expr"):e&&"object"===t?Array.isArray(e)?function(e){for(var t=[],n=e.length,r=0;r<n;r++)t.push(no.jpath.expr(e[r]));return function(e,r,o){for(var i=[],s=0;s<n;s++)i.push(no.jpath.toScalar(t[s](e,r,o)));return i}}(e):function(e){var t={};for(var n in e)t[n]=no.jpath.expr(e[n]);return function(e,n,r){var o={};for(var i in t)o[i]=no.jpath.toScalar(t[i](e,n,r));return o}}(e):function(){return e}},no.jpath.toScalar=function(t){return t instanceof e?t.data:t instanceof o?t.isEmpty()?void 0:t.toArray():t},no.jpath.toBoolean=function(t){return t instanceof e||t instanceof o?t.boolean():t};var g={};no.jpath.set=function(e,t,n){return(g[e]||(g[e]=function(e){for(var t=e.split("."),n=1,r=t.length-1,o="var r = data; var t;";n<r;n++)o+='t = r["'+t[n]+'"];',o+='if (t == null) { t = r["'+t[n]+'"] = {}; }',o+="r = t;";return o+='r["'+t[n]+'"] = value;',o+="return data;",new Function("data","value",o)}(e)))(t,n)}}()},4472:function(e,t,n){var r=n(81).isNewRouterEnabled,o=n(337),i=o.hasFeature,s=o.Features,a={todo:function(){throw new Error("Unimplemented")},parseQuery:function(e){var t={};return e.split("&").forEach(function(n){var r=n.split("="),o=r.shift();if(o){var i=r.join("=");if(void 0===i)i="";else try{i=decodeURIComponent(i)}catch(t){i="",a.log.info("ns.parseQuery.invalid-param",{query:e,chunk:n})}o in t?(Array.isArray(t[o])||(t[o]=[t[o]]),t[o].push(i)):t[o]=i}}),t},renderString:function(e,t,n){return yr.run(n||"main",e,t)},renderNode:function(e,t,n){var r=a.html2node(a.renderString(e,t,n));return r?r.firstChild:null},init:function(){if(i(s.WEB_NO_NS_ACTIONS)||a.action.init(),!r()){var e=window.location.hash;e.startsWith("#/")&&(window.location.hash="#".concat(e.slice(2))),a.router.init(),a.history.init()}a.initMainView()},initMainView:function(){var e=a.View.create("app");e._setNode(document.getElementById("js-mail-app")),e.invalidate(),a.MAIN_VIEW=e},assert:function(e,t,n){e||a.assert.fail.apply(this,Array.prototype.slice.call(arguments,1))}};a.assert.fail=function(e,t){for(var n=Array.prototype.slice.call(arguments,2),r=0;r<n.length;r++)t=t.replace("%s",n[r]);throw new Error("["+e+"] "+t)},a.key=function(e,t){return t=t||{},e+Object.keys(t).sort().map(function(e){return"&".concat(e,"=").concat(encodeURIComponent(t[e]))}).join("")},a.params2query=function(e){var t,n,r=[],o=Object.keys(e).sort(),i=!0,s=!1,a=void 0;try{for(var u,c=o[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)if(n=e[t=u.value],Array.isArray(n))for(var l=0;l<n.length;l++)r.push(encodeURIComponent(t)+"="+encodeURIComponent(n[l]));else r.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}catch(e){s=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(s)throw a}}return r.join("&")},a.reset=function(){a.action&&a.action._reset(),a.router._reset(),a.layout._reset(),a.Model._reset(),a.View._reset(),a.request._reset(),a.page._reset(),a.page.history.reset(),a.MAIN_VIEW=null},e.exports=a},4473:function(e,t){ns.VERSION="0.8.15"},4474:function(e,t){ns.L={},ns.L.VIEW="view",ns.L.ASYNC="async",ns.L.BOX="box",ns.V={},ns.V.STATUS={NONE:"none",LOADING:"loading",OK:"ok",INVALID:"invalid"},ns.M={},ns.M.STATUS={ERROR:"error",INITED:"inited",NONE:"none",OK:"ok",INVALID:"invalid"},ns.R={NOT_APP_URL:"ns-router-not-app",NOT_FOUND:"not-found",REDIRECT:"ns-router-redirect",NEW_PAGE:"new-page"},ns.U={},ns.U.STATUS={MODELS:"models",EXPIRED:"expired"},ns.U.EXEC={GLOBAL:"global",ASYNC:"async",PARALLEL:"parallel"},ns.DEBUG=!1,ns.H={DEFAULTS:{dataType:"json",type:"POST"}}},4475:function(e,t){ns.V.EVENTS={click:"click",dblclick:"dblclick",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"},ns.V.DOM_EVENTS=["blur","change","input","click","dblclick","dragstart","dragenter","dragover","dragleave","drag","drop","dragend","focus","focusin","focusout","keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","resize","scroll","submit","onSave","b-mail-dropdown-open","message","dragndrop.drop","result","wheel","DOMNodeRemoved","DOMNodeInserted","DOMNodeInsertedIntoDocument","DOMNodeRemovedFromDocument"],ns.V.NS_EVENTS=["ns-view-async","ns-view-destroyed","ns-view-init","ns-view-htmlinit","ns-view-show","ns-view-touch","ns-view-hide","ns-view-htmldestroy"]},4476:function(e,t){ns.IS_TOUCH="boolean"==typeof window.NS_IS_TOUCH?window.NS_IS_TOUCH:Boolean("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),ns.IS_TOUCH&&(ns.V.DOM_EVENTS.push("swipe","swipeleft","swiperight","tap","touchstart","touchmove","touchend"),ns.V.EVENTS={click:"tap",dblclick:"doubletap",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"})},4477:function(e,t){!function(e){e.replaceNode=function(e,t){return e===t||!!e.parentNode&&(e.parentNode.replaceChild(t,e),!0)},e.removeNode=function(e){var t=e.parentNode;t&&t.removeChild(e)},e.html2node=function(t){if(!t)return null;var n=document.createElement("div");n.innerHTML=t;for(var r=n.getElementsByTagName("x-a"),o=r.length-1;o>=0;o--){var i=r[o],s=e.renameNode(i,"a");i.parentNode.replaceChild(s,i)}return n},e.renameNode=function(e,t){var n,r,o=document.createElement(t),i=e.attributes;for(n=0,r=i.length;n<r;n++){var s=i[n];o.setAttribute(s.name,s.value)}for(;e.firstChild;)o.appendChild(e.firstChild);return o},e.childrenIterator=function(e){return function(e){var t=-1;return{getNext:function(){return e[++t]||null}}}(e.children)};var t=/[\t\r\n]/g;"undefined"!=typeof document&&document.createElement("div").classList?e.hasClass=function(e,t){return e.classList.contains(t)}:e.hasClass=function(e,n){return n=" "+n+" ",1===e.nodeType&&(" "+e.className+" ").replace(t," ").indexOf(n)>=0},"undefined"!=typeof document&&document.getElementsByClassName?e.byClass=function(e,t){return(t=t||document).getElementsByClassName(e)}:e.byClass=function(e,t){return t=t||document,$(t).find("."+e)}}(ns)},4478:function(e,t){!function(e){var t=/[&<>"'\/]/g,n=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return function(t){return e[t]}}();e.entityify=function(e){return String(e).replace(t,n)};var r=/&([^&;]+);/g,o=function(){var e={amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x2F":"/"};return function(t,n){return e[n]||t}}();e.deentityify=function(e){return String(e).replace(r,o)}}(ns)},4479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n.n(r);ns.Events={},ns.Events.on=function(e,t){var n=this._nsevents_handlers||(this._nsevents_handlers={});return ns.assert("function"==typeof t,"ns.Events",'Handler for event "%s" in not a function.',e),(n[e]||(n[e]=[])).push(t),this},ns.Events.once=function(e,t){var n=this,r=function r(){n.off(e,r),t.apply(this,arguments)};return r.__original=t,this.on(e,r),this},ns.Events.off=function(e,t){var n;if(t){if(n=this._nsevents_handlers&&this._nsevents_handlers[e])for(var r=0,o=n.length;r<o;r++)if(n[r]===t||n[r].__original===t){n.splice(r,1);break}}else(n=this._nsevents_handlers)&&(n[e]=null);return this},ns.Events.trigger=function(e,t){var n=this._nsevents_handlers&&this._nsevents_handlers[e];if(n)for(var o=0,i=(n=n.slice()).length;o<i;o++)try{n[o].apply(this,arguments)}catch(t){ns.log.exception("ns.events",t,{name:e}),ns.log.error({sourceMethod:r.ErrorSourceMethod.NsEvent,method:"ns.Events.trigger",name:e},t)}return this},ns.Events.atrigger=function(e,t){var n=this,r=arguments;no.next(function(){n.trigger.apply(n,r)})},ns.Events.forward=function(e,t){return this.on(e,function(e,n){t.trigger(e,n)})},ns.events=no.extend({},ns.Events)},448:function(e,t,n){var r=n(344),o=n(389),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||s.test(e)||!i.test(e)||null!=t&&e in Object(t)}},4480:function(e,t){!function(){ns.history={},ns.history.init=function(){window.addEventListener("hashchange",ns.history.onpopstate,!1),ns.events.on("router.search-changed",ns.history.onSearchChanged)},ns.history.pushState=function(e,t){ns.page._forceHashChange=e,window.location.href=e},ns.history.replaceState=function(e,t){ns.page._forceHashChange=e,window.location.replace(e)},ns.history.onSearchChanged=function(){var e=ns.page.getCurrentUrl();ns.page.go(e)},ns.history.onpopstate=function(){var e,t=ns.page.getCurrentUrl(),n=ns.page._forceHashChange,r=Boolean(Daria.getUrlParams().ns_trigger),o=n&&n==t;try{e=decodeURIComponent(n)}catch(e){}var i=o||e&&e==t;if(r){var s=$.url(void 0);s.removeParams(["ns_trigger"]),window.history.replaceState({},"",s)}if(i&&!r)return!1;ns.page.go(t)},ns.history.followAnchorHref=function(e,t){return ns.page.go(e)},ns.history._onAnchorClick=function(e){var t=e.currentTarget;if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return!0;if(t.protocol&&!/^https?:/.test(t.protocol))return!0;if(t.hostname&&t.hostname!==window.location.hostname)return!0;if(ns.router.baseDir){var n=t.pathname,r=ns.router.baseDir;if(n.substr(0,r.length)!==r)return!0}var o=t.getAttribute("href");if(!o||t.getAttribute("target"))return!0;var i=ns.history.followAnchorHref(o,t);return Vow.isPromise(i)?(e.preventDefault(),!0):void 0}}()},4481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(n.n(r),n(86)),i=0;ns.http=function(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(n=no.extend({},ns.H.DEFAULTS,n)).url=e,n.data=t,n.traditional=!0;var a=new Date,u=new Vow.Promise,c=Date.now();return $.ajax(n).done(function(e,t,r){i=0;var s=new Date,c=r.getResponseHeader("X-Request-Id"),l=r.getResponseHeader("X-Trace-Id"),f=s.valueOf()-a.valueOf();Object(o.addHttpRequestToDebugData)({url:n.url,method:n.method,params:n.data,startTime:a.toISOString(),endTime:s.toISOString(),durationMS:f,requestId:c,tracingId:l,response:e}),Object(o.tracingAddProvider)().then(function(e){return(0,e.tracingAdd)({path:n.url,startTime:a,endTime:s,durationMS:f,requestId:c,tracingId:l})}),!e.xTraceId&&l&&(e.xTraceId=l),u.fulfill(e)}).fail(function(t,o,a){if(!s){if(0===t.status){var l;i+=1;try{l=JSON.parse(n.data).models}catch(e){l=void 0}i<1e3&&Jane.ErrorLog.log({type:r.ErrorType.Noscript,message:r.ErrorMessage.ClientNetworkError,block:r.ErrorBlock.HttpClient,method:"ns.http",source:r.ErrorSource.Network,sourceMethod:r.ErrorSourceMethod.NsHttp,additional:{status:t.status,statusText:t.statusText,customMessage:a,executionTimeMs:Date.now()-c,url:e,xRequestId:t.getResponseHeader("X-Request-Id"),xTraceId:t.getResponseHeader("X-Trace-Id"),countContinuousFailures:i,models:l,wasDiscardedDocument:document.wasDiscarded,visibilityStateDocument:document.visibilityState,documentHasFocus:document.hasFocus()}})}else Jane.ErrorLog.log({type:r.ErrorType.Noscript,message:r.ErrorMessage.HttpError,block:r.ErrorBlock.HttpClient,method:"ns.http",source:r.ErrorSource.Network,sourceMethod:r.ErrorSourceMethod.NsHttp,additional:{status:t.status,statusText:t.statusText,customMessage:a,executionTimeMs:Date.now()-c,url:e,xRequestId:t.getResponseHeader("X-Request-Id"),xTraceId:t.getResponseHeader("X-Trace-Id")}});var f=a||o||"unknown error";u.reject({error:f,xhr:t})}}),u}},4482:function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}ns.object={},ns.object.clone=function(e){if(e&&"object"===n(e)){var t;if(Array.isArray(e)){t=[];for(var r=0;r<e.length;r++)t.push(ns.object.clone(e[r]))}else for(var o in t={},e)t[o]=ns.object.clone(e[o]);return t}return e},ns.object.isEmpty=function(e){for(var t in e)return!1;return!0}},4483:function(e,t){ns.profile={},ns.profile.startTimer=function(e){this._profileTimes||(this._profileTimes={}),ns.assert(!this._profileTimes[e],"ns.profile","Timer '%s' is in use",e),this._profileTimes[e]=Date.now()},ns.profile.stopTimer=function(e){return this._profileTimes||(this._profileTimes={}),ns.assert(this._profileTimes[e],"ns.profile","Timer '%s' haven't been started",e),this._profileTimes[e]=Date.now()-this._profileTimes[e],this._profileTimes[e]},ns.profile.switchTimer=function(e,t){this.stopTimer(e),this.startTimer(t)},ns.profile.getTimer=function(e){this._profileTimes||(this._profileTimes={});var t=this._profileTimes[e];return"number"==typeof t?t:NaN},ns.profile.getTimers=function(){return no.extend({},this._profileTimes)}},4484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n.n(r);!function(e,t){e.action={};var n={},o=!1;e.action.define=function(e,t){if(e in n)throw new Error("[ns.action] Can't redefine '"+e+"'");n[e]=t},e.action.copy=function(e,t){if(t in n)throw new Error("[ns.action] Can't redefine '"+t+"'");if(!(e in n))throw new Error("[ns.action] '"+e+"' is not defined");n[t]=n[e]},e.action.run=function(t,o,i,s){if((o=o||{}).counter){var a=o.counter.split(":");a&&a.length&&Jane.c(a[0],a[1])}o.mcounter&&(Jane.c(o.mcounter.split(":")),o.mcounter=null);["archive","delete","forward","ignore","infolder","label","mark","move","sendon","stop-waitforreply","reply","reply-all","reply-tmpl","unlabel","unmark"].indexOf(t)>-1&&!o.doNotCloseDropdown&&$(document).trigger("b-mail-dropdown-closeall");var u=n[t];e.assert(u,"ns.action","%s is not defined",t);try{return u(t,o,i,s)}catch(n){e.log.exception("ns.action",n),e.log.error({sourceMethod:r.ErrorSourceMethod.NsAction,method:"ns.action.run",name:t},n)}},e.action.init=function(){if(!o){o=!0;var t=$("body");t.on("submit",".daria-form",function(t){var n=t.currentTarget,r=!0,o=$(n),i=n.getAttribute("data-click-action");return i&&!o.prop("disabled")&&(r=e.action.run(i,e.action.getParams(n),n,t)),void 0!==r&&r}),t.on("click",".daria-action",function(t){var n=t.currentTarget,r=!0,o=$(n),i=n.getAttribute("data-action")||n.getAttribute("action");return i&&!o.prop("disabled")&&(r=e.action.run(i,e.action.getParams(n),n,t)),void 0!==r&&r}),["error","load"].forEach(function(t){document.addEventListener(t,function(n){var r=n.target,o=r&&r.classList;if(o&&-1!==Array.prototype.indexOf.call(o,"ns-action")){var i=r.getAttribute("data-"+t+"-action");i&&n.type===t&&e.action.run(i,e.action.getParams(r),r,n)}},!0)});var n=[e.V.EVENTS.click,e.V.EVENTS.dblclick].join(" ");t.on(n,".ns-action",this._process)}},e.action._process=function(t){if(t.isPropagationStopped())return!1;var n=t.currentTarget,r="dblclick"===t.type?n.getAttribute("data-dblclick-action"):n.getAttribute("data-click-action"),o=!0;return r&&(o=e.action.run(r,e.action.getParams(n),n,t)),void 0!==o&&!Vow.isPromise(o)&&o},e.action._reset=function(){n={}},e.action.getParams=function(t){var n=t.getAttribute("data-params")||t.getAttribute("params"),r=t.getAttribute("href");if(n){if(!n||"{"!==n.charAt(0))return e.parseQuery(n||"");try{return JSON.parse(n)}catch(e){}}else if(r)return(e.router(r)||{}).params;return{}}}(ns)},4485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n.n(r);function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(1472),s=n(4486),a=n(27).default;!function(){ns.Model=function(){},no.extend(ns.Model.prototype,ns.Events);var e={},t={},n={},u=0;ns.Model.prototype.STATUS=ns.M.STATUS,ns.Model.prototype.RETRY_LIMIT=3,ns.Model.prototype.status=ns.M.STATUS.NONE,ns.Model.prototype.key=null,ns.Model.prototype.params=null,ns.Model.prototype._errorFixingPromise=null,ns.Model.prototype._init=function(e,t){this.id=e,this._reset(),this.info=ns.Model.info(e),no.extend(this,ns.Model.getKeyAndParams(e,t,this.info)),this._reinit()},ns.Model.prototype._reinit=function(){this.status===this.STATUS.NONE&&(this._bindEvents(),this.status=this.STATUS.INITED,this.trigger("ns-model-init"),this._extractPrefetch())},ns.Model.prototype._extractPrefetch=function(){var e=a.extract(this.id,this.params);e&&ns.request.extractModel(this,e)},ns.Model.prototype._reset=function(e){this.data=null,this.error=null,this._softReset(e),this._version=0},ns.Model.prototype._softReset=function(e){this.status=e||this.STATUS.NONE,this.retries=0},ns.Model.prototype._bindEvents=function(){for(var e in this.info.events){var t=this.info.events[e];Array.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++)this.on(e,this._prepareCallback(t[n]))}},ns.Model.prototype._unbindEvents=function(){for(var e in this.info.events){var t=this.info.events[e];Array.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++)this.off(e,this._prepareCallback(t[n]))}},ns.Model.prototype._prepareCallback=function(e){return"string"==typeof e&&(e=this[e]),ns.assert("function"==typeof e,"ns.Model","Can't find method '%s' in '%s' to bind event",e,this.id),e},ns.Model.prototype.invalidate=function(){this._softReset(this.STATUS.INVALID),this.trigger("ns-model-invalidated")},ns.Model.prototype.destroy=function(){this.trigger("ns-model-before-destroyed"),this._reset(this.STATUS.NONE),this.trigger("ns-model-destroyed"),this._unbindEvents()},ns.Model.prototype.isValid=function(){return this.status===this.STATUS.OK},ns.Model.prototype.getData=function(){return this.data},ns.Model.prototype.get=function(e){var t=this.data;if(t)return no.jpath(e,t)},ns.Model.prototype.select=function(e){var t=this.data;return t?no.jpath.raw(e,t).toArray():[]},ns.Model.prototype.set=function(e,t,n){var r=this.data;if(this.isValid()&&r){var o=i(this.get(e));no.jpath.set(e,r,t),(n=n||{}).jpath=e,this.touch(n),n.silent||this.triggerChangedEvent(e,n.data,o)}},ns.Model.prototype.triggerChangedEvent=function(e,t,n){t=t||{};for(var r=e.split("."),o=r.length;o>1;){var i=r.slice(0,o).join(".");this.trigger("ns-model-changed"+i,i,e,t,n),o--}},ns.Model.prototype.setIfChanged=function(e,t,n){n=n||{};var r=this.get(e),o=!1;return s(r,t)&&!n.force||(this.set.apply(this,arguments),o=!0),o},ns.Model.prototype.inNotInitedState=function(){return this.status===this.STATUS.NONE},ns.Model.prototype.setData=function(e,t){return this._reinit(),!e||this.isValid()&&!this.hasDataChanged(e)||(this.data=this._beforeSetData(this.preprocessData(e),t),this.status=this.STATUS.OK,this.error=null,this.touch(t)),this},ns.Model.prototype.hasDataChanged=function(e){return Boolean(e)},ns.Model.prototype.getError=function(){return this.error},ns.Model.prototype.setError=function(e,t){if(this.isErrorCanBeFixed(e)?this._errorFixingPromise=this.fixError(e):(this.data=null,this.error=e,this.status=this.STATUS.ERROR),this.status===this.STATUS.ERROR){if(this.trigger("ns-model-error"),e&&"NO_DATA"===e.id)return;var n={name:this.id,key:t||this.key,xRequestId:this.xRequestId,xTraceId:this.xTraceId};"object"===o(e)?Object.assign(n,e):n.message=e,Jane.ErrorLog.log({type:r.ErrorType.Noscript,message:"Model handler error: ".concat(this.id),status:e.code,block:r.ErrorBlock.NsModel,source:r.ErrorSource.Request,sourceMethod:this.id,additional:n})}},ns.Model.prototype.isErrorCanBeFixed=function(e){return"account-information"!==this.id&&"ckey"===e},ns.Model.prototype.fixError=function(){return ns.forcedRequest(["account-information"])},ns.Model.prototype._beforeSetData=function(e,t){return e},ns.Model.prototype.preprocessData=function(e){return e},ns.Model.prototype.getRequestParams=function(){return ns.Model._getKeyParams(this.id,this.params,this.info)},ns.Model.prototype._canRequest=function(){return this.canRequest()&&(!this.retries||!this.isDo())&&this.retries<this.RETRY_LIMIT},ns.Model.prototype.canRequest=no.true,ns.Model.prototype.extractData=function(e){if(e)return e.data},ns.Model.prototype.extractError=function(e){if(e)return e.error},ns.Model.prototype.isDo=function(){return this.info.isDo},ns.Model.prototype.getVersion=function(){return this._version},ns.Model.prototype._incVersion=function(){this._version++},ns.Model.prototype.touch=function(e){if(!(e=e||{}).silent){this._incVersion(),this.trigger("ns-model-touched");var t=e.jpath||"";this.trigger("ns-model-changed",t)}},ns.Model.prototype.prepareRequest=function(e){return this.requestID=e,this.retries++,this.promise=new Vow.Promise,this},ns.Model.prototype.finishRequest=function(){this._errorFixingPromise?this._errorFixingPromise.then(this.__finishRequest,this.__finishRequest,this):this.__finishRequest()},ns.Model.prototype.__finishRequest=function(){this._errorFixingPromise&&(this._errorFixingPromise=null,this.retries=0),this.promise&&this.promise.fulfill()},ns.Model.prototype.destroyWith=function(e){ns.Model.destroyWith(this,e)},ns.Model.get=function(t,r){var o=this._find(t,r);o||((o=new(0,e[t]))._init(t,r),o.isDo()||(n[t][o.key]=o));return o._reinit(),o},ns.Model.getValid=function(e,t){var n=this._find(e,t);return n&&n.isValid()?n:null},ns.Model._find=function(e,r){ns.assert(e in t,"ns.Model","'%s' is not defined",e);var o=ns.Model.key(e,r);return n[e][o]||null},ns.Model.destroy=function(e){if(!e.isDo()){var t=e.id,r=e.key;n[t][r]&&(e.destroy(),delete n[t][r])}},ns.Model.destroyAll=function(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){ns.Model.isDefined(e)&&ns.Model.traverse(e,ns.Model.destroy)})},ns.Model.isValid=function(e,t){return Boolean(ns.Model.getValid(e,t))},ns.Model.define=function(r,o,i){ns.assert(!(r in t),"ns.Model","Can't redefine '%s'",r),void 0===(o=o||{}).isCollection&&(o.isCollection=Boolean(o.split));var s=i;"string"==typeof i?(s=e[i],ns.assert(s,"ns.Model","Can't find '%s' to extend '%s'",i,r)):i||(s=o.uniq?ns.ModelUniq:o.isCollection?ns.ModelCollection:ns.Model);var a=o.ctor||function(){};return a=no.inherit(a,s,o.methods),o.ready=!1,t[r]=o,e[r]=a,n[r]={},ns.events.trigger("ns-model-defined:"+r),a},ns.Model.isDefined=function(e){var t=!1;try{ns.Model.infoLite(e)&&(t=!0)}catch(e){}return t},ns.Model._reset=function(){n={},e={},t={}},ns.Model._clear=function(){for(var e in t)n[e]={}},ns.Model.info=function(e){var t=ns.Model.infoLite(e);return t.ready||(t.params=t.params||{},t.events=t.events||{},t.isDo=/^do-/.test(e),t.ready=!0),t},ns.Model.infoLite=function(e){var n=t[e];return ns.assert(n,"ns.Model","'%s' is not defined",e),n},ns.Model.key=function(e,t,n){return ns.Model.getKeyAndParams(e,t,n).key},ns.Model.getKeyAndParams=function(e,t,n){if((n=n||ns.Model.info(e)).isDo)return{key:"do-"+e+"-"+u++,params:t};var r="model="+e,o=ns.Model._getKeyParams(e,t,n);return{key:ns.key(r,o),params:o}},ns.Model._getKeyParams=function(e,t,n){if(t=t||{},"function"==typeof(n=n||ns.Model.info(e)).params)return n.params(t);for(var r=n.params,o=n.pNames||(n.pNames=Object.keys(n.params)),i={},s=0,a=o.length;s<a;s++){var u=o[s],c=t[u],l=r[u];(n.isStrictParams?void 0!==c:null!=c)?i[u]=c:null!=l&&(i[u]=l)}return"function"==typeof n.paramsRewrite&&(i=n.paramsRewrite(i)),i},ns.Model.invalidate=function(e,t){t=t||function(){return!0};var r=n[e];for(var o in r){var i=r[o];t(i)&&i.invalidate()}},ns.Model.invalidateAll=function(e){Array.isArray(e)||(e=[e]),e.forEach(function(e){ns.Model.isDefined(e)&&ns.Model.invalidate(e)})},ns.Model.destroyWith=function(e,t){Array.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++){var o=t[n];ns.assert(o instanceof ns.Model,"ns.Model","destroyWith called for '%s' while one of the withModels is not instance of ns.Model",e.id),o.on("ns-model-destroyed",function(){ns.Model.destroy(e)})}},ns.Model.isCollection=function(e){return(e.info||ns.Model.infoLite(e.id)).isCollection},ns.Model.traverse=function(e,t){ns.Model.infoLite(e),ns.assert("function"==typeof t,"ns.Model.traverse","callback must be a function");var r=n[e];for(var o in r)t(r[o])},ns.Model.collectErrorData=function(e){var t={models:""};return e.forEach(function(e,n){t.models+=t.models?", "+e.id:e.id,t["model."+n]=e.id,t["key."+n]=e.key,t["error."+n]=e.getError(),t["status."+n]=e.status}),t}}()},4486:function(e,t,n){var r=n(547);e.exports=function(e,t){return r(e,t)}},4487:function(e,t){ns.ModelArmour=function(){},no.inherit(ns.ModelArmour,ns.Model),ns.ModelArmour.prototype._extractData=ns.Model.prototype.extractData,ns.ModelArmour.prototype.extractData=function(e){return this._extractData(e)||{}}},4488:function(e,t){ns.ModelStatic=function(){},no.inherit(ns.ModelStatic,ns.Model),ns.ModelStatic.prototype.canRequest=no.False,ns.ModelStatic.prototype.destroy=function(){ns.Model.prototype.destroy.apply(this),this._reinit()},ns.ModelStatic.prototype.invalidate=function(){this.destroy()}},4489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4490),o=n.n(r),i=n(1068),s=n.n(i),a=n(4492),u=n.n(a),c=n(749),l=(n.n(c),n(1474)),f=n.n(l),p=n(414),d=n.n(p),h=n(4498),v=n.n(h),y=n(2),m=(n.n(y),/^#\s([^#]+)$/),g=/^([^\s>*!]+) > ([^\s>*!]+)$/;ns.ModelFsm=function(){},no.inherit(ns.ModelFsm,ns.Model),ns.ModelFsm.prototype._init=function(){this._transitionEvents={},this._inTransition=!1,this._isSwitchOn=!0,ns.Model.prototype._init.apply(this,arguments)},ns.ModelFsm.prototype.log=function(){var e=u()(arguments);e=["[ns.ModelFsm] id:",this.id].concat(e),ns.log.debug.apply(ns.log,e)},ns.ModelFsm.prototype.request=function(){var e=this.start;return ns.assert(!f()(e),"ns.ModelFsm.onInit","'start' state is required param of FSM"),d()(e)&&(e=this.start()),this.setInitialState(e),vow.Promise.resolve()},ns.ModelFsm.prototype.setInitialState=function(e){this.setData({state:e})},ns.ModelFsm.prototype.setState=function(e,t){var n=this.get(".state"),r=this._checkTransitionToState(e)?vow.resolve():vow.reject(new Error("fsm setState: change state not available")),o={from:n,to:e,data:t};return r.then(function(){this.log("Transition from",n,"to",e,"is started"),this.trigger(n+" > "+e,o)}.bind(this),function(t){this.log("Can't do transition from",n,"to",e),this.log("Current state is",n),Jane.ErrorLog.log({message:"FSM transition failed",type:y.ErrorType.Noscript,source:y.ErrorSource.Logic,sourceMethod:y.ErrorSourceMethod.NsModelFSM,block:y.ErrorBlock.Noscript,method:"ns.ModelFsm.prototype.setState",name:this.id,fromState:n,toState:e,inTransition:this._inTransition,isSwitchOn:this._isSwitchOn},t)}.bind(this)),r},ns.ModelFsm.prototype._checkTransitionToState=function(e){var t=this.get(".state"),n=this.transitions["*"],r=this.transitions[t];return!(this._inTransition||!this._isSwitchOn)&&(e!==t&&(!(!n||!s()(n,e))||!(!s()(r,e)&&!s()(r,"*"))))},ns.ModelFsm.prototype.getState=function(){return this.get(".state")},ns.ModelFsm.prototype.isCurrentState=function(e){return e=$.makeArray(e),s()(e,this.get(".state"))},ns.ModelFsm.prototype._applyState=function(e,t){this.log("Apply state:",e," EventData:",t),this.set(".state",e),this.trigger("# "+e,t),this.trigger("# *",t)},ns.ModelFsm.prototype.transitionEventHandler=function(e,t){var n=this._transitionEvents[e].handlers;if("* > *"!==e){var r=this._transitionEvents["* > *"];r&&(n=n.concat(r.handlers))}var i=[];this._inTransition=!0,o()(n,function(n){i.push(n(e,t))}),this._transitionDeferred=new vow.Deferred,this._transitionDeferred.promise().then(this._transitionSuccess.bind(this,t),this._transitionError.bind(this,t)),vow.all(i).then(this._transitionDeferred.resolve.bind(this._transitionDeferred),this._transitionDeferred.reject.bind(this._transitionDeferred))},ns.ModelFsm.prototype._transitionSuccess=function(e){this._inTransition=!1,this.log("Transition from",e.from,"to",e.to,"is success"),this._applyState(e.to,e)},ns.ModelFsm.prototype._transitionError=function(e,t){this._inTransition=!1,e.error=t,this.log("Transition from",e.from,"to",e.to,"failed. Error:",t),this.log("Current state is",e.from),this.trigger(e.from+" !> "+e.to,e),this.trigger("* !> *",e)},ns.ModelFsm.prototype.on=function(e,t){if("transition"===this.getEventData(e).type){var n=this._transitionEvents[e];n||(n=this._transitionEvents[e]={name:e,handlers:[],callback:this.transitionEventHandler.bind(this)},ns.Model.prototype.on.call(this,e,n.callback)),n.handlers.push(t)}else ns.Model.prototype.on.call(this,e,t);return this},ns.ModelFsm.prototype.off=function(e,t){if("transition"===this.getEventData(e).type){var n=this._transitionEvents[e];n&&(n.handlers=v()(n.handlers,function(e){return e===t}),n.handlers.length||(delete this._transitionEvents[e],ns.Model.prototype.off.call(this,e,n.callback)))}else ns.Model.prototype.off.call(this,e,t);return this},ns.ModelFsm.prototype.trigger=function(e,t){if(this._isSwitchOn){if(!g.test(e)||this._transitionEvents[e])return"* > *"!==e||this._transitionEvents[e]?void ns.Model.prototype.trigger.apply(this,arguments):(this.log("Transition from",t.from,"to",t.to,"is success"),void this._applyState(t.to,t));this.trigger("* > *",t)}},ns.ModelFsm.prototype.getEventData=function(e){var t={type:e,from:"",to:""},n=[e];if(m.test(e)&&(n=e.match(m),t.type="current",t.to=n[1]),"* > *"===e&&(t.type="transition",t.from="*",t.to="*"),g.test(e)){var r=(n=e.match(g))[1],o=n[2];t.type=r&&o?"transition":e,t.from=r,t.to=o}return t},ns.ModelFsm.prototype.inTransition=function(){return this._inTransition},ns.ModelFsm.prototype.abortTransition=function(){this._inTransition&&this._transitionDeferred.reject(new Error("model already in transition"))},ns.ModelFsm.prototype.switchOff=function(){this.log("Model is switchOff"),this.abortTransition(),this._isSwitchOn=!1},ns.ModelFsm.prototype.switchOn=function(){this.log("Model is switchOn"),this._isSwitchOn=!0},ns.ModelFsm.prototype.destroy=function(){this.switchOn(),this.abortTransition(),ns.Model.prototype.destroy.apply(this),this._reinit()},ns.ModelFsm.prototype.invalidate=ns.ModelFsm.prototype.destroy},449:function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},4490:function(e,t,n){e.exports=n(4491)},4491:function(e,t,n){var r=n(646),o=n(508),i=n(1473),s=n(344);e.exports=function(e,t){return(s(e)?r:o)(e,i(t))}},4492:function(e,t,n){var r=n(365),o=n(469),i=n(390),s=n(364),a=n(1069),u=n(4493),c=n(660),l=n(548),f=n(4494),p=n(630),d="[object Map]",h="[object Set]",v=r?r.iterator:void 0;e.exports=function(e){if(!e)return[];if(s(e))return a(e)?f(e):o(e);if(v&&e[v])return u(e[v]());var t=i(e);return(t==d?c:t==h?l:p)(e)}},4493:function(e,t){e.exports=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}},4494:function(e,t,n){var r=n(4495),o=n(4496),i=n(4497);e.exports=function(e){return o(e)?i(e):r(e)}},4495:function(e,t){e.exports=function(e){return e.split("")}},4496:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},4497:function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",i="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+o+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[i,s,a].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[i+r+"?",r,s,a,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+l+c,"g");e.exports=function(e){return e.match(f)||[]}},4498:function(e,t,n){var r=n(498),o=n(1052),i=n(452),s=n(344),a=n(4499);e.exports=function(e,t){return(s(e)?r:o)(e,a(i(t,3)))}},4499:function(e,t){var n="Expected a function";e.exports=function(e){if("function"!=typeof e)throw new TypeError(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},4500:function(e,t){ns.ModelCollection=function(){},no.inherit(ns.ModelCollection,ns.Model),ns.ModelCollection.prototype.DEFAULT_ITEMS_SPLIT=".items",ns.ModelCollection.prototype._init=function(){this._modelsEvents={},this.models=[],ns.Model.prototype._init.apply(this,arguments)},ns.ModelCollection.prototype.getData=function(){if(this.isValid()){var e;e=this.info.split?this.info.split.items:this.info.jpathItems?this.info.jpathItems:this.DEFAULT_ITEMS_SPLIT,this.data||(this.data={}),"/"===e?this.data=[]:no.jpath.set(e,this.data,[]);var t=no.jpath(e,this.data);this.models.forEach(function(e){t.push(e.getData())})}return this.data},ns.ModelCollection.prototype._reset=function(){ns.Model.prototype._reset.apply(this,arguments),this.clear()},ns.ModelCollection.prototype._beforeSetData=function(e,t){var n=this.info.split;if(n){var r=no.jpath(n.items||this.DEFAULT_ITEMS_SPLIT,e),o=this._splitModels(r,t),i=this.__filterExistsModels(this.models,o),s=this.__filterExistsModels(o,this.models);this.__removeModels(s),this.__insertModels(i,0),this.models=o}else this.clear();return e},ns.ModelCollection.prototype._splitModels=function(e,t){for(var n=this.info.split,r=[],o=0,i=e.length;o<i;o++){var s,a=e[o],u={};for(var c in n.params)u[c]=no.jpath(n.params[c],a);(s="function"==typeof n.model_id?n.model_id(a,u):n.model_id)&&r.push(ns.Model.get(s,u).setData(a,t))}return r},ns.ModelCollection.prototype._subscribeSplit=function(e){var t=this;this.bindModel(e,"ns-model-changed",function(n,r){t.onItemChanged(n,e,r)}),this.bindModel(e,"ns-model-touched",function(n){t.onItemTouched(n,e)}),this.bindModel(e,"ns-model-before-destroyed",function(n){t.onItemDestroyed(n,e)})},ns.ModelCollection.prototype.__filterExistsModels=function(e,t){for(var n=this.__buildModelsHash(e),r=[],o=0,i=t.length;o<i;o++){var s=t[o];n.hasOwnProperty(s.key)||r.push(s)}return r},ns.ModelCollection.prototype.__buildModelsHash=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n].key]=0;return t},ns.ModelCollection.prototype.bindModel=function(e,t,n){var r=this._modelsEvents[e.key]||(this._modelsEvents[e.key]={});e.on(t,n),r[t]=n},ns.ModelCollection.prototype.unbindModel=function(e,t){var n=this._modelsEvents[e.key];n&&n[t]&&(e.off(t,n[t]),delete n[t])},ns.ModelCollection.prototype.onItemChanged=function(e,t,n){this.trigger("ns-model-changed",{model:t,jpath:n})},ns.ModelCollection.prototype.onItemTouched=function(e,t){this._version++},ns.ModelCollection.prototype.onItemDestroyed=function(e,t){this.remove(t)},ns.ModelCollection.prototype.getSelfVersion=function(){return this._versionSelf},ns.ModelCollection.prototype._incVersion=function(){ns.Model.prototype._incVersion.apply(this,arguments),this._versionSelf=this._version},ns.ModelCollection.prototype._unsubscribeSplit=function(e){if(e.key in this._modelsEvents){var t=this._modelsEvents[e.key];for(var n in t)e.off(n,t[n]);delete this._modelsEvents[e.key]}},ns.ModelCollection.prototype.clear=function(){var e=this.models;if(this.models=[],e&&e.length){var t=this;e.forEach(function(e){t._unsubscribeSplit(e)}),this.trigger("ns-model-remove",e)}},ns.ModelCollection.prototype.insert=function(e,t){this._reinit(),isNaN(t)&&(t=this.models.length),Array.isArray(e)||(e=[e]);for(var n=[],r=this.__buildModelsHash(e),o=0,i=e.length;o<i;o++){var s=e[o];0===r[s.key]&&(n.push(s),r[s.key]++)}var a=this.__filterExistsModels(this.models,n);return this.__insertModels(a,t)},ns.ModelCollection.prototype.__insertModels=function(e,t){for(var n=0,r=e.length;n<r;n++)this.models.splice(t+n,0,e[n]),this._subscribeSplit(e[n]);return e.length>0&&(this.status=this.STATUS.OK,this.trigger("ns-model-insert",e),!0)},ns.ModelCollection.prototype.remove=function(e){Array.isArray(e)||(e=[e]);for(var t=this._modelsIndexToInstance(e),n=[],r=0,o=t.length;r<o;r++){var i=t[r],s=this.models.indexOf(i);s>-1&&(i._itemToRemoveIndex=s,n.push(i))}return this.__removeModels(n)},ns.ModelCollection.prototype.__removeModels=function(e){for(var t=0,n=(e=e.sort(function(e,t){return t._itemToRemoveIndex-e._itemToRemoveIndex})).length;t<n;t++)this._unsubscribeSplit(e[t]),this.models.splice(e[t]._itemToRemoveIndex,1);return!!e.length&&(this.trigger("ns-model-remove",e),!0)},ns.ModelCollection.prototype._modelsIndexToInstance=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];if("number"==typeof o){var i=this.models[o];this.models[o]&&t.push(i)}else t.push(o)}return t}},4501:function(e,t){ns.ModelCollectionStatic=function(){},no.inherit(ns.ModelCollectionStatic,ns.ModelCollection),ns.ModelCollectionStatic.prototype.canRequest=no.False,ns.ModelCollectionStatic.prototype.destroy=function(){ns.Model.prototype.destroy.apply(this),this._reinit()},ns.ModelCollectionStatic.prototype.invalidate=ns.ModelCollectionStatic.prototype.destroy},4502:function(e,t){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){ns.layout={};var e={},t=/\s+/;function r(e){var t=e.substr(-1);return"@"===t?ns.L.BOX:"&"===t?ns.L.ASYNC:ns.L.VIEW}function o(e){if(t.test(e))return e;var n=e.slice(-1);return"@"!==n&&"&"!==n||(e=e.slice(0,-1)),e}ns.layout.define=function(t,n,r){if(e[t])throw new Error("[ns.layout] Can't redefine '"+t+"'");e[t]={layout:n,parent_id:r}},ns.layout.undefine=function(t){delete e[t]},ns.layout._reset=function(){e={}},ns.layout.page=function(i,s){var a=e[i];if(!a)throw new Error("[ns.layout] '"+i+"' is not defined");var u=function e(t,i){var s={};if("string"==typeof t)s[t]=!0,t=s;else if(Array.isArray(t)){for(var a=0,u=t.length;a<u;a++)s[t[a]]=!0;t=s}var c={};for(var l in t){var f=l;l.indexOf("{")>-1&&(f=no.jpath.string(l)(i));var p,d=t[l];switch(n(d)){case"function":p=e(d(i),i);break;case"object":case"string":p=e(d,i);break;default:p={}}c[o(f)]={type:r(f),views:p}}return c}(a.layout,s);a.parent_id&&(u=function(e,n){var i=ns.object.clone(n);for(var s in e){var a=s.split(t),u=a.length;if(r(a[u-1])!==ns.L.BOX)throw new Error("[ns.layout] Can't overwrite view layout '"+a[u-1]+"'");for(var c=i,l=0;l<u-1;l++)if(!(c=c[o(a[l])].views))throw new Error('[no.layout] Path "'+a.slice(0,l).join(" ")+'" is undefined in this layout and cannot be extended');c[o(a[u-1])]=e[s]}return i}(u,ns.layout.page(a.parent_id,s)));return u},ns.layout.generateSimple=function(t,n){var r=(n=n||"ns-auto-layout-")+t;if(r in e)return r;var o={};return o[t]={},ns.layout.define(r,o),r}}()},4503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);n.n(r);!function(e){e.log={},e.log.debug=function(){Daria.DEBUG&&console.log.apply(console,arguments)},e.log.info=function(t,n,r){var o=r;if("ns.Update.restart"===t||"ns.Update.error-content"===t||"ns.View.error-content"===t){!1,r=JSON.stringify(e.Model.collectErrorData(r||[]))}else if(r&&"string"!=typeof r)try{r=JSON.stringify(r)}catch(e){r="JSON.stringify.error"}Daria.DEBUG&&window.console&&window.console.group&&(console.group("[qu.log.info]"),console.log(t),console.log(n),console.log(o),console.groupEnd("[qu.log.info]")),(n=n||{}).event=t,n.level="info",Jane.ErrorLog.send(n,r)},e.log.error=function(e,t){Jane.ErrorLog.log(Object.assign({type:r.ErrorType.Noscript,source:r.ErrorSource.Logic,block:r.ErrorBlock.Noscript},e),t)},e.log.exception=function(e,t,n){Jane.ErrorLog.sendException(e,t,n)}}(ns)},4504:function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(){function e(e){return ns.events.trigger("ns-page-after-load",e),e}function t(e){return ns.events.trigger("ns-page-error-load",e),Vow.reject(e)}ns.page={},ns.page.HOME_HASH="#inbox",ns.page.current={page:null,params:{}},ns.page.currentUrl=null,ns.page._forceHashChange=null,ns.page._lastTransition={url:null,count:0},ns.page._lastTransition.set=function(e,t){!t&&e&&(this.url===e?++this.count:(this.url=e,this.count=1))},ns.page._lastTransition.unset=function(e,t){if(!t&&this.url&&this.url===e){var n=Math.max(this.count-1,0);this.count=n,this.url=n?this.url:null}},ns.page._lastTransition.shouldBlockByTransition=function(e,t){return t&&this.url&&this.url!==e},ns.page.DEFAULT_HISTORY_ACTION="push",ns.page.home=function(e){return ns.page.go(ns.page.HOME_HASH,e?"replace":"push")},ns.page.refresh=function(){return ns.page.go(ns.page.currentUrl),new vow.Promise(function(e){ns.events.once("ns-page-after-load",e)})},ns.page.updateMailboxUid=function(e){e!==ns.page.current.params.mailboxUid&&ns.page._setMailboxUid(e)},ns.page.go=function(e,n){var o,i=ns.page._go(e,n);if(e=i.url,n=i.historyAction,o=i.stopPromise)return o;n?!0===n&&(n="replace"):n=ns.page.DEFAULT_HISTORY_ACTION;var s=!1;e||(e=ns.page.getCurrentUrl(),s=!0);var a=ns.page.getCurrentSearchParams();if(!ns.page.block.check(e,a))return e!==ns.page.currentUrl&&ns.history.replaceState(ns.page.currentUrl),a.get("muid")!==ns.page.current.params.mailboxUid&&ns.page._setMailboxUid(ns.page.current.params.mailboxUid),Vow.reject("block");var u=ns.router(e,void 0,a);if(u.page===ns.R.NOT_APP_URL)return"replace"===n?window.location.replace(u.redirect):window.location=u.redirect,new Vow.Promise;if(u.page.startsWith(ns.R.NEW_PAGE)){var c="".concat(window.location.protocol,"//").concat(window.location.hostname).concat(window.location.pathname,"?").concat(function(e){var t=Math.floor(1e4*Math.random())+1;if(!e)return new URLSearchParams("r=".concat(t));return e.delete("r"),e.set("r",t),e}(a)).concat(e);return window.location.replace(c),Vow.reject("block")}if("message"===u.page){var l,f=ns.page.current,p=ns.page.history.getPreviousPageUrl();e===ns.page.currentUrl?(l=p,f.params.previousPageUrl=p):l=e===p?ns.page.history.getPrevious(1):ns.page.currentUrl,ns.events.trigger("ns-page-before-load",[f,r({},u,{params:r({},u.params,{previousPageUrl:l})})],e)}else ns.events.trigger("ns-page-before-load",[ns.page.current,u],e);return ns.page._lastTransition.set(e,s),"push"===n&&e===ns.page.currentUrl&&(n="preserve"),ns.page.followRoute(u).then(function(){return ns.page._lastTransition.shouldBlockByTransition(e,s)?(ns.log.debug("[ns.page.go] refresh "+e+" blocked by transition to "+ns.page._lastTransition.url),Vow.reject("block by transition")):(ns.page._setCurrent(u,e),ns.page._fillHistory(e,n),u.page===ns.R.REDIRECT?ns.page.redirect(u.redirect):(ns.page.title(),ns.page.startUpdate(u)))},t).then(function(t){return ns.page._lastTransition.unset(e,s),t},function(t){return ns.page._lastTransition.unset(e,s),Vow.reject(t)})},ns.page._setMailboxUid=function(e){var t=new URL(window.location.href);e?t.searchParams.set("muid",e):t.searchParams.delete("muid"),window.history.replaceState({},"",t.toString())},ns.page._go=function(e,t){return ns.log.debug("[ns.page.go]",e,t),e&&"#"!==e.charAt(0)?(!0===t||"replace"===t?window.location.replace(e):window.location=e,{stopPromise:new Vow.Promise}):{url:e,historyAction:t}},ns.page.followRoute=function(){var e=new Vow.Promise;return Jane.Services.hasNewVersion()&&Daria.Page.loadingHash!==ns.page.currentUrl&&!/^#compose/.test(ns.page.currentUrl)?(ns.page.forceReload(Daria.Page.loadingHash),e):(Jane.Services.run(Daria.Page.loadingHash,function(){e.fulfill()}),e)},ns.page.startUpdate=function(n){var r=ns.layout.page(n.page,n.params);return new ns.Update(ns.MAIN_VIEW,r,n.params).start().then(e,t)},ns.page._setCurrent=function(e,t){ns.page.current=e,ns.page.currentUrl=t},ns.page._fillHistory=function(e,t){switch(t){case"init":ns.page.history.push(e);break;case"push":ns.history.pushState(e),ns.page.history.push(e);break;case"replace":ns.history.replaceState(e),ns.page.history.replace(e);break;case"redirect":ns.history.replaceState(e),ns.page.history.redirect(e)}},ns.page.redirect=function(e){return ns.history.replaceState(e),ns.page.go(e,"redirect")},ns.page.title=no.nop,ns.page._reset=function(){this.current={},this.currentUrl=""},ns.page.getDefaultUrl=function(){return ns.router.url(ns.page.HOME_HASH)},ns.page.getCurrentUrl=function(){var e=window.location.href,t=e.indexOf("#");return-1!==t?e.substr(t):ns.page.HOME_HASH},ns.page.getCurrentSearchParams=function(){return new URLSearchParams(window.location.search)},ns.page.forceReload=function(e){if(ns.page.blockReload.check(ns.page.currentUrl)){var t=window.location;window.removeEventListener("hashchange",ns.history.onpopstate,!1),ns.events.off("router.search-changed",ns.history.onSearchChanged),t.replace(e||t.hash),t.reload()}},ns.page.hashReplace=function(e){if(!e)return!1;ns.page._forceHashChange=e;var t=window.location.href.toString().replace(/#.+$/,"")+e;return window.location.replace(t),!0},ns.page.replacePage=function(e,t){var n=ns.router.generateUrl(e,t);ns.page.hashReplace(n),ns.page._setCurrent({page:e,params:t},n)}}()},4505:function(e,t){ns.page.block={},ns.page.block._checkers=[],ns.page.block.add=function(e){return ns.page.block._checkers.push(e),this},ns.page.block.remove=function(e){var t=ns.page.block._checkers,n=t.indexOf(e);return n>-1&&t.splice(n,1),this},ns.page.block.clear=function(){return ns.page.block._checkers=[],this},ns.page.block.check=function(e,t){for(var n=ns.page.block._checkers,r=0,o=n.length;r<o;r++)if(!1===n[r](e,t))return!1;return!0}},4506:function(e,t){ns.page.blockReload={},ns.page.blockReload._checkers=[],ns.page.blockReload.add=function(e){return ns.page.blockReload._checkers.push(e),this},ns.page.blockReload.remove=function(e){var t=ns.page.blockReload._checkers,n=t.indexOf(e);return n>-1&&t.splice(n,1),this},ns.page.blockReload.clear=function(){return ns.page.blockReload._checkers=[],this},ns.page.blockReload.check=function(e){for(var t=ns.page.blockReload._checkers,n=0,r=t.length;n<r;n++)if(!1===t[n](e))return!1;return!0}},4507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(749),o=n.n(r),i=n(1068),s=n.n(i);ns.page.history={},ns.page.history._current=null,ns.page.history._history=[],ns.page.history.push=function(e){var t=ns.page.history;t._current&&t._current!==e&&(ns.page.history.getPrevious()===e?t._history.pop():t._history.push(t._current)),t._current=e},ns.page.history.replace=function(e){var t=ns.page.history,n=t._history.pop(),r=t._current;n&&n!==e&&r!==e&&t._history.push(n),t._current=e},ns.page.history.redirect=function(e){var t=ns.page.history;t._current=e,t._previous=t.getPrevious()},ns.page.history.back=function(){var e=ns.page.history,t=e.getPrevious();return t?e._history.pop():t=ns.page.getDefaultUrl(),e._current=t,ns.page.go(t)},ns.page.history.getPrevious=function(e){e=e||0;var t=ns.page.history._history;return t[t.length-e-1]},ns.page.history.reset=function(){ns.page.history._current=null,ns.page.history._history=[]},ns.page.history.getPreviousPageUrl=function(e){e=e||{};var t,n,r=-1,i=$.makeArray(e.match),a=$.makeArray(e.mismatch),u=function(){var e=o()(i)?function(){return!0}:function(e){return s()(i,e)};return function(t){return e(t)&&function(e){return!s()(a,e)}(t)}}();do{(t=ns.page.history.getPrevious(++r))&&(n=ns.router(t).page)}while(t&&!u(n));return t},ns.page.history.getFirstValidPrevious=function(e){for(var t,n=ns.page.history._history.concat(ns.page.currentUrl),r=n.length;r--;)if(e(t=n[r]))return t;return null}},4508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(528),o=n(2);n.n(o);function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e=0;ns.request=function(e,t,n){return ns.request.models(a(e,t),n)},ns.forcedRequest=function(e,t,n){return(n=n||{}).forced=!0,ns.request.models(a(e,t),n)},ns.request.models=function(e,t){return e=e.map(function(e){return e.getRequest?e.getRequest():e}),new n(e,t).start()},ns.request.requestParams={},ns.request.addRequestParams=function(e){return no.extend(e,ns.request.requestParams,Daria.commonRequestParams(e))},ns.request.URL=Daria.api.models,ns.request.FORMAT=Daria.api["models-format"],ns.request.fetchModels=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.map(u),r=ns.request.URL+"?_m="+n.join(","),o=function(e){if("json"===ns.request.FORMAT)return{models:e.map(function(e){var t=e.getRequestParams();return{name:u(e),params:e.info.isStrictParams?t:ns.parseQuery(ns.params2query(t)),meta:{requestAttempt:e.retries}}})};for(var t={},n=0,r=e.length;n<r;n++){var o="."+n,i=e[n];t["_model"+o]=u(i);var s=i.getRequestParams();for(var a in s)t[a+o]=s[a]}return t}(e),i={};return ns.request.addRequestParams(o),Object.assign(o,t),"json"===ns.request.FORMAT&&(o=JSON.stringify(o),i.contentType="application/json; encoding=utf-8"),ns.http(r,o,i)},ns.request.canProcessResponse=function(e){var t=e.timestamp;return t&&Object(r.b)(t),Daria.parseLoginInfo(e)},ns.request._reset=function(){ns.request.manager._keys={}},ns.request.extractModel=function(e,t,n){var r,o;t?(r=e.extractData(t))||(o=e.extractError(t))||(o={id:"INVALID_FORMAT",reason:"response should contain result or error",response:JSON.stringify(n,function(e,t){return"object"===i(t)||Array.isArray(t)?t:i(t)})}):o={id:"NO_DATA",reason:"Server returned no data"},e&&t&&t.xRequestId&&(e.xRequestId=t.xRequestId),n&&n.xTraceId&&(e.xTraceId=n.xTraceId),r?e.setData(r):e.setError(o)};var t=0,n=function(e,n){this.id=t++,this.models=e,this.options=n||{},this.promise=new Vow.Promise};function s(e){return e.promise}function a(e,t){"string"==typeof e&&(e=[e]),"string"==typeof e[0]&&(e=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n.push({id:e[r],params:t});return n}(e,t=t||{}));for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];i instanceof ns.Model?n.push(i):i.model&&i.model instanceof ns.Model?n.push(i.model):n.push(ns.Model.get(i.id,i.params))}return n}function u(e){return e.info.serverId||e.id}n.prototype.start=function(){for(var e=[],t=[],n=this.models,r=0,o=n.length;r<o;r++){var i=n[r],s=ns.request.manager.add(i,this.id,this.options.forced);!0===s?t.push(i):s instanceof ns.Model&&e.push(i)}return this.request(e,t),this.promise},n.prototype.request=function(t,n){var r,i=[];if(n.length){var a=[],c=[];n.forEach(function(e){if("function"==typeof e.request){var t=e.request().then(function(){ns.request.manager.done(e)},function(){ns.request.manager.done(e)});e.promise=t,c.push(t)}else a.push(e)}),i=i.concat(c),a.length&&(r=ns.request.fetchModels(a),i=i.concat(a.map(s)))}if(t.length&&(i=i.concat(t.map(s))),i.length){var l=this;r&&r.then(function(t){e=0,!1===ns.request.canProcessResponse(t)?(ns.request.manager.clean(l.models),l.promise.reject({error:"CANT_PROCESS",invalid:l.models,valid:[]})):l.extract(a,t)},function(t){var n=l.models.map(u),r=function(){ns.log.error({message:"".concat(o.ErrorMessage.NsRequestUnknownError,": ").concat(n.join()),method:"Request.prototype.request",sourceMethod:o.ErrorSourceMethod.NsHttp,error:JSON.stringify(t),additional:{models:n}})};Array.isArray(n)&&"digest"===n[0]?(e+=1)<1e3&&r():r(),l.extract(a,{})}),Vow.all(i).then(this.start.bind(this))}else{ns.request.manager.clean(this.models);for(var f=[],p=[],d=0,h=this.models.length;d<h;d++){var v=this.models[d];v.isValid()?f.push(v):p.push(v)}p.length?this.promise.reject({invalid:p,valid:f}):this.promise.fulfill(this.models)}},n.prototype.extract=function(e,t){for(var n=t&&t.models||[],r=0,o=e.length;r<o;r++){var i=e[r],s=n[r];i.requestID>this.id||(ns.request.extractModel(i,s,t),ns.request.manager.done(i),i.finishRequest())}},Daria.parseLoginInfo=function(e){var t=jpath(e,".models.error.code")[0]||jpath(e,".error.code")[0];if("AUTH_NO_AUTH"===t||"AUTH_WRONG_GUARD"===t)return Jane.doLogin("parseLoginInfo"),ns.request._reset(),!1;var n=e.uid;return n&&n!==Daria.uid?(Jane.locate("/"),!1):(e.cookieRenew&&!Jane.cookieRenewFrameTimer&&(document.cookie="Cookie_check=1; domain=."+Daria.Config["yandex-domain"]+"; path=/",$('<iframe id="jane-cookie-renew" src="//'+Daria.Config["passport-host"]+'/auth/update/" class="g-invisible"/>').appendTo("body"),Jane.cookieRenewFrameTimer=window.setTimeout(function(){delete Jane.cookieRenewFrameTimer,$("#jane-cookie-renew").remove()},6e4)),!0)}}()},4509:function(e,t){ns.request.manager={STATUS:{LOADING:0,FAILED:1,DONE:2},_keys:{},add:function(e,t,n){var r=this.STATUS,o=e.key,i=this._keys[o];return i?!(e.isValid()&&!n)&&(i.status===r.LOADING?e.isDo()?i.model:n?(i.model.requestID=t,!0):i.model:i.status===r.FAILED?i.model._canRequest()?(this._createRequest(e,t),!0):(e.status=e.STATUS.ERROR,this.done(e,!0),!1):!e.isValid()&&(!!e._canRequest()&&(this._createRequest(e,t),!0))):e.isValid()?!(!n||e.requestID===t)&&(this._createRequest(e,t),!0):!!e.canRequest()&&(this._createRequest(e,t),!0)},done:function(e,t){var n=this._keys[e.key];n&&(e.isValid()||t?n.status=this.STATUS.DONE:n.status=this.STATUS.FAILED)},clean:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.retries=0,delete this._keys[r.key]}},_createRequest:function(e,t){this._keys[e.key]={status:this.STATUS.LOADING,model:e},e.prepareRequest(t)}}},4510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=(n.n(r),n(63)),i=n(337);n.n(i);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){"@babel/helpers - typeof";return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){e&&"object"===c(e)&&"mailboxUid"in e&&(e.mailboxUid&&"null"!==e.mailboxUid||delete e.mailboxUid)}ns.router=function(e,t,n){var r=ns.router.baseDir,o=ns.router._routes;if(0!==e.indexOf(r))return{page:ns.R.NOT_APP_URL,params:{},redirect:e};(e=e.substring(r.length))||(e="/");var i=ns.router._processRedirect(o.redirect,e,t);if(i){var s=ns.router._getRouteDefinitionByUrl(i,n);return s&&s.page.startsWith(ns.R.NEW_PAGE)?s:{page:ns.R.REDIRECT,params:{},redirect:r+i}}var a=e.split("?"),u=a.shift();if(u in o.rewriteUrl){var c=a.join("?");e=o.rewriteUrl[u]+(c?"?"+c:"")}var l=ns.router._getRouteDefinitionByUrl(e,n);return l||{page:ns.R.NOT_FOUND,params:{}}},ns.router._getRouteDefinitionByUrl=function(e,t){for(var n=ns.router._routes,r=n.route,o=0,i=r.length;o<i;o++){var s=r[o],a=ns.router._parseUrl(s,e);if(a)return s.page in n.rewriteParams&&(a=n.rewriteParams[s.page](a)),t&&t.get("muid")&&(a.mailboxUid=t.get("muid")),{page:s.page,params:a}}},ns.router.encodeParamValue=encodeURIComponent,ns.router.decodeParamValue=decodeURIComponent,ns.router.URL_FIRST_SYMBOL="#",ns.router._getParamsRouteFromUrl=function(e,t){for(var n,r=e.params,o={},i=r.length,s=0;s<i;s++){n=r[s];var a=t[s+1];if(a)try{a=ns.router.decodeParamValue(a,n.name)}catch(e){a=""}a||(a=n.default_value),o[n.name]=a}return o},ns.router._parseUrl=function(e,t){var n=e.regexp.exec(t);if(n){var r=ns.router._getParamsRouteFromUrl(e,n),o=n[e.params.length+1];return o&&no.extend(r,ns.parseQuery(o)),r}return null},ns.router._processRedirect=function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=0,i=e.length;o<i;o++){var s=e[o];if("function"==typeof s.path){var u=ns.router._parseUrl(s,t);u&&(n=s.path(a({},u,{},r),t))}else s.regexp.test(t)&&(n=s.path);if(n)return n}return null},ns.router.init=function(){var e=ns.router.routes;for(var t in ns.router._regexps={},ns.router.regexps)ns.router._regexps[t]=new RegExp("^"+ns.router.regexps[t]+"$");var n={};n.redirect=e.redirect||{},n.rewriteUrl=e.rewriteUrl||{},n.rewriteParams=e.rewriteParams||{};var r=e.route||{},o=[],i={};for(var s in r){var a=r[s];(f=ns.router.compile(s)).page=a,o.push(f),i[a]=i[a]||[],i[a].push(f)}n.route=o,n.routeHash=i;var u=e.redirect||{},c=[];for(var l in u){var f=ns.router.compile(l);c.push({regexp:f.regexp,path:u[l],params:f.params})}n.redirect=c,ns.router._routes=n},ns.router.url=function(e){return e&&ns.router.baseDir+e||"/"},ns.router.generateUrl=function(e,t){if(!ns.router._routes)return"";var n;l(t=t||{}),delete t.threaded,delete t["_actions-dropdown-type"],(t.attachments||t.unread)&&(delete t.extra_cond,delete t.goto);var s=function(e){if(!Object(i.hasFeature)("web-separate-main-page"))return e;if(!ns.router._routes)return e;var t=ns.router._routes.routeHash[e];return t&&t.length?e:"".concat(ns.R.NEW_PAGE,"__").concat(e)}(e),a=ns.router._routes&&ns.router._routes.routeHash[s];if(Daria.Config.dev&&ns.assert(a&&a.length,"ns.router","Could not find route with id '%s'!",s),!a||!a.length)return Jane.ErrorLog.log({type:r.ErrorType.Noscript,source:r.ErrorSource.Logic,sourceMethod:r.ErrorSourceMethod.NsRouter,block:r.ErrorBlock.Noscript,method:"generateUrl",additional:{layout:s,params:Object(o.a)(t)}},new Error("Could not find route with '".concat(s,"'"))),ns.router.url(null);for(var u=0;u<a.length&&null===(n=ns.router._generateUrl(a[u],t));u++);return Daria.Config.dev&&ns.assert(null!==n,"ns.router","Could not generate url for layout id '%s'!",s),null===n&&Jane.ErrorLog.log({type:r.ErrorType.Noscript,source:r.ErrorSource.Logic,sourceMethod:r.ErrorSourceMethod.NsRouter,block:r.ErrorBlock.Noscript,method:"generateUrl",additional:{layout:s,params:Object(o.a)(t)}},new Error("Could not generate url for layout id '".concat(s,"'"))),ns.router.url(n)},ns.router.buildFoldersUrls=function(e){l(e);var t=ns.Model.get("folders",e).symbols();for(var n in t)ns.router.routes.rewriteUrl["#"+n]="#folder/"+t[n]},ns.router._generateUrl=function(e,t){var n;l(t);for(var r,o,i,s,a=[],u=no.extend({},t),c=ns.router._routes.rewriteUrl,f=0;f<e.sections.length;f++){r=e.sections[f],o="";for(var p=0;p<r.items.length;p++)if((s=r.items[p]).name){i=t[s.name];var d=s.name in t;if(s.is_optional&&!d&&(i=s.default_value),s.is_filter&&i!==s.filter_value)return null;if(!s.is_optional&&!d)return null;if(s.is_optional&&!d)continue;if(i=ns.router.encodeParamValue(i,s.name),!ns.router._isParamValid(i,s.type))return null;o+=i,delete u[s.name]}else o+=s.default_value;!o&&r.is_optional||a.push(o)}n=(n=a.join("/"))?ns.router.URL_FIRST_SYMBOL+n:"";for(var h=!0;h;)for(var v in h=!1,c){var y=c[v],m=y.length;if(n.substr(0,m)===y){var g=n.charAt(m);"/"!==g&&"?"!==g&&g||(n=v+n.substr(y.length),h=!0)}}var _=ns.params2query(u);return _?n+"?"+_:n},ns.router.compile=function(e){(e=e.replace(/\/$/,""))[0]===ns.router.URL_FIRST_SYMBOL&&(e=e.substr(1));var t=e.split("/").map(ns.router._parseSection),n=t.map(ns.router._generateSectionRegexp);"/"===n[0][0]&&(n[0]=ns.router.URL_FIRST_SYMBOL+n[0].substr(1));var r=n.join(""),o=[];return t.forEach(function(e){o=o.concat(e.items.filter(function(e){return Boolean(e.name)}))}),r="^"+r+"/?(?:\\?(.*))?$",{regexp:new RegExp(r),params:o,sections:t}},ns.router._parseSection=function(e){for(var t=0,n=-1,r=-1,o=[];!((n=e.indexOf("{",t))<0);)r=e.indexOf("}",n),ns.assert(r>0,"ns.router","could not parse parameter in url section: %s",e),n>t&&o.push({default_value:e.substr(t,n-t)}),o.push(ns.router._parseParam(e.substr(n+1,r-n-1))),t=r+1;return t<e.length&&o.push({default_value:e.substr(t)}),{is_optional:o.length&&o.filter(function(e){return e.is_optional}).length===o.length,items:o}},ns.router._parseParam=function(e){var t,n,r,o,i,s,a=!1,u=(t=e.split("="))[0].split(":");return s=u[0],n=u[1]||"id",3===t.length?(o=!1,a=!0,i=t[2],ns.assert(i,"ns.router","Parameter '%s' value must be specified",s),ns.assert(ns.router._isParamValid(i,n),"ns.router","Wrong value for '%s' parameter",s)):(o=2===t.length,r=t[1]),{name:s,type:n,default_value:r,is_optional:o,is_filter:a,filter_value:i}},ns.router._generateSectionRegexp=function(e){var t="";return e.items.forEach(function(e){t+=ns.router._generateParamRegexp(e)}),t=e.is_optional?"(?:/(?!/)"+t+")?":"/"+t},ns.router._generateParamRegexp=function(e){var t,n=ns.router.regexps;return e.default_value&&!e.name?e.default_value:(e.type&&ns.assert(e.type in n,"ns.router","Could not find regexp for type '%s'!",e.type),e.is_filter&&e.filter_value?t="("+e.filter_value+")":(t="("+(t=n[e.type])+")",e.is_optional&&(t="(?:"+t+")?")),t)},ns.router._isParamValid=function(e,t){var n=ns.router._regexps[t];return ns.assert(n,"ns.router","Could not find regexp for type '%s'!",t),n.test(e)},ns.router._reset=function(){this.baseDir="",this._routes=null,this.routes={},this.regexps={id:"[A-Za-z_][A-Za-z0-9_-]*",int:"[0-9]+"}},ns.router._reset()},4511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(666),o=n.n(r),i=n(1068),s=n.n(i),a=n(4512),u=n.n(a),c=n(340),l=(n.n(c),n(343)),f=(n.n(l),n(2));n.n(f);!function(){ns.Update=function(e,n,r,o){if(this.view=e,!(this.view.id in n))throw new Error("[ns.Update] Can't find view layout");this.layout=n[this.view.id],this.params=r,this.id=++t,this.promise=new Vow.Promise,o=o||{},this.EXEC_FLAG=o.execFlag||ns.U.EXEC.GLOBAL,this.parentUpdate=o.parentUpdate,this.log("created instance",this,"with layout",this.layout,"and params",this.params),this.startTimer("full"),o.timers&&(this._profileTimes.__parent=o.timers),ns.Update._addToQueue(this)||this.abort()},no.extend(ns.Update.prototype,ns.profile);var e=[],t=-1;function n(e){for(var t={},n=[],r=0,o=e.length;r<o;r++){var i=e[r].models;for(var s in i){var a=i[s],u=a.key;t[u]||(n.push(a),t[u]=!0)}}return n}function r(e){return e.parentUpdate?r(e.parentUpdate):e.EXEC_FLAG===ns.U.EXEC.PARALLEL}ns.Update.prototype.STATUS=ns.U.STATUS,ns.Update.prototype._EVENTS_ORDER=["ns-view-hide","ns-view-htmldestroy","ns-view-htmlinit","ns-view-async","ns-view-show","ns-view-touch"],ns.Update.prototype._requestCount=0,ns.Update.prototype.log=function(){if(ns.DEBUG){var e=Array.prototype.slice.apply(arguments);"generated html"===e[0]&&(e[1]=ns.html2node(e[1])),ns.log.debug.apply(ns.log,["[ns.Update]",this.id].concat(e))}},ns.Update.prototype._requestModels=function(e){var t="requestModels."+this._requestCount;if(this.startTimer(t),this.log("started models request",e),!this._checkModelsInvalid(e))return this.stopTimer(t),this.log("received models",e),Vow.fulfill(e);var n=ns.request.models(e);return n.always(function(){this.stopTimer(t)},this),n.then(this._onRequestModelsOK,this._onRequestModelsError,this)},ns.Update.prototype._onRequestModelsOK=function(e){return this.log("received models",e),e},ns.Update.prototype._onRequestModelsError=function(e){this.log("failed to receive models",e);var t={error:this.STATUS.MODELS,expired:this._expired(),invalidModels:e.invalid,validModels:e.valid};return ns.Update.handleError(t,this)?[].concat(e.invalid,e.valid):Vow.reject(t)},ns.Update.prototype._checkModelsInvalid=function(e){return(e||[]).some(function(e){return!e.isValid()})},ns.Update.prototype._getActiveViews=function(){var e="collectModels."+this._requestCount;this.startTimer(e);var t={sync:[],async:[],hasPatchLayout:!1};return this.view.destroyed||this.view._getRequestViews(t,this.layout,this.params),this.stopTimer(e),this.log("collected incomplete views",t),t},ns.Update.prototype._requestSyncModels=function(){var e=this._getActiveViews(),t=n(e.sync);return this.log("collected needed models",t),this._requestModels(t).then(function(t){if(e.hasPatchLayout&&!this._checkModelsInvalid(t))return this._requestCount++,this._requestSyncModels()},null,this)},ns.Update.prototype._requestAllModels=function(){if(this._expired())return this._rejectWithStatus(this.STATUS.EXPIRED);var e=new Vow.Promise,t=this._getActiveViews(),r=n(t.sync);this.log("collected needed models",r);var o=this._requestModels(r),i=t.async.map(function(e){return e.updateAfter(this.promise,this.params,this)},this);return o.then(function(n){if(t.hasPatchLayout&&!this._checkModelsInvalid(n))return this._requestCount++,void e.sync(this._requestAllModels());e.fulfill({async:i})},function(t){e.reject(t)},this),e},ns.Update.prototype._applyLayout=function(){this._getActiveViews()},ns.Update.prototype._generateHTML=function(){return this._expired()?this._rejectWithStatus(this.STATUS.EXPIRED):Vow.fulfill(this._renderUpdateTree())},ns.Update.prototype._renderUpdateTree=function(){this.startTimer("collectViews");var e,t={views:{}};return this.view.destroyed||this.view._getUpdateTree(t),this.log("created render tree",t),this.stopTimer("collectViews"),ns.object.isEmpty(t.views)||(this.startTimer("generateHTML"),e=this.applyTemplate(t,this.params,this.layout),this.log("generated html",e),this.stopTimer("generateHTML")),e},ns.Update.prototype._insertNodes=function(e){if(this._expired())return this._rejectWithStatus(this.STATUS.EXPIRED);this.startTimer("triggerHideEvents");var t={"ns-view-hide":[],"ns-view-htmldestroy":[]};this.view.destroyed||this.view.beforeUpdateHTML(t,!1),this._triggerViewEvents(t);var n={"ns-view-async":[],"ns-view-htmlinit":[],"ns-view-show":[],"ns-view-touch":[]};return this.switchTimer("triggerHideEvents","insertNodes"),this.view.destroyed||this.view._updateHTML(e,{toplevel:!0},n),this.switchTimer("insertNodes","triggerEvents"),this._triggerViewEvents(n),this.stopTimer("triggerEvents"),Vow.fulfill()},ns.Update.prototype._triggerViewEvents=function(e){for(var t=this.getTimers(),n=0,r=this._EVENTS_ORDER.length;n<r;n++)for(var o=this._EVENTS_ORDER[n],i=e[o]||[],s=i.length-1;s>=0;s--)i[s].trigger(o,this.params,t)},ns.Update.prototype._updateDOM=function(){if(this._expired())return this._rejectWithStatus(this.STATUS.EXPIRED);var e=this._renderUpdateTree();this.startTimer("html2node");var t=ns.html2node(e||"");this.stopTimer("html2node"),this._insertNodes(t)},ns.Update.prototype.prefetch=function(){return this.log("started `prefetch` scenario"),this._requestSyncModels().then(this._fulfill,this._reject,this),this.promise},ns.Update.prototype.generateHTML=function(){return this.log("started `generateHTML` scenario"),Vow.invoke(this._requestSyncModels.bind(this)).then(this._generateHTML,null,this).then(this._fulfill,this._reject,this),this.promise},ns.Update.prototype.prerender=function(){return this.log("started `prerender` scenario"),ns.todo(),this.promise},ns.Update.prototype.render=function(){return this._expired()?(this._reject({error:this.STATUS.EXPIRED}),this.promise):(this.log("started `render` scenario"),Vow.invoke(this._requestAllModels.bind(this)).then(function(e){this._updateDOM(),this._fulfill(e)},this._reject,this).then(null,this._reject,this),this.promise)},ns.Update.prototype.start=ns.Update.prototype.render,ns.Update.prototype.reconstruct=function(e){return this.log("started `reconstruct` scenario"),this._applyLayout(),Vow.invoke(this._insertNodes.bind(this),e).then(function(){this._fulfill({async:[]})},this._reject,this),this.promise},ns.Update.prototype.applyTemplate=function(e){return ns.renderString(e,null,"common")},ns.Update.prototype._expired=function(){return this.promise.isResolved()||-1===e.indexOf(this)},ns.Update.prototype.abort=function(){this._reject({error:ns.U.STATUS.EXPIRED})},ns.Update.prototype._fulfill=function(e){this.promise.isResolved()||(ns.Update._removeFromQueue(this),this.stopTimer("full"),this.promise.fulfill(e),this.perf(this.getTimers()),this.log("successfully finished scenario"))},ns.Update.prototype._reject=function(e){this.promise.isResolved()||(ns.Update._removeFromQueue(this),this.stopTimer("full"),this.promise.reject(e),this.log("scenario was rejected with reason",e))},ns.Update.prototype._rejectWithStatus=function(e){return Vow.reject({error:e})},ns.Update.prototype.isGlobal=function(){return this.EXEC_FLAG===ns.U.EXEC.GLOBAL},ns.Update.prototype.perf=function(e){try{this._logPerfTimings(e)}catch(e){Jane.ErrorLog.sendException("LongRunError",e)}},ns.Update.prototype._logPerfTimings=function(e){var t=ns.Update.calcPerformanceTimings(e);ns.DEBUG&&this.log("perf",e,t),t.allTime>2e3?this._sendLongRun("LongRun2",t,e):t.selfTime>1e3&&this._sendLongRun("LongRun",t,e)},ns.Update.calcPerformanceTimings=function(e){var t={allTime:0,allSumTime:0,requestTime:0,selfTime:0};for(var n in e)if("_"!==n.charAt(0)){var r=e[n];r.toString().length>10&&(r=Date.now()-r),"full"===n?t.allTime=r:0===n.indexOf("requestModels")?t.requestTime+=r:t.allSumTime+=r,t[n]=r}return t.selfTime=t.allTime-t.requestTime,t},ns.Update.prototype._sendLongRun=function(e,t,n){var r={event:e,block:this.view.id,theme:Daria.themeId,allTime:t.allTime,requestTime:t.requestTime,selfTime:t.selfTime};for(var o in n)r["perf."+o]=n[o];Jane.ErrorLog.send(r)},ns.Update.handleError=function(e,t){if(u()("outputError",e,t)(t.view))return!0;if(e.expired)return!1;var n,r=!1,i=[];return e.invalidModels&&(n=ns.Model.collectErrorData(e.invalidModels),e.invalidModels.forEach(function(e){"message"!==e.id&&"message-body"!==e.id||e.exists()||(r=!0,i.push(o()(e,"params.ids")))})),r?(Jane.ErrorLog.log({source:f.ErrorSource.Logic,sourceMethod:f.ErrorSourceMethod.NoSuchMessage,block:f.ErrorBlock.Noscript,type:f.ErrorType.Noscript,message:"No such message",method:"ns.Update.handleError",pageType:ns.page.current.page||"",pageReferrer:Daria.Page.referrer||"",pagePrevious:ns.page.history.getPrevious()||"",params:ns.params2query(ns.page.current.params),noSuchMessageIds:i.join(",")}),t._reject({error:"NO_MESSAGE"}),t.promise.then(null,function(){var e=ns.page.current.params.ids||ns.page.current.params.thread_id;e&&s()(i,e)&&ns.page.go("#no-message")})):(Jane.ErrorLog.log({source:f.ErrorSource.Logic,sourceMethod:f.ErrorSourceMethod.NsUpdate,block:f.ErrorBlock.Noscript,type:f.ErrorType.Noscript,method:"ns.Update.handleError",message:"Invalid models",errorData:JSON.stringify(n),name:n.models}),t.EXEC_FLAG===ns.U.EXEC.GLOBAL&&(t.promise.then(null,function(){ns.page.hashReplace(ns.page.history.getPrevious())}),Object(c.showStatuslineComponent)({name:l.StatuslineName.CannotLoadData}))),!1},ns.Update._removeFromQueue=function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)},ns.Update._addToQueue=function(t){var n,o,i=e,s=ns.U.EXEC,a=s.GLOBAL,u=s.ASYNC,c=t.EXEC_FLAG;if(c===a){var l=[];for(n=i.length-1;n>=0;n--){var f=i[n];r(f)?l.push(f):f.abort()}e=l}else if(c===u&&!r(t))for(n=0,o=i.length;n<o;n++)if(i[n].EXEC_FLAG===a)return!1;return e.push(t),!0}}()},4512:function(e,t,n){var r=n(1475),o=n(475)(function(e,t){return function(n){return r(n,e,t)}});e.exports=o},4513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4514),o=n.n(r),i=n(4515),s=n.n(i);function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e=/ns-view-id-\d+/;ns.View=function(){},no.extend(ns.View.prototype,ns.Events),ns.View.prototype.STATUS=ns.V.STATUS,ns.View.prototype._$document="undefined"==typeof document?null:$(document),ns.View.prototype._$window="undefined"==typeof window?null:$(window),ns.View.prototype.key=null,ns.View.prototype.params=null,ns.View.prototype.node=null,ns.View.prototype.$node=null,ns.View.prototype.views=null,ns.View.prototype.id=null,ns.View.prototype._visible=!1,ns.View.prototype.__uniqueId=null,ns.View.prototype.__modelsEventsBinded=!1,ns.View.prototype._init=function(e,t,n){this.id=e,this.__setUniqueId(),this.async=n,this.info=ns.View.info(e),no.extend(this,ns.View.getKeyAndParams(this.id,t||{},this.info)),this._initModels(),this._modelsVersions={},this.views={},this.status=this.STATUS.NONE,this.destroyed=!1,this.__customInit(),this._bindCreateEvents(),this.trigger("ns-view-init")},ns.View.prototype.__customInit=no.nop,ns.View.prototype._initModels=function(){for(var e in this.models={},this._modelsHandlers={},this.info.models)if(!this.models[e]){var t=ns.Model.get(e,this.params);this.models[e]=t,this._modelsHandlers[t.key]={}}},ns.View.prototype._getView=function(e){return this.views[e]},ns.View.prototype._addView=function(e,t,n){var r=this._getView(e);return r||(r=n===ns.L.BOX?new ns.Box(e,t):ns.View.create(e,t,n===ns.L.ASYNC),this.views[r.id]=r),r},ns.View.prototype.__onHtmldestroy=function(){this._unbindEvents("init")},ns.View.prototype._htmlinit=function(e){this._bindEvents("init"),e.push(this)},ns.View.prototype.hideAndUnbindEvents=function(){this.__onHide()},ns.View.prototype.__onHide=function(){!this.isLoading()&&!0===this._visible&&this._unbindEvents("show"),this._visible=!1},ns.View.prototype._show=function(e){return!this.isLoading()&&!this._visible&&(this.__modelsEventsBinded||this.__bindModelsEvents(),this._bindEvents("show"),this._visible=!0,e&&e.push(this),!0)},ns.View.prototype.__bindModelsEvents=function(){this.__modelsEventsBinded=!0;var e=this.models;for(var t in e){var n=e[t];this.__bindModelEvents(n)}},ns.View.prototype.__bindModelEvents=function(e){var t=this.info.models[e.id];for(var n in t){var r=t[n],o=this[r]||t[n];ns.View.assert("function"==typeof o,4,[this.id,r,e.id]),o===this.keepValid&&(o=no.nop),this.__bindModelEvent(e,n,this._invokeModelHandler.bind(this,o,e))}},ns.View.prototype._invokeModelHandler=function(e,t){return this._saveModelVersion(t.id),e.apply(this,Array.prototype.slice.call(arguments,2))},ns.View.prototype.__bindModelEvent=function(e,t,n){e.on(t,n),this._modelsHandlers[e.key][t]=n},ns.View.prototype.__unbindModelsEvents=function(){var e=this.models;for(var t in e){var n=e[t];this.__unbindModelEvent(n)}},ns.View.prototype.__unbindModelEvent=function(e){var t=this._modelsHandlers[e.key];for(var n in t)e.off(n,t[n]),delete t[n]},ns.View.prototype._prepareCallback=function(e){if("string"==typeof e){var t=this[e];return ns.View.assert(Boolean(t),5,[e,this.id]),t}return e},ns.View.prototype._bindEventHandlers=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r],s=[].concat(i);s[t]=this._prepareCallback(i[t]).bind(this),n.push(s)}return n},ns.View.prototype._getEvents=function(e){var t="_"+e+"Events";if(!this[t]){var n=this.info[e+"Events"],r=this.info[e+"Nsevents"];this[t]={bind:this._bindEventHandlers(n.bind,2),delegate:this._bindEventHandlers(n.delegate,2),nsevents:this._bindEventHandlers(r,1)}}return this[t]},ns.View.prototype._bindEvents=function(e){var t,n,r,o=this.$node,i=this._getEvents(e),s=i.delegate;for(t=0,n=s.length;t<n;t++)"window"===(r=s[t])[1]||"document"===r[1]?this["_$"+r[1]].on(r[0],r[2]):r[1]?o.on(r[0],r[1],r[2]):o.on(r[0],r[2]);var a=i.bind;for(t=0,n=a.length;t<n;t++)r=a[t],o.find(r[1]).on(r[0],r[2]);var u=i.nsevents;for(t=0,n=u.length;t<n;t++)r=u[t],ns.events.on(r[0],r[1])},ns.View.prototype._bindCreateEvents=function(){for(var e=0,t=this.info.createEvents.length;e<t;e++){var n=this.info.createEvents[e];this.on(n[0],this._prepareCallback(n[1]))}},ns.View.prototype._unbindEvents=function(e){var t,n,r,o=this.$node,i=this._getEvents(e),s=i.delegate;for(t=0,n=s.length;t<n;t++)"window"===(r=s[t])[1]||"document"===r[1]?this["_$"+r[1]].off(r[0],r[2]):r[1]?o.off(r[0],r[1],r[2]):o.off(r[0],r[2]);var a=i.bind;for(t=0,n=a.length;t<n;t++)r=a[t],o.find(r[1]).off(r[0],r[2]);var u=i.nsevents;for(t=0,n=u.length;t<n;t++)r=u[t],ns.events.off(r[0],r[1])},ns.View.prototype.invalidate=function(){for(var e=this._getDescendantsAndSelf(),t=0,n=e.length;t<n;t++){var r=e[t];r.status===this.STATUS.OK&&(r.status=this.STATUS.INVALID)}},ns.View.prototype.isOk=function(){return this.status===this.STATUS.OK},ns.View.prototype.isLoading=function(){return this.status===this.STATUS.LOADING},ns.View.prototype.isNone=function(){return this.status===this.STATUS.NONE},ns.View.prototype.isValid=function(){return this.isOk()&&this.isModelsValidWithVersions()},ns.View.prototype.isValidSelf=ns.View.prototype.isValid,ns.View.prototype.isValidWithDesc=function(){if(!this.isValid())return!1;for(var e in this.views)if(!this.views[e].isValidWithDesc())return!1;return!0},ns.View.prototype.isModelsValidWithVersions=function(){return this.isModelsValid(this._modelsVersions)},ns.View.prototype.isModelsValid=function(e){var t=this.models;for(var n in t){if(!t[n].isValid()||e&&this._getModelVersion(n)>e[n])return!1}return!0},ns.View.prototype.isVisible=function(){return this._visible},ns.View.prototype._apply=function(e){var t=this.views;for(var n in t)e(t[n],n)},ns.View.prototype._saveLayout=function(e){this.layout={},this.layout[this.id]={views:e}},ns.View.prototype._getRequestViews=function(e,t,n){var r=this.__evaluateState();this.__registerInUpdate(r,e);var o=!1;r&&(o=!0,"function"==typeof this.patchLayout&&(this.isModelsValid()?this.__patchLayout(t,n):(o=!1,e.hasPatchLayout=!0)));var i=t.views;if(this._saveLayout(i),o){for(var s in i)this._addView(s,n,i[s].type);var a=this.id;this._apply(function(t,r){var o=i[r];ns.View.assert(Boolean(o),13,[a]),t._getRequestViews(e,o,n)})}return e},ns.View.prototype.__patchLayout=function(e,t){e.views={};var n=this.patchLayout(t);ns.View.assert(Boolean(n),11);var r=ns.layout.page(n,t);this.__checkPatchLayout(r),no.extend(e.views,r)},ns.View.prototype.__checkPatchLayout=function(e){for(var t in e)ns.View.assert(e[t].type===ns.L.BOX,12)},ns.View.prototype.__evaluateState=function(){this.asyncState=!1;var e=!0;return this.async?this.shouldBeSync||this.isModelsValid()?e=!0:(this.asyncState=!0,e=!1):(this.isValidSelf()||this.invalidate(),e=!0),this.shouldBeSync=!1,e},ns.View.prototype.__registerInUpdate=function(e,t){e?t.sync.push(this):t.async.push(this)},ns.View.prototype._getUpdateTree=function(e){return this.isValid()?this._apply(function(t){t._getUpdateTree(e)}):e.views[this.id]=this._getViewTree(),e},ns.View.prototype._getCommonTree=function(){var e={box:this.info.isBox,collection:this.info.isCollection,id:this.id,key:this.key,models:{},params:this.params,state:this.asyncState?"loading":"ok",tree:{},uniqueId:this.__uniqueId,views:{}};return e.tree[this.id]=!0,e},ns.View.prototype._getTree=function(){var e=this._getCommonTree(),t=this.patchTree(e);return t&&"object"===a(t)&&!Array.isArray(t)&&(e=no.extend(t,e)),e},ns.View.prototype._getViewTree=function(){var e=this._getTree();return e.models=this._getModelsForTree(),"loading"===e.state?e:(this.isModelsValid()?e.views=this._getDescViewTree():e.state="error",e)},ns.View.prototype.patchTree=no.nop,ns.View.prototype._getDescViewTree=function(){var e={};return this._apply(function(t,n){e[n]=t._getViewTree()}),e},ns.View.prototype._getPlaceholderTree=function(){var e=this._getTree();return e.state="placeholder",this.info.isCollection?e.views=this._getDescViewTree():this._apply(function(t){t._getUpdateTree(e)}),e},ns.View.prototype._getModelsForTree=function(){var e={},t=this.models;for(var n in t){var r=t[n];e[n]={},r.isValid()?(e[n].status="ok",e[n][n]=r.getData()):(e[n].status="error",e[n][n]=r.getError())}return e},ns.View.prototype.getModel=function(e){return this.models[e]},ns.View.prototype.getModelData=function(e,t){var n=this.getModel(e);return t?n.get(t):n.getData()},ns.View.prototype._getDescendantsAndSelf=function(e){return(e=e||[]).push(this),this._apply(function(t){t._getDescendantsAndSelf(e)}),e},ns.View.prototype._setNode=function(e){var t=this.STATUS;e?(this.node=e,this.$node=$(e),this.status=this.asyncState?t.LOADING:t.OK):this.status=t.NONE},ns.View.prototype._extractNodeByKey=function(t){var n=t.querySelector('[data-key="'+this.key+'"]');if(!n)return null;var r=n.className;return-1===r.indexOf(this.__uniqueId)&&(n.className=r.replace(e,this.__uniqueId)),n},ns.View.prototype._extractNode=function(e){var t=ns.byClass(this.__uniqueId,e)[0];return t&&t.getAttribute("data-key")===this.key||(t=this._extractNodeByKey(e)),t},ns.View.prototype._selfBeforeUpdateHTML=function(e,t){t?!0===this._visible&&!this.isLoading()&&e["ns-view-hide"].push(this):!this.isValidSelf()&&this.node&&!this.isLoading()&&(!0===this._visible&&e["ns-view-hide"].push(this),e["ns-view-htmldestroy"].push(this))},ns.View.prototype.beforeUpdateHTML=function(e,t){this._selfBeforeUpdateHTML(e,t),this.asyncState||this._apply(function(n){n.beforeUpdateHTML(e,t)})},ns.View.prototype._updateHTML=function(e,t,n){var r,o;r=t.toplevel?no.extend({},t):t;var i=e?this._extractNode(e):null,s=!this.isValid(),a=this.isValid()&&this.node&&i&&i!==this.node&&t.parent_added&&!t.toplevel;(s||a)&&(o=i,ns.View.assert(Boolean(o),6,[this.id]),t.toplevel&&(this.node&&(ns.replaceNode(this.node,o),r.parent_added=!0),r.toplevel=!1),this.node&&!this.isLoading()&&(this.__onHide(),this.__onHtmldestroy()),!this.node||t.parent_added||r.parent_added||ns.replaceNode(this.node,o),this._setNode(o),this.isOk()?this._htmlinit(n["ns-view-htmlinit"]):this.isLoading()&&n["ns-view-async"].push(this),this._saveModelsVersions()),this.isOk()&&(this._show(n["ns-view-show"]),n["ns-view-touch"].push(this)),o=o||e,this.asyncState||this._apply(function(e){e._updateHTML(o,r,n)})},ns.View.prototype._saveModelsVersions=function(){for(var e in this.models)this._saveModelVersion(e)},ns.View.prototype._getModelVersion=function(e){return this.models[e].getVersion()},ns.View.prototype._saveModelVersion=function(e){this._modelsVersions[e]=this._getModelVersion(e)},ns.View.prototype.keepValid=ns.View.prototype._saveModelsVersions,ns.View.prototype.updateAfter=function(e,t,n){this._asyncPromise=new Vow.Promise;var r=this;return e.then(function(){r.update(t,{parentUpdate:n,timers:n.getTimers()})}),this._asyncPromise},ns.View.prototype.update=function(e,t){this.shouldBeSync=!0;var n=this.params;if(e&&(n=no.extend({},this.params,e)),!this.layout){var r="ns-temp-layout-for-"+this.id,o={};o[this.id]={},ns.layout.define(r,o),this.layout=ns.layout.page(r,n),ns.layout.undefine(r)}(t=t||{}).execFlag=t.execFlag||ns.U.EXEC.ASYNC;var i=new ns.Update(this,this.layout,n,t).render();return this._asyncPromise&&this._asyncPromise.sync(i),i},ns.View.prototype.destroy=function(){this._apply(function(e){e.destroy()}),this.trigger("ns-view-destroyed"),this.views={},this.node&&!this.isLoading()&&(this.isVisible()&&(this.trigger("ns-view-hide"),this.hideAndUnbindEvents()),this.trigger("ns-view-htmldestroy"),this.__onHtmldestroy()),this.__unbindModelsEvents(),this.node&&(this.$node.off().removeData().remove(),this.node=null,this.$node=null),this.info=null,this.layout=null,this.models=null,this.params=null,this.status=this.STATUS.NONE,this.destroyed=!0,this._modelsHandlers=null};var t={},n={};ns.View.define=function(e,r,o){ns.View.assert(!(e in t),1,[e]),r=r||{};var i=this;"string"==typeof o?(i=n[o],ns.View.assert(Boolean(i),2,[o,e])):"function"==typeof o&&(i=o);var s=r.ctor||function(){};return s=no.inherit(s,i,r.methods),r.models=this._formatModelsDecl(r.models||{}),r.events=r.events||{},r.isBox=!1,r.isCollection=!1,r.ready=!1,t[e]=r,n[e]=s,s},ns.View._reset=function(){n={},t={}},ns.View.infoLite=function(e){var n=t[e];return ns.View.assert(Boolean(n),3,[e]),n},ns.View.info=function(e){var t=ns.View.infoLite(e);return t.ready||(ns.View._initInfoParams(t),ns.View._initInfoEvents(t),t.ready=!0),t},ns.View._initInfoParams=function(e){if(e.params){if(ns.View.assert(!e["params+"],7),ns.View.assert(!e["params-"],8),"function"==typeof e.params)return void(e.pGroups=[]);var t,n=[];t=Array.isArray(e.params)?e.params:[e.params];for(var r=0;r<t.length;r++){var o=t[r];n.push({pNames:Object.keys(o),pFilters:o,pDefaults:{}})}e.pGroups=n}else{var i={};for(var s in e.models){var u=ns.Model.info(s);ns.View.assert(Boolean(u),9,[s]),"object"===a(u.params)&&no.extend(i,u.params)}var c=e["params-"];if(c){for(r=0;r<c.length;r++)delete i[c[r]];delete e["params-"]}e["params+"]&&(no.extend(i,e["params+"]),delete e["params+"]);var l=Object.keys(i);l.length?e.pGroups=[{pNames:l,pFilters:{},pDefaults:i}]:e.pGroups=[]}},ns.View._initInfoEvents=function(e){for(var t in e.createEvents=[],e.initEvents={bind:[],delegate:[]},e.showEvents={bind:[],delegate:[]},e.initNsevents=[],e.showNsevents=[],e.events){var n=t.split(" "),r=n.shift().split("@"),o=r.length>1?r.pop():"";o=!o||"init"!==o&&"show"!==o?"":o;var i=r.join("@"),s=n.join(" ");if(i){var a=e.events[t];if(ns.V.DOM_EVENTS.indexOf(i)>-1){var u=[i,s,e.events[t]],c="window"===s||"document"===s,l=c||!("scroll"===i&&s);o||(o=c?"show":"init"),e[o+"Events"][l?"delegate":"bind"].push(u)}else ns.V.NS_EVENTS.indexOf(i)>-1?e.createEvents.push([i,a]):e[(o=o||"show")+"Nsevents"].push([i,a])}}},ns.View.getKey=function(e,t,n){return this.getKeyAndParams(e,t,n).key},ns.View.getKeyAndParams=function(e,t,n){var r;return r="function"==typeof(n=n||ns.View.info(e)||{}).params?n.params(no.extend({},t)):ns.View._getKeyParams(e,t,n),"function"==typeof n.paramsRewrite&&(r=n.paramsRewrite(r)),ns.View.assert(Boolean(r),10,[e]),{params:r,key:ns.key("view="+e,r)}},ns.View._getKeyParams=function(e,t,n){var r={},o=!1;for(var i in n.models){var s=ns.Model.info(i);"function"==typeof s.params&&(o=!0,no.extend(r,s.params(t)))}o&&(no.extend(r,t),t=r);var a=n.pGroups||[];if(!a.length)return o?t:{};for(var u=0;u<a.length;u++){for(var c=a[u],l=c.pNames||[],f=c.pFilters||{},p=c.pDefaults||{},d={},h=0,v=l.length;h<v;h++){var y=l[h],m=t[y],g=f[y],_=y in p;if(null!=(m=void 0===m?p[y]:m)||!_){if(null==m||g&&m!==g){d=null;break}d[y]=m}}if(d)return d}return null},ns.View.create=function(e,t,r){var o=n[e];ns.View.assert(Boolean(o),3,[e]);var i=new o;return i._init(e,t,r),i},ns.View.assert=function(e,t,n){if(!e){n=Array.isArray(n)?n:[];var r=["ns.View",ns.View.ERROR_CODES[t]].concat(n);ns.assert.fail.apply(ns,r)}},ns.View.ERROR_CODES={1:"Can't redefine '%s'",2:"Can't find '%s' to extend '%s'",3:"'%s' is not defined",4:"'%s' can't find handler '%s' for model '%s'",5:"Can't find method '%s' in '%s'",6:"Can't find node for '%s'",7:"you cannot specify params and params+ at the same time",8:"you cannot specify params and params- at the same time",9:"Model %s is not defined!",10:"Could not generate key for view %s",11:"#patchLayout MUST returns valid layout ID",12:"#patchLayout MUST returns layout with ns.Box at top",13:'You cannot change children inside of a regular view. Maybe "%s" should be ns.Box.'},ns.View.defaultModelEvents={"ns-model-insert":"invalidate","ns-model-remove":"invalidate","ns-model-changed":"invalidate","ns-model-destroyed":"invalidate"},ns.View._expandModelsDecl=function(e){if(!Array.isArray(e))return e;for(var t={},n=0,r=e.length;n<r;n++)t[e[n]]=no.extend({},this.defaultModelEvents);return t},ns.View._formatModelsDecl=function(e){var t=this._expandModelsDecl(e);for(var n in t){var o=r(t[n]),i=null;for(var s in"string"==typeof o&&(i=o,o={}),this.defaultModelEvents){var a=this.defaultModelEvents[s];void 0===o[s]?o[s]=i||a:o[s]=r(o[s])}t[n]=o}return t};var r=function(e){return!0===e?"invalidate":!1===e?"keepValid":e};ns.View.prototype.logTimings=function(e,t){var n=ns.Update.calcPerformanceTimings(e),r={allTime:0,requestTime:0,selfTime:0};e.__parent&&(r=ns.Update.calcPerformanceTimings(e.__parent));var i={blockname:this.id,request:n.requestTime+r.requestTime,event:"BlockTimings",visibilityState:document.visibilityState,show:n.allTime+r.allTime,browser:Daria.UA.BrowserName};if(i=s()(n,i),Jane.ErrorLog.send(i),Jane.watcher.get("pageVisible")){t=[o.a.ru,o.a.mail,o.a.desktop,o.a.block].concat(t);var a=Ya.Rum.makeSubPage(t.join("."));Ya.Rum.sendDelta(o.a.request,i.request,a),Ya.Rum.sendDelta(o.a.render,i.selfTime,a),Ya.Rum.sendDelta(o.a.show,i.show,a)}},ns.View.prototype.updateByLayout=function(e,t,n){var r=ns.layout.page(e,t);if((n=n||{}).execFlag=n.execFlag||ns.U.EXEC.ASYNC,this.layout){var o=this.layout[this.id].views;for(var i in o)delete o[i];no.extend(o,r[this.id].views)}else this.layout=r;return new ns.Update(this,this.layout,t,n).render()},ns.View.prototype.forceUpdate=function(){this.info&&!this.info.isCollection&&this.invalidate(),this.lazyUpdate()},ns.View.prototype.lazyUpdate=function(){this.isVisible()&&ns.page.lazyRefresh()},ns.View.isDefined=function(e){var t=!1;try{ns.View.infoLite(e)&&(t=!0)}catch(e){}return t};var i=Math.floor(100*Math.random());ns.View.prototype.__setUniqueId=function(){this.__uniqueId||(this.__uniqueId="ns-view-id-"+ ++i)},ns.View.prototype.patchTree=function(){return{bosphorus:this}}}()},4514:function(e,t,n){"use strict";e.exports={after:791,block:2314,body:1784,content_block:2923,desktop:2048,direct:155,end:1428,"first-meaningful-paint":3178,hero_element:2876,left:1202,mail:176,message:1304,messages:2389,render:2046,request:1401,rtb:3431,ru:28,show:487,start:2154,tiny:151,top:77,write:1206}},4515:function(e,t,n){e.exports=n(4516)},4516:function(e,t,n){var r=n(411),o=n(1476),i=n(419),s=o(function(e,t){r(t,i(t),e)});e.exports=s},4517:function(e,t){ns.ViewCollection=function(){},no.extend(ns.ViewCollection,ns.View),no.inherit(ns.ViewCollection,ns.View),ns.ViewCollection.define=function(e,t,n){t=t||{},n=n||this;var r=ns.View.define.call(this,e,t,n);if(ns.assert(t.split,"ns.ViewCollection","'%s'  must define 'split' section",e),ns.assert(!(t.split.intoViews&&t.split.intoLayouts),"ns.ViewCollection","'%s' can't define 'split.intoViews' and 'split.intoLayouts' sections at same time",e),"string"==typeof t.split.intoViews){var o=ns.layout.generateSimple(t.split.intoViews,"ns-auto-layout-"+e);delete t.split.intoViews,t.split.intoLayouts=new Function("",'return "'+o+'"')}else"function"==typeof t.split.intoViews&&(t.split.intoLayouts=function(n,r){var o=t.split.intoViews.call(this,n,r);return o?ns.layout.generateSimple(o,"ns-auto-layout-"+e):null});ns.assert(t.split.intoLayouts,"ns.ViewCollection","'%s'  must define 'split.intoLayouts' section",e),ns.assert(t.split.byModel,"ns.ViewCollection","'%s'  must define 'split.byModel' section",e);var i=t.split.byModel in t.models&&ns.Model.infoLite(t.split.byModel).isCollection;return ns.assert(i,"ns.ViewCollection","'%s'  must depend on ns.ModelCollection",e),t.isCollection=!0,t.modelCollectionId=t.split.byModel,r},ns.ViewCollection.prototype.__customInit=function(){this.__itemsToRemove=[],this.__model2View={},this.__view2ModelKey={}},ns.ViewCollection.eventsModelCollectionDefault={"ns-model-insert":"keepValid","ns-model-remove":"keepValid","ns-model-changed":"invalidate","ns-model-destroyed":"invalidate"},ns.ViewCollection._expandModelsDecl=function(e){if(!Array.isArray(e))return e;for(var t={},n=0,r=e.length;n<r;n++){var o=e[n];ns.Model.infoLite(o).isCollection?t[o]=no.extend({},this.eventsModelCollectionDefault):t[o]=no.extend({},this.defaultModelEvents)}return t},ns.ViewCollection.prototype._invokeModelHandler=function(e,t,n,r){if(!r||!r.model)return this._saveModelVersion(t.id),e.apply(this,Array.prototype.slice.call(arguments,2))},ns.ViewCollection.prototype._getModelVersion=function(e){var t=this.models[e];return e===this.info.modelCollectionId?t.getSelfVersion():t.getVersion()},ns.ViewCollection.prototype.forEachItem=function(e){var t=this.models[this.info.modelCollectionId];if(t.isValid())for(var n=t.models,r=0,o=n.length;r<o;r++){var i=this.getItemByModel(n[r]);i&&e(i)}},ns.ViewCollection.prototype.getItemByModel=function(e){var t=e.key;return this.__model2View[t]},ns.ViewCollection.prototype.isValid=function(){return this.isValidSelf()&&this.isValidDesc()},ns.ViewCollection.prototype.isValidDesc=function(){for(var e in this.views)if(!this.views[e].isValid())return!1;return!0},ns.ViewCollection.prototype.invalidate=function(){this.status===this.STATUS.OK&&(this.status=this.STATUS.INVALID)},ns.ViewCollection.prototype.invalidateAll=ns.View.prototype.invalidate,ns.ViewCollection.prototype._getView=function(e,t){var n=ns.View.getKey(e,t);return this._getViewByKey(n)},ns.ViewCollection.prototype._getViewByKey=function(e){return this.views&&this.views[e]||null},ns.ViewCollection.prototype._addView=function(e,t,n){var r=this._getView(e,t);if(!r){var o=(r=ns.View.create(e,t)).key,i=n.key;this.views[o]=r,this.__model2View[i]=r,this.__view2ModelKey[o]=i}return r},ns.ViewCollection.prototype._deleteView=function(e){var t=e.key,n=this.__view2ModelKey[t];delete this.views[t],delete this.__model2View[n],delete this.__view2ModelKey[t]},ns.ViewCollection.prototype._apply=function(e){var t=this.views;for(var n in t)e(t[n],t[n].id)},ns.ViewCollection.prototype._getRequestViews=function(e,t,n){var r=t.views,o=this.__evaluateState();if(this.__registerInUpdate(o,e),o){var i=this.models[this.info.modelCollectionId],s={};if(i.isValid()){for(var a=i.models,u=this.info.split.intoLayouts,c=[],l=0,f=a.length;l<f;l++){var p=a[l],d=no.extend({},n,p.params),h=u.call(this,p,d);if(h){var v=ns.layout.page(h,d);for(var y in c.push(v),v){var m=this._addView(y,d,p);m._getRequestViews(e,v[y],d),s[m.key]=null}}}r["ns-view-container"]=c,this.__collectInactiveViews(s)}else e.hasPatchLayout=!0}return this._saveLayout(r),e},ns.ViewCollection.prototype.__collectInactiveViews=function(e){var t=this;this._apply(function(n){n.key in e||(t._deleteView(n),t.__itemsToRemove.push(n))})},ns.ViewCollection.prototype.__destroyInactiveViews=function(){for(var e=this.__itemsToRemove,t=0,n=e.length;t<n;t++)e[t].destroy();this.__itemsToRemove=[]},ns.ViewCollection.prototype._getUpdateTree=function(e){var t;return t=this.isValidSelf()?this._getPlaceholderTree():this._getViewTree(),e.views[this.id]=t,e},ns.ViewCollection.prototype._getDescViewTree=function(){var e={"ns-view-collection-container":[]},t=this.isValidSelf();return this.forEachItem(function(n){var r=null;if(t)if(n.info.isCollection&&n.isValidSelf())r=n._getPlaceholderTree();else if(n.isValid()){if(!n.isValidWithDesc()){var o={views:{}};return n._getUpdateTree(o),void e["ns-view-collection-container"].push(o.views)}}else r=n._getViewTree();else r=n.isValidSelf()?n._getPlaceholderTree():n._getViewTree();if(r){var i={};i[n.id]=r,e["ns-view-collection-container"].push(i)}}),e},ns.ViewCollection.prototype._updateHTML=function(e,t,n){var r,o=this._extractNode(e),i=$(o).hasClass("ns-view-placeholder");if(r=t.toplevel?no.extend({},t):t,this.isValidSelf())!t.toplevel&&i&&(ns.replaceNode(o,this.node),(r=no.extend({},t)).toplevel=!0,r.parent_added=!0);else{var s=Boolean(this.node);if(!o)throw new Error("[ns.ViewCollection] Can't find node for '"+this.id+"'");t.toplevel?i?r.toplevel=!0:(this.node&&ns.replaceNode(this.node,o),r.toplevel=!1,r.parent_added=!0,this._setNode(o)):i?(ns.replaceNode(o,this.node),r.toplevel=!1,r.parent_added=!0):this._setNode(o),s&&!this.isLoading()&&(this.__onHide(),this.__onHtmldestroy()),this.isOk()?this._htmlinit(n["ns-view-htmlinit"]):this.isLoading()&&n["ns-view-async"].push(this)}if(this.isOk()&&(this._show(n["ns-view-show"]),n["ns-view-touch"].push(this),this._saveModelsVersions()),!this.isLoading()){var a,u={},c=this.__getContainer();o=o||this.node,this.forEachItem(function(e){if(i){var t=!e.isValid();e._updateHTML(o,r,n),t&&(a?$(a.node).after(e.node):$(c).prepend(e.node))}else{var s=e.isValid(),l=r;s&&((l=no.extend({},r)).toplevel=!0),e._updateHTML(o,l,n),s&&ns.replaceNode(e._extractNode(o),e.node)}u[e.key]=e,a=e})}this.__destroyInactiveViews(),this.isLoading()||this.__sortViewItems()},ns.ViewCollection.prototype.__getContainer=function(){var e;return e=ns.hasClass(this.node,"ns-view-container-desc")?this.node:ns.byClass("ns-view-container-desc",this.node)[0],ns.assert(e,"ns.ViewCollection","Can't find descendants container (.ns-view-container-desc element) for '"+this.id+"'"),e},ns.ViewCollection.prototype.__sortViewItems=function(){var e=this.__getContainer(),t=ns.childrenIterator(e);this.forEachItem(function(n){var r=t.getNext();r!==n.node&&(r?e.insertBefore(n.node,r):e.appendChild(n.node))})},ns.ViewCollection.prototype.forEachValidItem=function(e){this.forEachItem(function(t){t.isValid()&&e(t)})}},4518:function(e,t){[ns.View,ns.ViewCollection].forEach(function(e){e.edefine=function(t,n){return n=function(e,t){return t.forEach(function(t){if("string"==typeof t){var n=ns.View.info(t);e.events=no.extend({},n.events,e.events)}}),t.slice(0,t.length-1).forEach(function(t){if("string"==typeof t){var n=ns.View.info(t);e.methods=no.extend({},n.methods,e.methods)}}),e}(n=n||{},Array.prototype.slice.call(arguments,2)),e.define(t,n,arguments[arguments.length-1])}})},4519:function(e,t,n){var r=n(1472),o=n(4520),i=n(4521),s=n(4522),a=n(666),u=n(4523),c=n(414),l=n(1069),f=n(1474),p=n(711),d=n(4524),h=n(4529),v=n(4531),y=n(4533),m=n(4550),g=n(4551),_=["methods","ctor","events","models"],w=["ctor","events","models"],b=v(d),x=y(u,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.shift();e.apply(void 0,[window,"console.warn","[ns.View.define] "+o].concat(n))}),E=y(u,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=n.shift();e.apply(void 0,[window,"console.log","[ns.View.define] "+o].concat(n))});function S(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=e&&(c(e)?e.apply(this,r):u.apply(void 0,[this,e].concat(r))),s=t&&(c(t)?t.apply(this,r):u.apply(void 0,[this,t].concat(r)));!ns.DEBUG||f(i)&&f(s)||x("Обработчик события не должен возвращать результат")}function M(e,t,n){return A(e,t)?t:(("invalidate"===e&&"keepValid"===t||"keepValid"===e&&"invalidate"===t)&&ns.assert.fail("ns.View.define","Попытка определить подписки с противоположными действиями. Событие: %s",n),y(e,y(t,S)))}function T(e,t){return A(e,t)?t:d(e,t,M)}function j(e,t){return A(e,t)?t:e}function V(e){return l(e)&&ns.View.info(e)||e}function A(e,t){return f(e)||e===t}function C(e,t,n){var u=V((n=r(n)).pop()),c=function(e,t,n){return A(e,t)?t:"methods"===n?d(e,t,j):"events"===n?T(e,t):"models"===n?d(this._formatModelsDecl(e),this._formatModelsDecl(t),T):"ctor"===n?function(){t&&t.call(this),e&&e.call(this)}:void 0}.bind(e),l=a(t,"mixins",[]);return l=o(l,n),(l=i(l)).unshift(t),(l=m(l,function(e){return h(V(e),_)})).push(c),l=g(l,b),l=d(l,h(u,w),c),l=s(l,t)}[ns.View,ns.ViewCollection].forEach(function(e){e.defineNg=function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return ns.DEBUG&&E("Определение вида %s, mixins: %o, %o",t,o,a(n,"mixins",[])),e.define(t,C(e,n,o),p(o))},e.defineModelEvents=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s({},t,a(e._formatModelsDecl({test:n}),"test"))}})},452:function(e,t,n){var r=n(1013),o=n(1022),i=n(403),s=n(344),a=n(1025);e.exports=function(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):r(e):a(e)}},4520:function(e,t,n){var r=n(402),o=n(536),i=n(469),s=n(344);e.exports=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],a=e;a--;)t[a-1]=arguments[a];return r(s(n)?i(n):[n],o(t,1))}},4521:function(e,t){var n=Array.prototype.reverse;e.exports=function(e){return null==e?e:n.call(e)}},4522:function(e,t,n){var r=n(475),o=n(387),i=n(746),s=n(419),a=Object.prototype,u=a.hasOwnProperty,c=r(function(e,t){e=Object(e);var n=-1,r=t.length,c=r>2?t[2]:void 0;for(c&&i(t[0],t[1],c)&&(r=1);++n<r;)for(var l=t[n],f=s(l),p=-1,d=f.length;++p<d;){var h=f[p],v=e[h];(void 0===v||o(v,a[h])&&!u.call(e,h))&&(e[h]=l[h])}return e});e.exports=c},4523:function(e,t,n){var r=n(1475),o=n(475)(r);e.exports=o},4524:function(e,t,n){var r=n(4525),o=n(1476)(function(e,t,n,o){r(e,t,n,o)});e.exports=o},4525:function(e,t,n){var r=n(445),o=n(1477),i=n(745),s=n(4526),a=n(353),u=n(419),c=n(1478);e.exports=function e(t,n,l,f,p){t!==n&&i(n,function(i,u){if(p||(p=new r),a(i))s(t,n,u,l,e,f,p);else{var d=f?f(c(t,u),i,u+"",t,n,p):void 0;void 0===d&&(d=i),o(t,u,d)}},u)}},4526:function(e,t,n){var r=n(1477),o=n(708),i=n(709),s=n(469),a=n(710),u=n(400),c=n(344),l=n(4527),f=n(408),p=n(414),d=n(353),h=n(987),v=n(425),y=n(1478),m=n(4528);e.exports=function(e,t,n,g,_,w,b){var x=y(e,n),E=y(t,n),S=b.get(E);if(S)r(e,n,S);else{var M=w?w(x,E,n+"",e,t,b):void 0,T=void 0===M;if(T){var j=c(E),V=!j&&f(E),A=!j&&!V&&v(E);M=E,j||V||A?c(x)?M=x:l(x)?M=s(x):V?(T=!1,M=o(E,!0)):A?(T=!1,M=i(E,!0)):M=[]:h(E)||u(E)?(M=x,u(x)?M=m(x):d(x)&&!p(x)||(M=a(E))):T=!1}T&&(b.set(E,M),_(M,E,g,w,b),b.delete(E)),r(e,n,M)}}},4527:function(e,t,n){var r=n(364),o=n(356);e.exports=function(e){return o(e)&&r(e)}},4528:function(e,t,n){var r=n(411),o=n(419);e.exports=function(e){return r(e,o(e))}},4529:function(e,t,n){var r=n(4530),o=n(988)(function(e,t){return null==e?{}:r(e,t)});e.exports=o},4530:function(e,t,n){var r=n(1048),o=n(735);e.exports=function(e,t){return r(e,t,function(t,n){return o(e,n)})}},4531:function(e,t,n){var r=n(449),o=n(402),i=n(475),s=n(4532),a=n(549),u="Expected a function",c=Math.max;e.exports=function(e,t){if("function"!=typeof e)throw new TypeError(u);return t=null==t?0:c(a(t),0),i(function(n){var i=n[t],a=s(n,0,t);return i&&o(a,i),r(e,this,a)})}},4532:function(e,t,n){var r=n(712);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},4533:function(e,t,n){var r=n(1473),o=n(4534);e.exports=function(e,t){return o(r(t),e)}},4534:function(e,t,n){var r=n(475),o=n(4535),i=n(1072),s=n(751),a=r(function(e,t){var n=s(t,i(a));return o(e,32,void 0,t,n)});a.placeholder={},e.exports=a},4535:function(e,t,n){var r=n(1479),o=n(4536),i=n(4537),s=n(1481),a=n(4548),u=n(1485),c=n(4549),l=n(1487),f=n(1488),p=n(549),d="Expected a function",h=1,v=2,y=8,m=16,g=32,_=64,w=Math.max;e.exports=function(e,t,n,b,x,E,S,M){var T=t&v;if(!T&&"function"!=typeof e)throw new TypeError(d);var j=b?b.length:0;if(j||(t&=~(g|_),b=x=void 0),S=void 0===S?S:w(p(S),0),M=void 0===M?M:p(M),j-=x?x.length:0,t&_){var V=b,A=x;b=x=void 0}var C=T?void 0:u(e),k=[e,t,n,b,x,V,A,E,S,M];if(C&&c(k,C),e=k[0],t=k[1],n=k[2],b=k[3],x=k[4],!(M=k[9]=void 0===k[9]?T?0:e.length:w(k[9]-j,0))&&t&(y|m)&&(t&=~(y|m)),t&&t!=h)O=t==y||t==m?i(e,t,M):t!=g&&t!=(h|g)||x.length?s.apply(void 0,k):a(e,t,n,b);else var O=o(e,t,n);return f((C?r:l)(O,k),e,t)}},4536:function(e,t,n){var r=n(750),o=n(346),i=1;e.exports=function(e,t,n){var s=t&i,a=r(e);return function t(){return(this&&this!==o&&this instanceof t?a:e).apply(s?n:this,arguments)}}},4537:function(e,t,n){var r=n(449),o=n(750),i=n(1481),s=n(1484),a=n(1072),u=n(751),c=n(346);e.exports=function(e,t,n){var l=o(e);return function o(){for(var f=arguments.length,p=Array(f),d=f,h=a(o);d--;)p[d]=arguments[d];var v=f<3&&p[0]!==h&&p[f-1]!==h?[]:u(p,h);return(f-=v.length)<n?s(e,t,i,o.placeholder,void 0,p,v,void 0,void 0,n-f):r(this&&this!==c&&this instanceof o?l:e,this,p)}}},4538:function(e,t){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},4539:function(e,t,n){var r=n(1070),o=n(1485),i=n(4540),s=n(4542);e.exports=function(e){var t=i(e),n=s[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var a=o(n);return!!a&&e===a[0]}},454:function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},4540:function(e,t,n){var r=n(4541),o=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],i=o.call(r,t)?n.length:0;i--;){var s=n[i],a=s.func;if(null==a||a==e)return s.name}return t}},4541:function(e,t){e.exports={}},4542:function(e,t,n){var r=n(1070),o=n(1486),i=n(1071),s=n(344),a=n(356),u=n(4543),c=Object.prototype.hasOwnProperty;function l(e){if(a(e)&&!s(e)&&!(e instanceof r)){if(e instanceof o)return e;if(c.call(e,"__wrapped__"))return u(e)}return new o(e)}l.prototype=i.prototype,l.prototype.constructor=l,e.exports=l},4543:function(e,t,n){var r=n(1070),o=n(1486),i=n(469);e.exports=function(e){if(e instanceof r)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=i(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},4544:function(e,t){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},4545:function(e,t){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var o=r-1;return t[o]=(r>1?"& ":"")+t[o],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}},4546:function(e,t,n){var r=n(646),o=n(1042),i=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(i,function(n){var r="_."+n[0];t&n[1]&&!o(e,r)&&e.push(r)}),e.sort()}},4547:function(e,t,n){var r=n(469),o=n(409),i=Math.min;e.exports=function(e,t){for(var n=e.length,s=i(t.length,n),a=r(e);s--;){var u=t[s];e[s]=o(u,n)?a[u]:void 0}return e}},4548:function(e,t,n){var r=n(449),o=n(750),i=n(346),s=1;e.exports=function(e,t,n,a){var u=t&s,c=o(e);return function t(){for(var o=-1,s=arguments.length,l=-1,f=a.length,p=Array(f+s),d=this&&this!==i&&this instanceof t?c:e;++l<f;)p[l]=a[l];for(;s--;)p[l++]=arguments[++o];return r(d,u?n:this,p)}}},4549:function(e,t,n){var r=n(1482),o=n(1483),i=n(751),s="__lodash_placeholder__",a=1,u=2,c=4,l=8,f=128,p=256,d=Math.min;e.exports=function(e,t){var n=e[1],h=t[1],v=n|h,y=v<(a|u|f),m=h==f&&n==l||h==f&&n==p&&e[7].length<=t[8]||h==(f|p)&&t[7].length<=t[8]&&n==l;if(!y&&!m)return e;h&a&&(e[2]=t[2],v|=n&a?0:c);var g=t[3];if(g){var _=e[3];e[3]=_?r(_,g,t[4]):g,e[4]=_?i(e[3],s):t[4]}return(g=t[5])&&(_=e[5],e[5]=_?o(_,g,t[6]):g,e[6]=_?i(e[5],s):t[6]),(g=t[7])&&(e[7]=g),h&f&&(e[8]=null==e[8]?t[8]:d(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}},455:function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},4550:function(e,t,n){var r=n(407),o=n(452),i=n(1056),s=n(344);e.exports=function(e,t){return(s(e)?r:i)(e,o(t,3))}},4551:function(e,t){e.exports=function(e,t){return t(e)}},4552:function(e,t){ns.Box=function(e,t){this.id=e,this.__setUniqueId(),this.params=t,this.views={},this.key=ns.Box.getKey(e),this.node=null,this.active={},this._visible=!1,this.destroyed=!1,this.info={isBox:!0,isCollection:!1}},ns.Box.prototype._getViewKey=function(e,t,n){return n===ns.L.BOX?ns.Box.getKey(e):ns.View.getKey(e,t)},ns.Box.prototype._getView=function(e,t,n){var r=this._getViewKey(e,t,n);return this.views[r]},ns.Box.prototype._addView=function(e,t,n){var r=this._getView(e,t,n);return r||(r=n===ns.L.BOX?new ns.Box(e,t):ns.View.create(e,t,n===ns.L.ASYNC),this.views[r.key]=r),r},ns.Box.prototype._getDescendantsAndSelf=function(e){var t=this.views;for(var n in e.push(this),t){t[n]._getDescendantsAndSelf(e)}return e},ns.Box.prototype._getRequestViews=function(e,t,n){var r=t.views,o={};for(var i in r){var s=r[i],a=this._addView(i,n,s.type);a._getRequestViews(e,s,n),o[i]=a.key}this.active=o},ns.Box.prototype._getUpdateTree=function(e){if(this.isNone())e.views[this.id]=this._getViewTree();else for(var t in this.active){var n=this.active[t];this.views[n]._getUpdateTree(e)}},ns.Box.prototype._getViewTree=function(){var e=this._getCommonTree();for(var t in this.active){var n=this.active[t];e.views[t]=this.views[n]._getViewTree()}return e},ns.Box.prototype.beforeUpdateHTML=function(e,t){for(var n in this.views){var r=this.views[n],o=t||this.active[r.id]!==r.key;r.beforeUpdateHTML(e,o)}},ns.Box.prototype._hideInactiveViews=function(){for(var e in this.views){var t=this.views[e];if(this.active[t.id]!==t.key){t.node&&ns.removeNode(t.node);for(var n=t._getDescendantsAndSelf([]),r=0,o=n.length;r<o;r++)n[r].hideAndUnbindEvents()}}},ns.Box.prototype._updateHTML=function(e,t,n){var r;if(!this.node||!t.toplevel){var o=ns.byClass("ns-view-"+this.id,e)[0];o&&(r=this.node,this.node=o,this._visible=!1)}if(!this.node)throw new Error("[ns.Box] Can't find node for '"+this.id+"'");this._hideInactiveViews();var i=this.views,s=this.active;for(var a in s){i[s[a]]._updateHTML(e,t,n)}this._transferViewsToNewNode(r),this._sortViewNodes(),this._show()},ns.Box.prototype._sortViewNodes=function(){var e=this.active,t=this.views,n=ns.childrenIterator(this.node);for(var r in e){var o=t[e[r]],i=n.getNext();i!==o.node&&(i?this.node.insertBefore(o.node,i):this.node.appendChild(o.node))}},ns.Box.prototype._transferViewsToNewNode=function(e){if(e){var t=this.views;for(var n in t){var r=t[n];if(this.active[r.id]!==r.key){var o=r.node;e.contains(o)&&this.node.appendChild(o)}}}},ns.Box.prototype._show=function(){return!1===this._visible&&(this._visible=!0),!1},ns.Box.prototype.hideAndUnbindEvents=function(){!0===this._visible&&(this._visible=!1)},ns.Box.prototype.isNone=function(){return!this.node},ns.Box.prototype.isValid=function(){return Boolean(this.node)},ns.Box.prototype.destroy=function(){var e=this.views;for(var t in e)e[t].destroy();this.node&&($(this.node).off().removeData().remove(),this.node=null,this.$node=null),this.active=null,this.key=null,this.params=null,this.views=null,this._visible=!1,this.destroyed=!0},ns.Box.prototype.__setUniqueId=ns.View.prototype.__setUniqueId,ns.Box.prototype._getCommonTree=ns.View.prototype._getCommonTree,ns.Box.prototype.isValidWithDesc=ns.View.prototype.isValidWithDesc,ns.Box.prototype.isOk=no.true,ns.Box.prototype.isLoading=no.false,ns.Box.getKey=function(e){return"box="+e}},4553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nsModelCallHelper=i;var r=n(2);n.n(r);function o(e,t,n,o,i,a,u){return s(function(e,t,n,o,i,s,a){try{return e[t](n,o,i,s,a)}catch(n){return ns.log.error({name:e.id,key:e.key,method:t,sourceMethod:r.ErrorSourceMethod.NsView},n),[]}}(yr.nodeset2data(e).bosphorus,t,n,o,i,a,u))}function i(e,t,n,o,i,a,u,c){var l=yr.nodeset2data(e).bosphorus,f=l.getModel(t);return ns.assert(f,"noscript-bosphorus","Model is undefined"),s(function(e,t,n,o,i,s,a,u){try{return t[n](o,i,s,a,u)}catch(o){return ns.log.error({name:e.id,key:e.key,method:n,model:t.id,sourceMethod:r.ErrorSourceMethod.NsModel},o),[]}}(l,f,n,o,i,a,u,c))}function s(e){return Array.isArray(e)?yr.array2nodeset(e):yr.object2nodeset(e)}yr.externals["ns-url"]=function(e){return ns.router.url(e)},yr.externals["ns-generate-url"]=function(e,t){return ns.router.generateUrl(e,t)},yr.externals["_ns-view-call"]=o,yr.externals["_ns-view-call-scalar"]=o,yr.externals["_ns-model-call"]=i,yr.externals["_ns-model-call-scalar"]=i},463:function(e,t,n){var r=n(631),o=n(400),i=n(344),s=n(408),a=n(409),u=n(425),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),f=!n&&!l&&s(e),p=!n&&!l&&!f&&u(e),d=n||l||f||p,h=d?r(e.length,String):[],v=h.length;for(var y in e)!t&&!c.call(e,y)||d&&("length"==y||f&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||h.push(y);return h}},464:function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},467:function(e,t,n){var r=n(446),o=n(387),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];i.call(e,t)&&o(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},468:function(e,t,n){var r=n(358),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},469:function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},470:function(e,t){e.exports=function(){return[]}},471:function(e,t,n){var r=n(402),o=n(344);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},475:function(e,t,n){var r=n(403),o=n(537),i=n(501);e.exports=function(e,t){return i(o(e,t,r),e+"")}},491:function(e,t,n){var r=n(410),o=n(635),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},498:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}},499:function(e,t,n){var r=n(402),o=n(447),i=n(428),s=n(470),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:s;e.exports=a},500:function(e,t,n){var r=n(533);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},501:function(e,t,n){var r=n(655),o=n(538)(r);e.exports=o},508:function(e,t,n){var r=n(1053),o=n(1055)(r);e.exports=o},528:function(e,t,n){"use strict";t.a=function(){return Date.now()-o},t.b=function(e){o=Date.now()-e};var r=n(13),o=r.a.timestamp?Date.now()-r.a.timestamp:0},529:function(e,t,n){var r=n(471),o=n(428),i=n(371);e.exports=function(e){return r(e,i,o)}},530:function(e,t,n){var r=n(471),o=n(499),i=n(419);e.exports=function(e){return r(e,i,o)}},531:function(e,t,n){var r=n(358)(n(346),"Set");e.exports=r},532:function(e,t,n){var r=n(358)(n(346),"WeakMap");e.exports=r},533:function(e,t,n){var r=n(346).Uint8Array;e.exports=r},534:function(e,t,n){var r=n(353),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},535:function(e,t,n){var r=n(653);e.exports=function(e){return null==e?"":r(e)}},536:function(e,t,n){var r=n(402),o=n(654);e.exports=function e(t,n,i,s,a){var u=-1,c=t.length;for(i||(i=o),a||(a=[]);++u<c;){var l=t[u];n>0&&i(l)?n>1?e(l,n-1,i,s,a):r(a,l):s||(a[a.length]=l)}return a}},537:function(e,t,n){var r=n(449),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),u=Array(a);++s<a;)u[s]=i[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=i[s];return c[t]=n(u),r(e,this,c)}}},538:function(e,t){var n=800,r=16,o=Date.now;e.exports=function(e){var t=0,i=0;return function(){var s=o(),a=r-(s-i);if(i=s,a>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},547:function(e,t,n){var r=n(1015),o=n(356);e.exports=function e(t,n,i,s,a){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,i,s,e,a))}},548:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},549:function(e,t,n){var r=n(1028);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},556:function(e,t,n){var r=n(557),o=n(385),i=n(415);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},557:function(e,t,n){var r=n(558),o=n(565),i=n(566),s=n(567),a=n(568);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=s,u.prototype.set=a,e.exports=u},558:function(e,t,n){var r=n(384);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},559:function(e,t,n){var r=n(414),o=n(562),i=n(353),s=n(455),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?p:a).test(s(e))}},560:function(e,t,n){var r=n(365),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[a]=n:delete e[a]),o}},561:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},562:function(e,t,n){var r=n(563),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},563:function(e,t,n){var r=n(346)["__core-js_shared__"];e.exports=r},564:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},565:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},566:function(e,t,n){var r=n(384),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===o?void 0:n}return i.call(t,e)?t[e]:void 0}},567:function(e,t,n){var r=n(384),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},568:function(e,t,n){var r=n(384),o="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?o:t,this}},569:function(e,t){e.exports=function(){this.__data__=[],this.size=0}},570:function(e,t,n){var r=n(386),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},571:function(e,t,n){var r=n(386);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},572:function(e,t,n){var r=n(386);e.exports=function(e){return r(this.__data__,e)>-1}},573:function(e,t,n){var r=n(386);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},574:function(e,t,n){var r=n(388);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},575:function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},576:function(e,t,n){var r=n(388);e.exports=function(e){return r(this,e).get(e)}},577:function(e,t,n){var r=n(388);e.exports=function(e){return r(this,e).has(e)}},578:function(e,t,n){var r=n(388);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},579:function(e,t){e.exports=function(){}},630:function(e,t,n){var r=n(942),o=n(371);e.exports=function(e){return null==e?[]:r(e,o(e))}},631:function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},632:function(e,t,n){var r=n(363),o=n(356),i="[object Arguments]";e.exports=function(e){return o(e)&&r(e)==i}},633:function(e,t){e.exports=function(){return!1}},634:function(e,t,n){var r=n(363),o=n(426),i=n(356),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!s[r(e)]}},635:function(e,t,n){var r=n(464)(Object.keys,Object);e.exports=r},641:function(e,t,n){var r=n(385);e.exports=function(){this.__data__=new r,this.size=0}},642:function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},643:function(e,t){e.exports=function(e){return this.__data__.get(e)}},644:function(e,t){e.exports=function(e){return this.__data__.has(e)}},645:function(e,t,n){var r=n(385),o=n(415),i=n(422),s=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<s-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},646:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},647:function(e,t,n){var r=n(353),o=n(410),i=n(648),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},648:function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},649:function(e,t,n){var r=n(358)(n(346),"DataView");e.exports=r},650:function(e,t,n){var r=n(358)(n(346),"Promise");e.exports=r},651:function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n(652)(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=i},652:function(e,t,n){var r=n(413),o=500;e.exports=function(e){var t=r(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}},653:function(e,t,n){var r=n(365),o=n(407),i=n(344),s=n(389),a=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-a?"-0":n}},654:function(e,t,n){var r=n(365),o=n(400),i=n(344),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(s&&e&&e[s])}},655:function(e,t,n){var r=n(656),o=n(468),i=n(403),s=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=s},656:function(e,t){e.exports=function(e){return function(){return e}}},660:function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},663:function(e,t,n){var r=n(733),o=n(1018),i=n(734),s=1,a=2;e.exports=function(e,t,n,u,c,l){var f=n&s,p=e.length,d=t.length;if(p!=d&&!(f&&d>p))return!1;var h=l.get(e);if(h&&l.get(t))return h==t;var v=-1,y=!0,m=n&a?new r:void 0;for(l.set(e,t),l.set(t,e);++v<p;){var g=e[v],_=t[v];if(u)var w=f?u(_,g,v,t,e,l):u(g,_,v,e,t,l);if(void 0!==w){if(w)continue;y=!1;break}if(m){if(!o(t,function(e,t){if(!i(m,t)&&(g===e||c(g,e,n,u,l)))return m.push(t)})){y=!1;break}}else if(g!==_&&!c(g,_,n,u,l)){y=!1;break}}return l.delete(e),l.delete(t),y}},664:function(e,t,n){var r=n(353);e.exports=function(e){return e==e&&!r(e)}},665:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},666:function(e,t,n){var r=n(429);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},671:function(e,t,n){var r=n(736),o=n(1043),i=n(1044);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},701:function(e,t,n){var r=n(353),o=n(389),i=NaN,s=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):a.test(e)?i:+e}},708:function(e,t,n){(function(e){var r=n(346),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}}).call(t,n(332)(e))},709:function(e,t,n){var r=n(500);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},710:function(e,t,n){var r=n(534),o=n(447),i=n(410);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},711:function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},712:function(e,t){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},733:function(e,t,n){var r=n(422),o=n(1016),i=n(1017);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=o,s.prototype.has=i,e.exports=s},734:function(e,t){e.exports=function(e,t){return e.has(t)}},735:function(e,t,n){var r=n(1023),o=n(1024);e.exports=function(e,t){return null!=e&&o(e,t,r)}},736:function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},745:function(e,t,n){var r=n(1054)();e.exports=r},746:function(e,t,n){var r=n(387),o=n(364),i=n(409),s=n(353);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?o(n)&&i(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},749:function(e,t,n){var r=n(491),o=n(390),i=n(400),s=n(344),a=n(364),u=n(408),c=n(410),l=n(425),f="[object Map]",p="[object Set]",d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||i(e)))return!e.length;var t=o(e);if(t==f||t==p)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},750:function(e,t,n){var r=n(534),o=n(353);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),i=e.apply(n,t);return o(i)?i:n}}},751:function(e,t){var n="__lodash_placeholder__";e.exports=function(e,t){for(var r=-1,o=e.length,i=0,s=[];++r<o;){var a=e[r];a!==t&&a!==n||(e[r]=n,s[i++]=r)}return s}},942:function(e,t,n){var r=n(407);e.exports=function(e,t){return r(t,function(t){return e[t]})}},972:function(e,t,n){var r=n(445),o=n(646),i=n(467),s=n(973),a=n(974),u=n(708),c=n(469),l=n(975),f=n(976),p=n(529),d=n(530),h=n(390),v=n(977),y=n(978),m=n(710),g=n(344),_=n(408),w=n(982),b=n(353),x=n(984),E=n(371),S=1,M=2,T=4,j="[object Arguments]",V="[object Function]",A="[object GeneratorFunction]",C="[object Object]",k={};k[j]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k[C]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k[V]=k["[object WeakMap]"]=!1,e.exports=function e(t,n,O,U,R,N){var D,P=n&S,L=n&M,I=n&T;if(O&&(D=R?O(t,U,R,N):O(t)),void 0!==D)return D;if(!b(t))return t;var F=g(t);if(F){if(D=v(t),!P)return c(t,D)}else{var B=h(t),q=B==V||B==A;if(_(t))return u(t,P);if(B==C||B==j||q&&!R){if(D=L||q?{}:m(t),!P)return L?f(t,a(D,t)):l(t,s(D,t))}else{if(!k[B])return R?t:{};D=y(t,B,P)}}N||(N=new r);var H=N.get(t);if(H)return H;N.set(t,D),x(t)?t.forEach(function(r){D.add(e(r,n,O,r,t,N))}):w(t)&&t.forEach(function(r,o){D.set(o,e(r,n,O,o,t,N))});var G=I?L?d:p:L?keysIn:E,$=F?void 0:G(t);return o($||t,function(r,o){$&&(r=t[o=r]),i(D,o,e(r,n,O,o,t,N))}),D}},973:function(e,t,n){var r=n(411),o=n(371);e.exports=function(e,t){return e&&r(t,o(t),e)}},974:function(e,t,n){var r=n(411),o=n(419);e.exports=function(e,t){return e&&r(t,o(t),e)}},975:function(e,t,n){var r=n(411),o=n(428);e.exports=function(e,t){return r(e,o(e),t)}},976:function(e,t,n){var r=n(411),o=n(499);e.exports=function(e,t){return r(e,o(e),t)}},977:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},978:function(e,t,n){var r=n(500),o=n(979),i=n(980),s=n(981),a=n(709),u="[object Boolean]",c="[object Date]",l="[object Map]",f="[object Number]",p="[object RegExp]",d="[object Set]",h="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",w="[object Int8Array]",b="[object Int16Array]",x="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",M="[object Uint16Array]",T="[object Uint32Array]";e.exports=function(e,t,n){var j=e.constructor;switch(t){case y:return r(e);case u:case c:return new j(+e);case m:return o(e,n);case g:case _:case w:case b:case x:case E:case S:case M:case T:return a(e,n);case l:return new j;case f:case h:return new j(e);case p:return i(e);case d:return new j;case v:return s(e)}}},979:function(e,t,n){var r=n(500);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},980:function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},981:function(e,t,n){var r=n(365),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},982:function(e,t,n){var r=n(983),o=n(427),i=n(443),s=i&&i.isMap,a=s?o(s):r;e.exports=a},983:function(e,t,n){var r=n(390),o=n(356),i="[object Map]";e.exports=function(e){return o(e)&&r(e)==i}},984:function(e,t,n){var r=n(985),o=n(427),i=n(443),s=i&&i.isSet,a=s?o(s):r;e.exports=a},985:function(e,t,n){var r=n(390),o=n(356),i="[object Set]";e.exports=function(e){return o(e)&&r(e)==i}},986:function(e,t,n){var r=n(429),o=n(712);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},987:function(e,t,n){var r=n(363),o=n(447),i=n(356),s="[object Object]",a=Function.prototype,u=Object.prototype,c=a.toString,l=u.hasOwnProperty,f=c.call(Object);e.exports=function(e){if(!i(e)||r(e)!=s)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},988:function(e,t,n){var r=n(989),o=n(537),i=n(501);e.exports=function(e){return i(o(e,void 0,r),e+"")}},989:function(e,t,n){var r=n(536);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}}});