!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Ya",[],t):"object"==typeof exports?exports.Ya=t():(e.Ya=e.Ya||{},e.Ya.Feedback=t())}(this,(()=>(()=>{var e={837:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([e.id,".j9B7up68rde9UJix2n7v{cursor:pointer;pointer-events:all}.j9B7up68rde9UJix2n7v button{all:unset;position:fixed;font-size:var(--fb-lib-button-font-size);font-weight:var(--fb-lib-button-font-weight);font-family:var(--fb-lib-button-font-family);color:var(--fb-lib-button-font-color);background-color:var(--fb-lib-button-bg);border-radius:var(--fb-lib-button-border-radius);box-shadow:var(--fb-lib-button-shadow);z-index:1000;padding:10px 18px 25px 12px;height:0px;will-change:transform}.j9B7up68rde9UJix2n7v button:focus-visible{outline:2px solid #4285f4;outline-offset:2px}.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button{right:-64px;transform:rotate(-90deg)}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.GaiCtmG9gshFjfLqdzeG button{right:-52px}.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG.fMuOOsa1oUBWZbZ3oXnV button{right:-56px}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.GaiCtmG9gshFjfLqdzeG.fMuOOsa1oUBWZbZ3oXnV button{right:-44px}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.b2ZKP3R8L2SZ3UdAXICQ button,.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.AIfawx9HF4cM9LuOMt0k button{padding:10px 0px 25px 12px;width:120px}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.b2ZKP3R8L2SZ3UdAXICQ.fMuOOsa1oUBWZbZ3oXnV button,.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.AIfawx9HF4cM9LuOMt0k.fMuOOsa1oUBWZbZ3oXnV button{padding:10px 6px 25px 12px;width:100px}.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{left:-64px;transform:rotate(-90deg)}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.mnuHg_VGaA9cmuJ7Fjgw button{left:-52px}.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw.fMuOOsa1oUBWZbZ3oXnV button{left:-56px}.j9B7up68rde9UJix2n7v.GGh_6dEqoE3cFL6TXe_X.mnuHg_VGaA9cmuJ7Fjgw.fMuOOsa1oUBWZbZ3oXnV button{left:-44px}.j9B7up68rde9UJix2n7v.AIfawx9HF4cM9LuOMt0k button{bottom:0px}.j9B7up68rde9UJix2n7v.b2ZKP3R8L2SZ3UdAXICQ button{top:0px}.j9B7up68rde9UJix2n7v.AIfawx9HF4cM9LuOMt0k button,.j9B7up68rde9UJix2n7v.b2ZKP3R8L2SZ3UdAXICQ button{left:0;right:0;margin:auto;width:134px}.DCWAhLzY3KYtDo6YvM_c{max-height:calc(100vh - 80px);overflow:auto}iframe.VZqgWfc49uJhl0AG9j4I{min-height:auto;transition:height .3s}@media(max-width: 480px){.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button,.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{bottom:150px}}@media(min-width: 481px){.j9B7up68rde9UJix2n7v.GaiCtmG9gshFjfLqdzeG button,.j9B7up68rde9UJix2n7v.mnuHg_VGaA9cmuJ7Fjgw button{top:200px}}",""]),r.locals={this:"j9B7up68rde9UJix2n7v",right:"GaiCtmG9gshFjfLqdzeG",headerHidden:"GGh_6dEqoE3cFL6TXe_X","en-fix":"fMuOOsa1oUBWZbZ3oXnV",top:"b2ZKP3R8L2SZ3UdAXICQ",bottom:"AIfawx9HF4cM9LuOMt0k",left:"mnuHg_VGaA9cmuJ7Fjgw",iframeWrapper:"DCWAhLzY3KYtDo6YvM_c",heightAuto:"VZqgWfc49uJhl0AG9j4I"};const a=r},90:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([e.id,'.u8n8V1CYJG6ACDwa777w{all:unset;position:absolute;display:block;width:16px;height:16px;font-size:0;background-repeat:no-repeat;background-position:50% 50%;border-radius:50%}.u8n8V1CYJG6ACDwa777w:after{position:absolute;content:"";width:44px;height:26px;left:-20px;top:-8px}.u8n8V1CYJG6ACDwa777w:hover{cursor:pointer;background-color:var(--fb-lib-close-hover-bg)}.u8n8V1CYJG6ACDwa777w:focus{outline:2px solid var(--fb-lib-close-focus-color);outline-offset:2px}.u8n8V1CYJG6ACDwa777w:focus:not(:focus-visible){outline:none}.u8n8V1CYJG6ACDwa777w:focus-visible{outline:2px solid var(--fb-lib-close-focus-color);outline-offset:2px}.u8n8V1CYJG6ACDwa777w:active{background-color:var(--fb-lib-close-active-bg, rgba(0, 0, 0, 0.1))}',""]),r.locals={this:"u8n8V1CYJG6ACDwa777w"};const a=r},211:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([e.id,".qbORpikLObufPvziZ9y_{position:fixed;top:0;left:0;right:0;bottom:0;height:auto;transition:.5s all;z-index:9999;pointer-events:all;background-color:rgba(0,0,0,.25);display:flex;justify-content:center;align-items:center}.hHnggwS8sytaHsy6fuWZ{border:none;background:none;padding:0;position:relative;width:545px;max-width:100%;border-radius:16px;box-shadow:0px 4px 7px rgba(0,0,0,.25);background-color:var(--fb-lib-content-bg)}.wEOFUiLOfluq86BrDUfg{min-height:42px;border-radius:16px 16px 0px 0px;background:var(--fb-lib-header-modal-bg) 50% 55% no-repeat;background-size:132px}.wEOFUiLOfluq86BrDUfg._2M3fKxqWmql09JUCBEg{display:none}.fp0QgCrX1y48p3elvLVi{overflow:hidden;background:var(--fb-lib-content-bg);border-radius:0px 0px 16px 16px;height:auto}.fp0QgCrX1y48p3elvLVi._2M3fKxqWmql09JUCBEg{border-radius:16px}.fp0QgCrX1y48p3elvLVi iframe{display:block;border:0;overflow:auto;width:100%}.Phidw_u4HJIdFwFJpWzG{top:12px;right:12px}@media(max-height: 669px)and (min-height: 370px){.fp0QgCrX1y48p3elvLVi iframe{min-height:320px}}@media(min-height: 670px){.fp0QgCrX1y48p3elvLVi iframe{min-height:620px}}",""]),r.locals={visible:"qbORpikLObufPvziZ9y_",main:"hHnggwS8sytaHsy6fuWZ",header:"wEOFUiLOfluq86BrDUfg",header_hidden:"_2M3fKxqWmql09JUCBEg",content:"fp0QgCrX1y48p3elvLVi",close:"Phidw_u4HJIdFwFJpWzG"};const a=r},917:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([e.id,".dzCDBUAznXSxVdGj1S7X{--thick-popup-offset: 16px;--horiz-shift: -100vw}.dzCDBUAznXSxVdGj1S7X{height:auto;background:var(--fb-lib-content-bg);border-radius:16px;pointer-events:none;z-index:9999}.dzCDBUAznXSxVdGj1S7X.fL5Owfu9xYWrxSlFekwz{position:absolute}.dzCDBUAznXSxVdGj1S7X.tFVNFALE8CgbdkspQgXJ{position:fixed}.dzCDBUAznXSxVdGj1S7X.TZbANCRE7ej6hWXvm4sw{left:var(--horiz-shift)}.dzCDBUAznXSxVdGj1S7X.sLWfm6BmA5C2rP8RH2lh{right:var(--horiz-shift)}.dzCDBUAznXSxVdGj1S7X.zyUt1ulGu7Lctcqt9Wwb{top:var(--vert-shift)}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw{bottom:var(--vert-shift)}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA{top:var(--vert-shift);left:var(--horiz-shift)}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw.dzCDBUAznXSxVdGj1S7X.fL5Owfu9xYWrxSlFekwz{--vert-shift: 0}.yP6u_4fglSQcvruyoYvp{pointer-events:all;z-index:9999}.FJkGA3xCbqzGT0n2EMy7{margin-left:auto;position:relative;box-shadow:0px 8px 40px 0px rgba(33,32,31,.12);border-radius:16px}.A9lP13CP5JmkdVp3aYdq{min-height:36px;background:var(--fb-lib-header-popup-bg) 50% 50% no-repeat;background-size:100px;border-radius:16px 16px 0 0}.A9lP13CP5JmkdVp3aYdq.hoQR6MQKQAxgFUvjJ3vC{display:none}.h4aXscBoDD4zSt5DFRwg.hoQR6MQKQAxgFUvjJ3vC{border-radius:16px}.h4aXscBoDD4zSt5DFRwg{overflow:hidden;border-radius:0px 0px 16px 16px;background:var(--fb-lib-content-bg)}.h4aXscBoDD4zSt5DFRwg.hoQR6MQKQAxgFUvjJ3vC iframe{border-radius:16px}.h4aXscBoDD4zSt5DFRwg iframe{display:block;border:0;overflow:hidden;border-radius:0 0 16px 16px;width:320px}.h4aXscBoDD4zSt5DFRwg iframe.XsSKBX1_k9QpApPDM1zs{width:calc(100vw - 2*var(--thick-popup-offset))}.Fpgt_Kf0hCJU1CoBT8fx{top:8px;right:8px}@media(max-width: 500px){.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp{--horiz-shift: 16px}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6,.dzCDBUAznXSxVdGj1S7X.zyUt1ulGu7Lctcqt9Wwb.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--vert-shift: 12px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--vert-shift: 50%;transform:translate(0%, -50%)}.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6 .h4aXscBoDD4zSt5DFRwg iframe{transition:height .3s}.dzCDBUAznXSxVdGj1S7X.NFKvx2noTZuUABoQOIgw.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3,.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{top:12px;bottom:unset}.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3 .h4aXscBoDD4zSt5DFRwg iframe{transition:none}}@media(min-width: 501px){.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 30px;--vert-shift: 30px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 50%;--vert-shift: 50%;transform:translate(-50%, -50%)}.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6 .h4aXscBoDD4zSt5DFRwg iframe{transition:height .3s}.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{top:10px;bottom:unset;--horiz-shift: 30px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{--horiz-shift: 50%;transform:translate(-50%, 0%)}.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3 .h4aXscBoDD4zSt5DFRwg iframe{transition:none}}@media(orientation: landscape)and (max-device-width: 500px){.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{top:10px;bottom:unset;--horiz-shift: 10px}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.AxucLDsdelBla_Bw3Fn3{--horiz-shift: 50%;transform:translate(-50%, 0%)}.dzCDBUAznXSxVdGj1S7X.sr2JfeVqmXom70U3vKtA.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 50%;--vert-shift: 50%;transform:translate(-50%, -50%)}.dzCDBUAznXSxVdGj1S7X.yP6u_4fglSQcvruyoYvp.Y0n9jC_RhNVMcgcYWrA6{--horiz-shift: 10px;--vert-shift: 10px}}",""]),r.locals={popup:"dzCDBUAznXSxVdGj1S7X",absolute:"fL5Owfu9xYWrxSlFekwz",fixed:"tFVNFALE8CgbdkspQgXJ",left:"TZbANCRE7ej6hWXvm4sw",right:"sLWfm6BmA5C2rP8RH2lh",top:"zyUt1ulGu7Lctcqt9Wwb",bottom:"NFKvx2noTZuUABoQOIgw",center:"sr2JfeVqmXom70U3vKtA",active:"yP6u_4fglSQcvruyoYvp",main:"FJkGA3xCbqzGT0n2EMy7",header:"A9lP13CP5JmkdVp3aYdq",header_hidden:"hoQR6MQKQAxgFUvjJ3vC",content:"h4aXscBoDD4zSt5DFRwg",slimclass:"XsSKBX1_k9QpApPDM1zs",close:"Fpgt_Kf0hCJU1CoBT8fx",small:"Y0n9jC_RhNVMcgcYWrA6",big:"AxucLDsdelBla_Bw3Fn3"};const a=r},470:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([e.id,'.sftrMRAIFtK_kVzdUSLs[data-theme=light]{--fb-lib-header-popup-bg: #ffffff;--fb-lib-header-modal-bg: #ffffff;--fb-lib-content-bg: #fff;--fb-lib-close-cross: rgba(0, 0, 0, 0.3);--fb-lib-close-hover-bg: #d1d1d1}.sftrMRAIFtK_kVzdUSLs[data-theme=dark]{--fb-lib-header-popup-bg: #677a9e33;--fb-lib-header-modal-bg: #677a9e33;--fb-lib-content-bg: rgba(50, 49, 53, 1);--fb-lib-close-cross: rgba(255, 255, 255, 0.3);--fb-lib-close-hover-bg: rgba(255, 255, 255, 0.12)}.sftrMRAIFtK_kVzdUSLs{overflow-x:hidden;width:100%;height:100%;position:relative;--fb-lib-button-border-radius: 8px;--fb-lib-button-font-size: 14px;--fb-lib-button-font-weight: 400;--fb-lib-button-font-family: "YS Text", "Helvetica Neue", Helvetica, Arial, sans-serif;--fb-lib-button-font-color: rgba(0, 0, 0, 0.85);--fb-lib-button-bg: #f0f0f0;--fb-lib-button-shadow: 0px 4px 7px rgba(0, 0, 0, 0.25);--fb-lib-close-focus-color: #4285f4}.gWQ6kLPL_6XKDUip4ZQN{width:100vw;height:100vh;max-width:100%;position:absolute;top:0;left:0;pointer-events:none}.qUmstruTeB5JYz66X8oS{position:absolute;visibility:hidden;width:100%;height:1px;left:0;top:0}',""]),r.locals={root:"sftrMRAIFtK_kVzdUSLs",overflow_wrapper:"gWQ6kLPL_6XKDUip4ZQN","scroll-observer-line":"qUmstruTeB5JYz66X8oS"};const a=r},416:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(81),s=n.n(i),o=n(645),r=n.n(o)()(s());r.push([e.id,"body.ya-feedback__modal_open {\n    overflow: hidden;\n}\n",""]);const a=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,s,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);i&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},822:function(e,t,n){e.exports=function(e){function t(e){var t={};for(var s in e)e.hasOwnProperty(s)&&(t[s.toLowerCase()]=s);var r=e[t.ontouchstart],a=e[t.ontouchtap],l=e[t.onclick];delete e[t.ontouchtap],e[t.onclick||"onClick"]=function(e){if(l&&l(e),!o)return a(e)},e[t.ontouchstart||"onTouchStart"]=function(e){var t=n(e);if(o=!0,addEventListener("touchend",(function e(s){removeEventListener("touchend",e);var o=n(s);Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))<i.threshold&&a(s)})),r)return r(e)}}function n(e){var t=e.changedTouches&&e.changedTouches[0]||e.touches&&e.touches[0]||e;return{x:t.pageX,y:t.pageY,target:t.target}}var i={threshold:10},s=void 0,o=void 0;return function(n){for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);if(!s){s=!0;var r=e.options.vnode;e.options.vnode=function(e){var n=e.attributes;if(n)for(var i in n)if(n.hasOwnProperty(i)&&"ontouchtap"===i.toLowerCase()){t(n);break}r&&r(e)}}}}(n(400))},400:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>A,Fragment:()=>y,cloneElement:()=>N,createContext:()=>R,createElement:()=>b,createRef:()=>g,h:()=>b,hydrate:()=>M,isValidElement:()=>r,options:()=>s,render:()=>Q,toChildArray:()=>z});var i,s,o,r,a,l,u,d,c,h={},v=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function b(e,t,n){var s,o,r,a={};for(r in t)"key"==r?s=t[r]:"ref"==r?o=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===a[r]&&(a[r]=e.defaultProps[r]);return m(e,a,s,o,null)}function m(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++o:r};return null==r&&null!=s.vnode&&s.vnode(a),a}function g(){return{current:null}}function y(e){return e.children}function x(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||_.test(t)?n:n+"px"}function w(e,t,n,i,s){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||x(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||x(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i||e.addEventListener(t,o?S:k,o):e.removeEventListener(t,o?S:k,o);else if("dangerouslySetInnerHTML"!==t){if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function k(e){a=!0;try{return this.l[e.type+!1](s.event?s.event(e):e)}finally{a=!1}}function S(e){a=!0;try{return this.l[e.type+!0](s.event?s.event(e):e)}finally{a=!1}}function A(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function E(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return E(e)}}function F(e){a?setTimeout(e):d(e)}function P(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!U.__r++||u!==s.debounceRendering)&&((u=s.debounceRendering)||F)(U)}function U(){var e,t,n,i,s,o,r,a;for(l.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=l.shift();)e.__d&&(t=l.length,i=void 0,s=void 0,r=(o=(n=e).__v).__e,(a=n.__P)&&(i=[],(s=f({},o)).__v=o.__v+1,j(a,o,s,n.__n,void 0!==a.ownerSVGElement,null!=o.__h?[r]:null,i,null==r?C(o):r,o.__h),V(i,o),o.__e!=r&&E(o)),l.length>t&&l.sort((function(e,t){return e.__v.__b-t.__v.__b})));U.__r=0}function L(e,t,n,i,s,o,r,a,l,u){var d,c,_,f,p,b,g,x=i&&i.__k||v,w=x.length;for(n.__k=[],d=0;d<t.length;d++)if(null!=(f=n.__k[d]=null==(f=t[d])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?m(null,f,null,null,f):Array.isArray(f)?m(y,{children:f},null,null,null):f.__b>0?m(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(_=x[d])||_&&f.key==_.key&&f.type===_.type)x[d]=void 0;else for(c=0;c<w;c++){if((_=x[c])&&f.key==_.key&&f.type===_.type){x[c]=void 0;break}_=null}j(e,f,_=_||h,s,o,r,a,l,u),p=f.__e,(c=f.ref)&&_.ref!=c&&(g||(g=[]),_.ref&&g.push(_.ref,null,f),g.push(c,f.__c||p,f)),null!=p?(null==b&&(b=p),"function"==typeof f.type&&f.__k===_.__k?f.__d=l=B(f,l,e):l=D(e,f,_,x,p,l),"function"==typeof n.type&&(n.__d=l)):l&&_.__e==l&&l.parentNode!=e&&(l=C(_))}for(n.__e=b,d=w;d--;)null!=x[d]&&("function"==typeof n.type&&null!=x[d].__e&&x[d].__e==n.__d&&(n.__d=X(i).nextSibling),H(x[d],x[d]));if(g)for(d=0;d<g.length;d++)T(g[d],g[++d],g[++d])}function B(e,t,n){for(var i,s=e.__k,o=0;s&&o<s.length;o++)(i=s[o])&&(i.__=e,t="function"==typeof i.type?B(i,t,n):D(n,i,i,s,i.__e,t));return t}function z(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){z(e,t)})):t.push(e)),t}function D(e,t,n,i,s,o){var r,a,l;if(void 0!==t.__d)r=t.__d,t.__d=void 0;else if(null==n||s!=o||null==s.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(s),r=null;else{for(a=o,l=0;(a=a.nextSibling)&&l<i.length;l+=1)if(a==s)break e;e.insertBefore(s,o),r=o}return void 0!==r?r:s.nextSibling}function X(e){var t,n,i;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(i=X(n)))return i;return null}function j(e,t,n,i,o,r,a,l,u){var d,c,h,v,_,p,b,m,g,x,w,k,S,C,E,F=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(u=n.__h,l=t.__e=n.__e,t.__h=null,r=[l]),(d=s.__b)&&d(t);try{e:if("function"==typeof F){if(m=t.props,g=(d=F.contextType)&&i[d.__c],x=d?g?g.props.value:d.__:i,n.__c?b=(c=t.__c=n.__c).__=c.__E:("prototype"in F&&F.prototype.render?t.__c=c=new F(m,x):(t.__c=c=new A(m,x),c.constructor=F,c.render=O),g&&g.sub(c),c.props=m,c.state||(c.state={}),c.context=x,c.__n=i,h=c.__d=!0,c.__h=[],c._sb=[]),null==c.__s&&(c.__s=c.state),null!=F.getDerivedStateFromProps&&(c.__s==c.state&&(c.__s=f({},c.__s)),f(c.__s,F.getDerivedStateFromProps(m,c.__s))),v=c.props,_=c.state,c.__v=t,h)null==F.getDerivedStateFromProps&&null!=c.componentWillMount&&c.componentWillMount(),null!=c.componentDidMount&&c.__h.push(c.componentDidMount);else{if(null==F.getDerivedStateFromProps&&m!==v&&null!=c.componentWillReceiveProps&&c.componentWillReceiveProps(m,x),!c.__e&&null!=c.shouldComponentUpdate&&!1===c.shouldComponentUpdate(m,c.__s,x)||t.__v===n.__v){for(t.__v!==n.__v&&(c.props=m,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),w=0;w<c._sb.length;w++)c.__h.push(c._sb[w]);c._sb=[],c.__h.length&&a.push(c);break e}null!=c.componentWillUpdate&&c.componentWillUpdate(m,c.__s,x),null!=c.componentDidUpdate&&c.__h.push((function(){c.componentDidUpdate(v,_,p)}))}if(c.context=x,c.props=m,c.__P=e,k=s.__r,S=0,"prototype"in F&&F.prototype.render){for(c.state=c.__s,c.__d=!1,k&&k(t),d=c.render(c.props,c.state,c.context),C=0;C<c._sb.length;C++)c.__h.push(c._sb[C]);c._sb=[]}else do{c.__d=!1,k&&k(t),d=c.render(c.props,c.state,c.context),c.state=c.__s}while(c.__d&&++S<25);c.state=c.__s,null!=c.getChildContext&&(i=f(f({},i),c.getChildContext())),h||null==c.getSnapshotBeforeUpdate||(p=c.getSnapshotBeforeUpdate(v,_)),E=null!=d&&d.type===y&&null==d.key?d.props.children:d,L(e,Array.isArray(E)?E:[E],t,n,i,o,r,a,l,u),c.base=t.__e,t.__h=null,c.__h.length&&a.push(c),b&&(c.__E=c.__=null),c.__e=!1}else null==r&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=G(n.__e,t,n,i,o,r,a,u);(d=s.diffed)&&d(t)}catch(e){t.__v=null,(u||null!=r)&&(t.__e=l,t.__h=!!u,r[r.indexOf(l)]=null),s.__e(e,t,n)}}function V(e,t){s.__c&&s.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){s.__e(e,t.__v)}}))}function G(e,t,n,s,o,r,a,l){var u,d,c,v=n.props,_=t.props,f=t.type,b=0;if("svg"===f&&(o=!0),null!=r)for(;b<r.length;b++)if((u=r[b])&&"setAttribute"in u==!!f&&(f?u.localName===f:3===u.nodeType)){e=u,r[b]=null;break}if(null==e){if(null===f)return document.createTextNode(_);e=o?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,_.is&&_),r=null,l=!1}if(null===f)v===_||l&&e.data===_||(e.data=_);else{if(r=r&&i.call(e.childNodes),d=(v=n.props||h).dangerouslySetInnerHTML,c=_.dangerouslySetInnerHTML,!l){if(null!=r)for(v={},b=0;b<e.attributes.length;b++)v[e.attributes[b].name]=e.attributes[b].value;(c||d)&&(c&&(d&&c.__html==d.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(function(e,t,n,i,s){var o;for(o in n)"children"===o||"key"===o||o in t||w(e,o,null,n[o],i);for(o in t)s&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||w(e,o,t[o],n[o],i)}(e,_,v,o,l),c)t.__k=[];else if(b=t.props.children,L(e,Array.isArray(b)?b:[b],t,n,s,o&&"foreignObject"!==f,r,a,r?r[0]:n.__k&&C(n,0),l),null!=r)for(b=r.length;b--;)null!=r[b]&&p(r[b]);l||("value"in _&&void 0!==(b=_.value)&&(b!==e.value||"progress"===f&&!b||"option"===f&&b!==v.value)&&w(e,"value",b,v.value,!1),"checked"in _&&void 0!==(b=_.checked)&&b!==e.checked&&w(e,"checked",b,v.checked,!1))}return e}function T(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){s.__e(e,n)}}function H(e,t,n){var i,o;if(s.unmount&&s.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||T(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){s.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&H(i[o],t,n||"function"!=typeof e.type);n||null==e.__e||p(e.__e),e.__=e.__e=e.__d=void 0}function O(e,t,n){return this.constructor(e,n)}function Q(e,t,n){var o,r,a;s.__&&s.__(e,t),r=(o="function"==typeof n)?null:n&&n.__k||t.__k,a=[],j(t,e=(!o&&n||t).__k=b(y,null,[e]),r||h,h,void 0!==t.ownerSVGElement,!o&&n?[n]:r?null:t.firstChild?i.call(t.childNodes):null,a,!o&&n?n:r?r.__e:t.firstChild,o),V(a,e)}function M(e,t){Q(e,t,M)}function N(e,t,n){var s,o,r,a=f({},e.props);for(r in t)"key"==r?s=t[r]:"ref"==r?o=t[r]:a[r]=t[r];return arguments.length>2&&(a.children=arguments.length>3?i.call(arguments,2):n),m(e.type,a,s||e.key,o||e.ref,null)}function R(e,t){var n={__c:t="__cC"+c++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,i;return this.getChildContext||(n=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,P(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}i=v.slice,s={__e:function(e,t,n,i){for(var s,o,r;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&null!=o.getDerivedStateFromError&&(s.setState(o.getDerivedStateFromError(e)),r=s.__d),null!=s.componentDidCatch&&(s.componentDidCatch(e,i||{}),r=s.__d),r)return s.__E=s}catch(t){e=t}throw e}},o=0,r=function(e){return null!=e&&void 0===e.constructor},a=!1,A.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(f({},n),this.props)),e&&f(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),P(this))},A.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),P(this))},A.prototype.render=y,l=[],d="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,U.__r=0,c=0},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},r=[],a=0;a<e.length;a++){var l=e[a],u=i.base?l[0]+i.base:l[0],d=o[u]||0,c="".concat(u," ").concat(d);o[u]=d+1;var h=n(c),v={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(v);else{var _=s(v,i);i.byIndex=a,t.splice(a,0,{identifier:c,updater:_,references:1})}r.push(c)}return r}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var o=i(e=e||[],s=s||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var a=n(o[r]);t[a].references--}for(var l=i(e,s),u=0;u<o.length;u++){var d=n(o[u]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,s&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={id:i,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0;var i={};return(()=>{"use strict";n.r(i),n.d(i,{App:()=>Oe,Feedback:()=>Qe});var e=n(400);const t="survey.embed.rendered",s="survey.embed.page_switched",o="survey.embed.left_last_page",r="survey.embed.height_changed";var a;!function(e){e.Ru="ru",e.Kz="kz",e.By="by",e.Ua="ua",e.Com="com",e.ComTr="com.tr",e.Uz="uz"}(a||(a={}));const l="https://yastatic.net/s3/distribution/pythia/feedback-lib/latest";function u(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>void 0!==t)))}function d(){const e=window.location.origin.split(".").pop();return"tr"===e?a.ComTr:Object.values(a).includes(e)&&e||a.Ru}var c,h=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};!function(e){e.RENDERED="ya:feedback:survey:rendered",e.SYNC="ya:feedback:survey:sync",e.SKIP="ya:feedback:survey:skip",e.FINISHED="ya:feedback:survey:finished",e.CLOSE_ACTIVE="ya:feedback:active_survey:close",e.SUITABLE="ya:feedback:suitable",e.SHOW_PASSIVE="ya:feedback:passive_survey:show",e.CLOSE_PASSIVE="ya:feedback:passive_survey:close",e.HEIGHT_CHANGED="ya:feedback:height_changed"}(c||(c={}));class v{constructor(e,t){this.name=e,this.data=t}}class _{constructor(e,t,n,i,s,o,r=!0){this.isFinished=!1,this.isRendered=!1,this.enabled=!0,this.slug=e.slug,this.owner_id=t,this.uid=o,this.events=e.events,this.appearance=e.appearance,this.fulfilled_events={},this.enabled=r,this.getQueryParams=i;const a=(null==n?void 0:n.host.endsWith("."))?d():"";this.baseUrl=`${null==n?void 0:n.protocol}${null==n?void 0:n.host}${a}${null==n?void 0:n.path}`,this.dispatchEvent=s,this.events.forEach((e=>this.fulfilled_events[e.event]=!1))}setFulfilled(e){this.fulfilled_events[e]=!0}setRendered(){this.isRendered=!0,this.dispatchEvent(new v(c.RENDERED,{detail:{survey:this}}))}setClosed(){this.dispatchEvent(new v(c.CLOSE_ACTIVE,{detail:{survey:this}}))}setEnabled(e){this.enabled=e}isFullfilled(e){return this.fulfilled_events[e]}checkNoAnnoy(){return h(this,void 0,void 0,(function*(){const e=new URL(`${this.baseUrl}/no-annoy/sync`);e.search=this.getNoAnnoyQueryParams();const t=yield fetch(e,{method:"GET",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}}),n=yield t.json();return this.dispatchEvent(new v(c.SYNC,{detail:{survey:this,response:n}})),n.show||!1}))}getNoAnnoyQueryParams(){const e={owner_id:this.owner_id,site:window.location.hostname||"localhost",slug:this.slug};return this.uid&&(e.uid=this.uid),String(new URLSearchParams(e))}skip(){return h(this,void 0,void 0,(function*(){if(this.isFinished)return;const e=new URL(`${this.baseUrl}/no-annoy/skip`);e.search=this.getNoAnnoyQueryParams();const t=yield fetch(e,{method:"GET",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"}}),n=yield t.json();return this.dispatchEvent(new v(c.SKIP,{detail:{survey:this,response:n}})),t.ok}))}setFinished(){this.isFinished=!0,this.dispatchEvent(new v(c.FINISHED,{detail:{survey:this}}))}checkShow(e){var t;return h(this,void 0,void 0,(function*(){let n=!1;if(!this.enabled||this.isRendered||this.isFinished)return!1;const i=Object.keys(this.fulfilled_events).filter((e=>["onload","scroll","reachGoal"].includes(e))),s=i.length>0&&i.every((e=>this.fulfilled_events[e])),o=null===(t=this.fulfilled_events)||void 0===t?void 0:t.action;switch(e){case"onload":case"scroll":case"reachGoal":n=s;break;case"action":n=o;break;case"survey_enabled":n=s||o;break;default:n=!1}return n&&this.checkNoAnnoy()}))}getPollUrl(e,t){var n,i,s,o,r,a,l,c,h,v,_,f;const p=this.appearance||{},b=u({spinner_view:null===(i=null===(n=null==p?void 0:p.branding)||void 0===n?void 0:n.spinner)||void 0===i?void 0:i.view,spinner_color:null===(o=null===(s=null==p?void 0:p.branding)||void 0===s?void 0:s.spinner)||void 0===o?void 0:o.color,underlay_bg:null===(a=null===(r=null==p?void 0:p.branding)||void 0===r?void 0:r.underlay)||void 0===a?void 0:a.bg,dark_spinner_color:null===(h=null===(c=null===(l=null==p?void 0:p.branding)||void 0===l?void 0:l.darkTheme)||void 0===c?void 0:c.spinner)||void 0===h?void 0:h.color,dark_underlay_bg:null===(f=null===(_=null===(v=null==p?void 0:p.branding)||void 0===v?void 0:v.darkTheme)||void 0===_?void 0:_.underlay)||void 0===f?void 0:f.bg}),m=Object.assign(this.getQueryParams(),b,{theme_mode:t,_origin_:e});return((e,t,n)=>{if(""===e)return"";const i=d(),s=new URL(`https://yandex.${i}/poll/feedback/enter/${e}`),o={_footer_enable_:"0",_embedded_:"1",_origin_:window.location.href};return n&&(o._height_="210px"),s.search=new URLSearchParams(Object.assign(Object.assign({},o),t)).toString(),s.toString()})(this.slug,m,null==p?void 0:p.isHeightAuto)}}class f extends _{skip(){return h(this,void 0,void 0,(function*(){return this.dispatchEvent(new v(c.SKIP,{detail:{survey:this}})),!0}))}}const p=class{constructor(){this.surveys=[],this.query_params={},this.event_callbacks={},this.surveys_disabled=!1}init(e,t){const{baseUrl:n,uid:i,lang:s="ru",testIds:o,customParams:r}=t;this.owner_id=e,this.apiUrl=n||{host:"surveys.yandex.",path:"/api/v0/feedback",protocol:"https://"},this.query_params={default:{}},this.uid=i,this.lang=s,this.test_ids=o,this.event_callbacks={},this.custom_params=r}dispatchEvent(e){var t;null===(t=this.event_callbacks[e.name])||void 0===t||t.forEach((t=>t(e.data)))}addEventListener(e,t){this.event_callbacks[e]=this.event_callbacks[e]||[],this.event_callbacks[e].push(t)}removeEventListener(e,t){var n;this.event_callbacks[e]=null===(n=this.event_callbacks[e])||void 0===n?void 0:n.filter((e=>e!==t))}fetchActiveSurveys(){return e=this,t=void 0,i=function*(){const e=this.apiUrl.host.endsWith(".")?d():"",t=new URL(`\n            ${this.apiUrl.protocol}${this.apiUrl.host}${e}${this.apiUrl.path}/survey/suitable\n        `),n={owner_id:this.owner_id,source_url:window.location.href};this.lang&&(n.lang=this.lang),this.uid&&(n.uid=this.uid),this.test_ids&&(n["test-id"]=this.test_ids.join(",")),t.search=String(new URLSearchParams(n));const i=yield fetch(t,{method:this.custom_params?"POST":"GET",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:this.custom_params?JSON.stringify({customParams:this.custom_params}):void 0}),s=yield i.json();this.surveys=null==s?void 0:s.activeFeedbackSurveys.map((e=>new _(e,this.owner_id,this.apiUrl,this.getQueryParams.bind(this,[e.slug]),this.dispatchEvent.bind(this),this.uid,!this.surveys_disabled))),Array.isArray(this.surveys)||(this.surveys=[]);const o=null==s?void 0:s.passiveFeedbackSurvey;this.passive_feedback=o?new _(Object.assign(Object.assign({},o),{events:(null==o?void 0:o.events)||[]}),this.owner_id,this.apiUrl,this.getQueryParams.bind(this,[o.slug]),this.dispatchEvent.bind(this),this.uid,!this.surveys_disabled):null,this.dispatchEvent(new v(c.SUITABLE,{detail:{suitable_surveys:s}}))},new((n=void 0)||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}));var e,t,n,i}disableAllSurveys(){var e;this.surveys_disabled=!0,null===(e=this.surveys)||void 0===e||e.forEach((e=>e.setEnabled(!1)))}enableAllSurveys(){var e;this.surveys_disabled=!1,null===(e=this.surveys)||void 0===e||e.forEach((e=>e.setEnabled(!0)))}getSurveysByCondition(e){return this.surveys.filter((t=>t.events.some((t=>t.event===e.event&&t.value===e.value))))}getSurveys(){return this.surveys}getSurveyBySlug(e){return this.surveys.find((t=>t.slug===e))}hasPassiveFeedback(){var e;return Boolean(null===(e=this.passive_feedback)||void 0===e?void 0:e.slug)}getPassiveFeedback(){return this.passive_feedback}setQueryParams(e,t){this.query_params[e]=t}getQueryParams(e){return Object.assign({},this.query_params.default,this.query_params[e])}},b=(0,e.createContext)("light"),m=(0,e.createContext)("ru");var g,y,x,w,k=0,S=[],A=[],C=e.options.__b,E=e.options.__r,F=e.options.diffed,P=e.options.__c,U=e.options.unmount;function L(t,n){e.options.__h&&e.options.__h(y,t,k||n),k=0;var i=y.__H||(y.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:A}),i.__[t]}function B(e){return k=1,function(e,t,n){var i=L(g++,2);if(i.t=e,!i.__c&&(i.__=[M(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=y,!y.u)){y.u=!0;var s=y.shouldComponentUpdate;y.shouldComponentUpdate=function(e,t,n){if(!i.__c.__H)return!0;var o=i.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!s||s.call(this,e,t,n);var r=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(r=!0)}})),!(!r&&i.__c.props===e)&&(!s||s.call(this,e,t,n))}}return i.__N||i.__}(M,e)}function z(t,n){var i=L(g++,3);!e.options.__s&&Q(i.__H,n)&&(i.__=t,i.i=n,y.__H.__h.push(i))}function D(e){return k=5,X((function(){return{current:e}}),[])}function X(e,t){var n=L(g++,7);return Q(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function j(e){var t=y.context[e.__c],n=L(g++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(y)),t.props.value):e.__}function V(){for(var t;t=S.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(H),t.__H.__h.forEach(O),t.__H.__h=[]}catch(n){t.__H.__h=[],e.options.__e(n,t.__v)}}e.options.__b=function(e){y=null,C&&C(e)},e.options.__r=function(e){E&&E(e),g=0;var t=(y=e.__c).__H;t&&(x===y?(t.__h=[],y.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=A,e.__N=e.i=void 0}))):(t.__h.forEach(H),t.__h.forEach(O),t.__h=[])),x=y},e.options.diffed=function(t){F&&F(t);var n=t.__c;n&&n.__H&&(n.__H.__h.length&&(1!==S.push(n)&&w===e.options.requestAnimationFrame||((w=e.options.requestAnimationFrame)||T)(V)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==A&&(e.__=e.__V),e.i=void 0,e.__V=A}))),x=y=null},e.options.__c=function(t,n){n.some((function(t){try{t.__h.forEach(H),t.__h=t.__h.filter((function(e){return!e.__||O(e)}))}catch(i){n.some((function(e){e.__h&&(e.__h=[])})),n=[],e.options.__e(i,t.__v)}})),P&&P(t,n)},e.options.unmount=function(t){U&&U(t);var n,i=t.__c;i&&i.__H&&(i.__H.__.forEach((function(e){try{H(e)}catch(e){n=e}})),i.__H=void 0,n&&e.options.__e(n,i.__v))};var G="function"==typeof requestAnimationFrame;function T(e){var t,n=function(){clearTimeout(i),G&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);G&&(t=requestAnimationFrame(n))}function H(e){var t=y,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),y=t}function O(e){var t=y;e.__c=e.__(),y=t}function Q(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function M(e,t){return"function"==typeof t?t(e):t}function N(e,t){var n,i;const s=d();null===(i=null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.contentWindow)||void 0===i||i.postMessage({event:"survey.embed.set_theme_mode",mode:t},`https://yandex.${s}`)}function R(){return j(b)}function J(e,t,n,i){z((()=>{i&&N(e,t)}),[e,t,n,i])}function Y(){return j(m)}function q(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof RegExp||e instanceof Date||e instanceof Set||e instanceof Map)}function I(e,t){return Object.keys(t).forEach((n=>{const i=t[n],s=e[n];q(i)&&q(s)?e[n]=I(s,i):e[n]=i})),e}const Z={button:function(e){var t;const n=(null==e?void 0:e.button)||{},i=null==n?void 0:n.bg,s=null===(t=null==n?void 0:n.border)||void 0===t?void 0:t.radius,o=null==n?void 0:n.shadow,r=(null==n?void 0:n.font)||{};return{"--fb-lib-button-bg":i,"--fb-lib-button-border-radius":s,"--fb-lib-button-shadow":o,"--fb-lib-button-font-size":null==r?void 0:r.size,"--fb-lib-button-font-weight":null==r?void 0:r.weight,"--fb-lib-button-font-family":null==r?void 0:r.family,"--fb-lib-button-font-color":null==r?void 0:r.color}},modal:function(e){var t;return{"--fb-lib-header-modal-bg":null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.bg}},popup:function(e){var t;return{"--fb-lib-header-popup-bg":null===(t=null==e?void 0:e.header)||void 0===t?void 0:t.bg}}};function W(e,t,n){var i;const s=I({header:{bg:null==(i=e)?void 0:i.headerBg},spinner:{view:null==i?void 0:i.spinnerView},underlay:{bg:null==i?void 0:i.underlayBg},darkTheme:{header:{bg:null==i?void 0:i.darkHeaderBg},underlay:{bg:null==i?void 0:i.darkUnderlayBg}}},(null==e?void 0:e.branding)||{}),o=Z[n],r=u(o(s));return"light"===t?r:I(r,u(o((null==s?void 0:s.darkTheme)||{})))}const K=JSON.parse('{"en":{"feedback":{"button.label":"Give feedback","modal.close":"Close survey","popup.close":"Close survey"}},"ru":{"feedback":{"button.label":"Оставить отзыв","modal.close":"Закрыть опрос","popup.close":"Закрыть опрос"}}}'),$=function(e){return e&&"string"==typeof e&&e in K?K[e].feedback:K.en.feedback};var ee=n(822),te=n.n(ee),ne=n(379),ie=n.n(ne),se=n(795),oe=n.n(se),re=n(569),ae=n.n(re),le=n(565),ue=n.n(le),de=n(216),ce=n.n(de),he=n(589),ve=n.n(he),_e=n(90),fe={};fe.styleTagTransform=ve(),fe.setAttributes=ue(),fe.insert=ae().bind(null,"head"),fe.domAPI=oe(),fe.insertStyleElement=ce(),ie()(_e.Z,fe);const pe=_e.Z&&_e.Z.locals?_e.Z.locals:void 0;te()();const be=function(t){const n=R();return(0,e.h)("button",{className:`${pe.this} ${t.className}`,onClick:t.onClick,style:{backgroundImage:`url(${l}/images/cross-${n}.svg)`},"aria-label":t.closeLabel,"data-testid":"fb-lib-close-button"})};var me=n(917),ge={};ge.styleTagTransform=ve(),ge.setAttributes=ue(),ge.insert=ae().bind(null,"head"),ge.domAPI=oe(),ge.insertStyleElement=ce(),ie()(me.Z,ge);const ye=me.Z&&me.Z.locals?me.Z.locals:void 0,xe=30,we=function(n){var i;const a=Y(),u=R(),{survey:d,onClose:c,showHeader:h=!0,direction:v="bottom-left"}=n,_=(null==d?void 0:d.appearance)||{},f=W(_,u,"popup"),p=X((()=>u),[]),b=X((()=>window.location.href),[]),m=1e3*(null===(i=null==_?void 0:_.closeAfterSeconds)||void 0===i?void 0:i.time)||1e3,[g,y]=B(!1),[x,w]=B(210),[S,A]=B(document.body.scrollHeight),[C,E]=B(window.innerHeight),[F,P]=B(window.innerWidth),[U,L]=B(x>C?"big":"small"),j=D(null),V=D(null),G=d.getPollUrl(b,p),T=e=>{let t=e;return h&&(t+=36),e>C&&(t+=10),t},[H,O]=B(T(x)>=S?"absolute":"fixed");z((()=>{L(j.current.getBoundingClientRect().top<=xe&&j.current.getBoundingClientRect().bottom<=xe||T(x)+xe>=C?"big":"small"),O(T(x)>=S?"absolute":"fixed"),V.current.classList.toggle(ye.slimclass,F<=500)}),[x,C,S,F]);const Q=()=>{y(!1),c(),null==d||d.setClosed()},M=e=>{var n;if(e.source!==V.current.contentWindow)return;if(!d)return;const i=e.data;let a;if("string"==typeof i)try{a=JSON.parse(i)}catch(e){a=null}else a=i;(null==a?void 0:a.event)===t&&(y(!0),null==d||d.setRendered()),(null==a?void 0:a.event)===s&&-1!==(null==a?void 0:a.payload.pageNumber)&&w(null==a?void 0:a.payload.height),(null==a?void 0:a.event)!==r||d.isFinished||w(null===(n=null==a?void 0:a.payload)||void 0===n?void 0:n.height),(null==a?void 0:a.event)===o&&(w(210),d.setFinished(),setTimeout(Q,m))},q=function(e,t){return k=8,X((function(){return e}),t)}((()=>{!g||T(x)>=S||(j.current.getBoundingClientRect().top<=xe&&j.current.getBoundingClientRect().bottom<=xe||T(x)+xe>=C?x>C-xe+window.scrollY?j.current.style.top=10-window.scrollY+"px":j.current.style.top=C-x-10-xe+"px":j.current.style.top="")}),[x,C,S,g]);z((()=>(q(),window.addEventListener("scroll",q),function(){window.removeEventListener("scroll",q)})),[q]),z((()=>{window.addEventListener("message",M);const e=new ResizeObserver((e=>{A(e[0].contentRect.height),E(window.innerHeight),P(window.innerWidth)}));return e.observe(document.body),function(){window.removeEventListener("message",M),e.unobserve(document.body)}}),[]),J(V,u,G,g);const I=[ye.popup].concat(v.split("-").map((e=>ye[e])));return g&&I.push(ye.active),I.push(ye[U]),I.push(ye[H]),null!==d&&(0,e.h)("div",{className:I.join(" "),ref:j,style:f},(0,e.h)("div",{className:ye.main},(0,e.h)(be,{className:ye.close,onClick:Q,closeLabel:$(a)["popup.close"]}),(0,e.h)("div",{className:h?ye.header:`${ye.header} ${ye.header_hidden}`,style:h?{backgroundImage:`url(${l}/images/yandex-logo-${u}.svg)`}:{}}),(0,e.h)("div",{className:h?ye.content:`${ye.content} ${ye.header_hidden}`},(0,e.h)("iframe",{src:G,height:`${x}px`,ref:V,scrolling:"no",onLoad:()=>{N(V,u)}}))))};var ke=n(211),Se={};Se.styleTagTransform=ve(),Se.setAttributes=ue(),Se.insert=ae().bind(null,"head"),Se.domAPI=oe(),Se.insertStyleElement=ce(),ie()(ke.Z,Se);const Ae=ke.Z&&ke.Z.locals?ke.Z.locals:void 0;var Ce=n(416),Ee={};Ee.styleTagTransform=ve(),Ee.setAttributes=ue(),Ee.insert=ae().bind(null,"head"),Ee.domAPI=oe(),Ee.insertStyleElement=ce(),ie()(Ce.Z,Ee),Ce.Z&&Ce.Z.locals&&Ce.Z.locals;const Fe=t=>{const{showHeader:n=!0,appearance:i={},onDismiss:s}=t,o=R(),r=Y(),a=W(i,o,"modal"),u=D(null);return z((()=>{const e=u.current;if(!e)return;e.showModal();const t=e=>{e.preventDefault(),s()};return e.addEventListener("cancel",t),()=>{e.removeEventListener("cancel",t),e.open&&e.close()}}),[u,s]),(0,e.h)("div",{className:Ae.visible,style:a},(0,e.h)("dialog",{ref:u,className:Ae.main,onClick:e=>{e.target===u.current&&s()},"data-testid":"fb-lib-modal"},(0,e.h)(be,{className:Ae.close,onClick:s,closeLabel:$(r)["modal.close"]}),(0,e.h)("header",{className:n?Ae.header:`${Ae.header} ${Ae.header_hidden}`,style:{backgroundImage:`url(${l}/images/yandex-logo-${o}.svg)`}},t.title),(0,e.h)("div",{className:n?Ae.content:`${Ae.content} ${Ae.header_hidden}`},t.content)))};var Pe=n(837),Ue={};Ue.styleTagTransform=ve(),Ue.setAttributes=ue(),Ue.insert=ae().bind(null,"head"),Ue.domAPI=oe(),Ue.insertStyleElement=ce(),ie()(Pe.Z,Ue);const Le=Pe.Z&&Pe.Z.locals?Pe.Z.locals:void 0,Be=function({survey:n,origin:i,onLeftLastPage:a}){var l;const u=R(),d=X((()=>u),[]),c=D(null),[h,v]=B(210),_=null!==(l=null==n?void 0:n.appearance)&&void 0!==l?l:{},f=(null==_?void 0:_.isHeightAuto)||!1,p=(null==n?void 0:n.slug)||"",b=n.getPollUrl(i,d);J(c,u,p,n.isRendered);const m=e=>{var i;if(null===c||null===c.current||e.source!==c.current.contentWindow)return;let l;if("string"==typeof e.data)try{l=JSON.parse(e.data)}catch(e){l=null}""!==p&&(null==l?void 0:l.event)===t&&n.setRendered(),""!==p&&l&&l.event===o&&(f&&v(210),a&&a()),f&&((null==l?void 0:l.event)===s&&-1!==(null==l?void 0:l.payload.pageNumber)&&v(null==l?void 0:l.payload.height),(null==l?void 0:l.event)===r&&v(null===(i=null==l?void 0:l.payload)||void 0===i?void 0:i.height))};return z((()=>(window.addEventListener("message",m),function(){window.removeEventListener("message",m)})),[]),(0,e.h)("div",{className:f&&Le.iframeWrapper},(0,e.h)("iframe",{src:b,scrolling:f?"no":"auto",ref:c,height:f?`${h}px`:"auto",className:f&&Le.heightAuto}))},ze=function(t){var n,i;const{survey:s,isModalVisible:o,onCloseModal:r,onShowModal:a,showHeader:u=!0}=t,d=R(),c=X((()=>window.location.href),[]),h=null!==(n=null==s?void 0:s.appearance)&&void 0!==n?n:{},v=(null==h?void 0:h.direction)||"right",_=W(h,d,"button"),f=(null==h?void 0:h.isButtonHidden)||!1,p=1e3*(null===(i=null==h?void 0:h.closeAfterSeconds)||void 0===i?void 0:i.time)||1e3,b=Y(),m=()=>{document.body.classList.remove("ya-feedback__modal_open"),r()};return(0,e.h)("div",null,!f&&(0,e.h)("div",{className:`${Le.this} ${u?"":Le.headerHidden}  ${Le[v]}\n${Le["ru"!==b?"en-fix":""]}`,style:_},(0,e.h)("button",{onClick:()=>{document.body.classList.add("ya-feedback__modal_open"),a()}},u&&(0,e.h)("img",{src:`${l}/images/logo-short.svg`,alt:"",height:12})," ",$(b)["button.label"])),o&&(0,e.h)(Fe,{content:(0,e.h)(Be,{survey:s,origin:c,onLeftLastPage:()=>{setTimeout(m,p)}}),showHeader:u,onDismiss:m,appearance:h}))};var De=n(470),Xe={};Xe.styleTagTransform=ve(),Xe.setAttributes=ue(),Xe.insert=ae().bind(null,"head"),Xe.domAPI=oe(),Xe.insertStyleElement=ce(),ie()(De.Z,Xe);const je=De.Z&&De.Z.locals?De.Z.locals:void 0;var Ve=function(e,t,n,i){return new(n||(n=Promise))((function(s,o){function r(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}l((i=i.apply(e,t||[])).next())}))};const Ge={fetch:null,init:null,fireEvent:null,setActiveFeedbackQueryParams:null,setPassiveFeedbackQueryParams:null,setDefaultQueryParams:null,setTheme:null,forceTheme:null,hideHeader:null,showHeader:null,showActiveFeedback:null,closeActiveFeedback:null,showPassiveFeedback:null,closePassiveFeedback:null,subscribe:null,unsubscribe:null,disableAllSurveys:null,enableAllSurveys:null,embed:(t=document.body)=>{const n=document.createElement("div");return t.appendChild(n),(0,e.render)((0,e.h)(He,null),n),()=>{t.removeChild(n)}},initEmbeddedApi:()=>new Te};class Te{constructor(){this.api=new p,Ge.init=this.init.bind(this),Ge.fetch=this.fetch.bind(this),Ge.setActiveFeedbackQueryParams=this.setActiveFeedbackQueryParams.bind(this),Ge.setDefaultQueryParams=this.setDefaultQueryParams.bind(this),Ge.subscribe=this.subscribe.bind(this),Ge.unsubscribe=this.unsubscribe.bind(this)}init(e,t){this.api.init(e,null!=t?t:{})}fetch(){return Ve(this,void 0,void 0,(function*(){return yield this.api.fetchActiveSurveys(),this.api.getSurveys()}))}subscribe(e,t){this.api.addEventListener(e,t)}unsubscribe(e,t){this.api.removeEventListener(e,t)}setActiveFeedbackQueryParams(e,t){this.api.setQueryParams(e,t)}setDefaultQueryParams(e){this.api.setQueryParams("default",e)}}class He extends e.Component{constructor(){super(He),this.timerIds={scroll:[],onload:[],action:[],reachGoal:[]},this.on_show_passive_callbacks=[],this.on_close_passive_callbacks=[],this.state={survey_active:null,has_passive_feedback:!1,observers:[],observer_active:!1,theme:null,is_header_hidden:!1,is_modal_visible:!1,is_theme_forced:!1,lang:"ru"},this.api=new p,this.scroll_observer_line_ref=(0,e.createRef)(),Ge.fireEvent=this.fireEvent.bind(this),Ge.init=this.init.bind(this),Ge.fetch=this.fetch.bind(this),Ge.setActiveFeedbackQueryParams=this.setActiveFeedbackQueryParams.bind(this),Ge.setPassiveFeedbackQueryParams=this.setPassiveFeedbackQueryParams.bind(this),Ge.setDefaultQueryParams=this.setDefaultQueryParams.bind(this),Ge.setTheme=this.setTheme.bind(this),Ge.forceTheme=this.forceTheme.bind(this),Ge.hideHeader=this.hideHeader.bind(this),Ge.showHeader=this.showHeader.bind(this),Ge.showActiveFeedback=this.showActiveFeedback.bind(this),Ge.closeActiveFeedback=this.closeActiveFeedback.bind(this),Ge.showPassiveFeedback=this.showPassiveFeedback.bind(this),Ge.closePassiveFeedback=this.closePassiveFeedback.bind(this),Ge.subscribe=this.subscribe.bind(this),Ge.unsubscribe=this.unsubscribe.bind(this),Ge.disableAllSurveys=this.disableAllSurveys.bind(this),Ge.enableAllSurveys=this.enableAllSurveys.bind(this)}fetch(){return Ve(this,void 0,void 0,(function*(){this.removeActiveFeedbackEventHandlers(),yield this.api.fetchActiveSurveys(),this.setupActiveFeedbackEventHandlers(),this.setState({has_passive_feedback:this.api.hasPassiveFeedback()})}))}fireEvent(e){return Ve(this,void 0,void 0,(function*(){this.api.getSurveysByCondition({event:"action",value:e}).forEach((e=>Ve(this,void 0,void 0,(function*(){e.events.filter((t=>"action"===t.event&&!e.isFullfilled("action"))).forEach(this.showActiveSurveyAfterDelay.bind(this,e))}))))}))}getLang(e){return e||(d()===a.Ru?"ru":"en")}init(e,t){(null==t?void 0:t.hideHeader)&&this.hideHeader(),(null==t?void 0:t.forceTheme)&&this.forceTheme(t.forceTheme);const n=this.getLang(null==t?void 0:t.lang);this.setState({lang:n}),this.api.init(e,null!=t?t:{})}subscribe(e,t){switch(e){case c.SHOW_PASSIVE:this.on_show_passive_callbacks.push(t);break;case c.CLOSE_PASSIVE:this.on_close_passive_callbacks.push(t);break;default:this.api.addEventListener(e,t)}}unsubscribe(e,t){var n,i;switch(e){case c.SHOW_PASSIVE:this.on_show_passive_callbacks=null===(n=this.on_show_passive_callbacks)||void 0===n?void 0:n.filter((e=>e!==t));break;case c.CLOSE_PASSIVE:this.on_close_passive_callbacks=null===(i=this.on_close_passive_callbacks)||void 0===i?void 0:i.filter((e=>e!==t));break;default:this.api.removeEventListener(e,t)}}setActiveFeedbackQueryParams(e,t){this.api.setQueryParams(e,t)}setPassiveFeedbackQueryParams(e){var t;const n=null===(t=this.api.getPassiveFeedback())||void 0===t?void 0:t.slug;this.api.setQueryParams(n,e)}setDefaultQueryParams(e){this.api.setQueryParams("default",e)}showActiveFeedback(e,t){var n;const i=(null==t?void 0:t.direction)||(null===(n=null==t?void 0:t.appearance)||void 0===n?void 0:n.direction)||"bottom-left",s=new f({appearance:Object.assign(Object.assign({},null==t?void 0:t.appearance),{direction:i}),slug:e,events:[]},"",null,this.api.getQueryParams.bind(this.api,[e]),(e=>{var n,i,s,o;switch(e.name){case c.RENDERED:null===(n=null==t?void 0:t.onRender)||void 0===n||n.call(t);break;case c.CLOSE_ACTIVE:null===(i=null==t?void 0:t.onClose)||void 0===i||i.call(t);break;case c.FINISHED:null===(s=null==t?void 0:t.onFinish)||void 0===s||s.call(t);break;case c.SKIP:null===(o=null==t?void 0:t.onSkip)||void 0===o||o.call(t)}}),"",!0);this.setState({survey_active:s})}closeActiveFeedback(e=!0){null!==this.state.survey_active&&(e&&this.state.survey_active.skip(),this.state.survey_active.setClosed(),this.setState({survey_active:null}))}showPassiveFeedback(){var e;this.setState({is_modal_visible:!0}),null===(e=this.on_show_passive_callbacks)||void 0===e||e.forEach((e=>e({detail:{survey:this.api.getPassiveFeedback()}})))}closePassiveFeedback(){var e;this.setState({is_modal_visible:!1}),null===(e=this.on_close_passive_callbacks)||void 0===e||e.forEach((e=>e({detail:{survey:this.api.getPassiveFeedback()}})))}renderPassiveFeedback(){var t;const n=this.api.getPassiveFeedback(),i=null!==(t=null==n?void 0:n.appearance)&&void 0!==t?t:{},s=this.state.is_modal_visible;return i.isButtonHidden||(Ge.showPassiveFeedback=null),(0,e.h)(ze,{survey:n,showHeader:!this.state.is_header_hidden,isModalVisible:s,onCloseModal:()=>this.closePassiveFeedback(),onShowModal:()=>this.showPassiveFeedback()})}renderActiveFeedback(){var t;const n=null===(t=this.state.survey_active.appearance)||void 0===t?void 0:t.direction;return(0,e.h)(we,{direction:n,showHeader:!this.state.is_header_hidden,survey:this.state.survey_active,onClose:()=>{this.state.survey_active.skip(),this.setState({survey_active:null})}})}renderScrollObserverLine(){return(0,e.h)("div",{ref:this.scroll_observer_line_ref,className:je["scroll-observer-line"]})}showActiveSurveyAfterDelay(e,t){var n;const i=window.setTimeout((()=>Ve(this,void 0,void 0,(function*(){document.hidden||(e.setFulfilled(t.event),(yield e.checkShow(t.event))&&this.setState({survey_active:e}))}))),null!==(n=t.delayMS)&&void 0!==n?n:0);this.timerIds[t.event].push(i)}setupOnloadEventHandlers(){this.api.getSurveys().forEach((e=>{0===e.events.length&&(e.events=[{event:"onload",delayMS:0}]),e.events.filter((t=>"onload"===t.event&&!e.isFullfilled("onload"))).forEach(this.showActiveSurveyAfterDelay.bind(this,e))}))}removeOnloadEventHandlers(){Object.values(this.timerIds).forEach((e=>{e.forEach(clearTimeout),e.length=0}))}setupOnscrollEventHandlers(){const e=this.api.getSurveys().filter((e=>e.events.some((e=>"scroll"===e.event)))),t=[];e.map((e=>{const n=(e=>{var t;return parseInt(null===(t=e.events.find((e=>"scroll"===e.event)).value)||void 0===t?void 0:t.slice(0,-2),10)})(e),i=new IntersectionObserver((t=>{t.forEach((t=>Ve(this,void 0,void 0,(function*(){t.isIntersecting||(e.setFulfilled("scroll"),(yield e.checkShow("scroll"))&&this.setState({survey_active:e}),i.unobserve(t.target))}))))}),{rootMargin:`${n}px`});t.push(i)})),this.setState({observers:t})}setupActiveFeedbackEventHandlers(){this.setupOnloadEventHandlers(),this.setupOnscrollEventHandlers(),this.onVisibilityChange=()=>{"visible"===document.visibilityState&&this.setupOnloadEventHandlers(),"hidden"===document.visibilityState&&this.removeOnloadEventHandlers()},document.addEventListener("visibilitychange",this.onVisibilityChange)}removeActiveFeedbackEventHandlers(){var e;this.onVisibilityChange&&document.removeEventListener("visibilitychange",this.onVisibilityChange),this.removeOnloadEventHandlers(),null===(e=this.state.observers)||void 0===e||e.forEach((e=>e.disconnect()))}componentWillMount(){this.mq=window.matchMedia("(prefers-color-scheme: dark)"),this.onMqChange=e=>this.setTheme(e.matches?"dark":"light"),this.state.is_theme_forced||(this.setTheme(this.mq.matches?"dark":"light"),this.mq.addEventListener("change",this.onMqChange))}setTheme(e){"system"===e&&(e=this.mq.matches?"dark":"light"),this.setState({theme:e})}forceTheme(e){"system"===e?(e=this.mq.matches?"dark":"light",this.mq.addEventListener("change",this.onMqChange),this.setState({theme:e,is_theme_forced:!1})):(this.mq.removeEventListener("change",this.onMqChange),this.setState({theme:e,is_theme_forced:!0}))}hideHeader(){this.setState({is_header_hidden:!0})}showHeader(){this.setState({is_header_hidden:!1})}disableAllSurveys(){this.api.disableAllSurveys()}enableAllSurveys(){this.api.enableAllSurveys(),this.api.getSurveys().forEach((e=>Ve(this,void 0,void 0,(function*(){(yield e.checkShow("survey_enabled"))&&this.setState({survey_active:e})}))))}componentDidUpdate(){this.state.observer_active||this.state.observers.length&&(this.state.observers.forEach((e=>e.observe(this.scroll_observer_line_ref.current))),this.setState({observer_active:!0}))}componentWillUnmount(){this.mq.removeEventListener("change",this.onMqChange),this.removeActiveFeedbackEventHandlers()}render(){return(0,e.h)(b.Provider,{value:this.state.theme},(0,e.h)(m.Provider,{value:this.state.lang},(0,e.h)("div",{className:je.overflow_wrapper},(0,e.h)("div",{"data-theme":this.state.theme,className:je.root},this.state.has_passive_feedback&&this.renderPassiveFeedback(),this.state.survey_active&&this.renderActiveFeedback(),this.renderScrollObserverLine()))))}}const Oe=Ge,Qe={App:Ge}})(),i})()));